"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[878],{4878:function(e,a,t){t.r(a);var n=t(1413),l=t(4925),o=t(8007),r=t(3719),i=t(2989),d=t(4695),u=t(4990),c=t(6681),v=t(1500),h=t(3544),b=t(6492),m=t(7843),s=t(8050),p=t(9006),f=t(51),g=t(4070),P=t(4897),x=t(763),D=t(9541),w=t(7802),y=t(389),Z=t(3329),C=["defaultState","onSubmit"],k=["withMethod"],B=o.Ry().shape({label:o.Z_().required(),description:o.Z_().max(250).optional()});a.default=function(e){var a,t,o,S,j=e.defaultState,_=(e.onSubmit,(0,l.Z)(e,C)),A=(0,r.d)(),L=(0,D.J)(),W=(0,f.TL)(),M=(0,i.hN)({defaultValues:(0,n.Z)({},j),resolver:(0,d.X)(B),reValidateMode:"onSubmit"}),q=M.formState.errors,I=M.register,R=M.handleSubmit,U=M.getFieldState,T=M.formValues,V=M.setValue,Q=function(e){return function(a){var t=a.withMethod,n=(0,l.Z)(a,k),o="main"===e?(0,x.omit)(n,"bank"):(0,x.pick)(n,["_id","bank"]);console.log("[FormCreateBankAccount] [".concat(e,"]"),{defaultState:j,submitData:o,fData:n}),n._id?W((0,g.ZV)({data:{data:{data:(0,v.vg)(o)}},onLoading:L.onLoading(e),onSuccess:function(e){var a=e.data;m.kl.success("".concat(a.label," updated"))}})):W((0,g.nr)({data:{data:{data:(0,v.vg)(o),params:{withMethod:t}}},onLoading:L.onLoading(e),onSuccess:function(e){var a=e.data;m.kl.success("".concat(a.label," created")),V("_id",a._id)}}))}},K=function(e){return{canSubmit:"bank"!==e||U("bank").isDirty,disabled:"bank"===e&&!(null!==T&&void 0!==T&&T._id),isLoading:"bank"===e?L.isLoading.bank:L.isLoading.main,onSubmit:R(Q(e))}};return(0,Z.jsxs)(s.Z,(0,n.Z)((0,n.Z)({},_),{},{children:[(0,Z.jsxs)(p.h,(0,n.Z)((0,n.Z)({label:"Main info"},K("main")),{},{children:[(0,Z.jsx)(u.Z,{label:(0,h.t)("label"),error:q.label,required:!0,children:(0,Z.jsx)(c.ZP,(0,n.Z)((0,n.Z)({placeholder:(0,h.t)("insertLabel")},I("label")),{},{required:!0,autoFocus:!0}))}),(0,Z.jsx)(u.Z,{label:(0,h.t)("IBAN"),error:q.iban,required:!0,children:(0,Z.jsx)(c.ZP,(0,n.Z)((0,n.Z)({placeholder:(0,h.t)("IBAN")},I("iban")),{},{required:!0}))}),(0,Z.jsx)(u.Z,{label:(0,h.t)("Account holder"),error:q.holder,children:(0,Z.jsx)(c.ZP,(0,n.Z)({placeholder:(0,h.t)("Holder")},I("holder")))}),(0,Z.jsx)(u.Z,{label:(0,h.t)("Tax ID"),error:q.taxCode,children:(0,Z.jsx)(c.ZP,(0,n.Z)({placeholder:(0,h.t)("Tax ID")},I("taxCode")))}),(0,Z.jsx)(u.Z,{label:(0,h.t)("Select type"),error:q.type,children:(0,Z.jsx)(w.Z,{options:P.Lq,value:null!==(a=T.type)&&void 0!==a?a:void 0,onSelect:function(e){e.value&&V("type",e.value,{shouldTouch:!0,shouldDirty:!0})}})}),!T._id&&(0,Z.jsx)(u.Z,{label:(0,h.t)("Create method"),children:(0,Z.jsx)(y.Z,{value:T.withMethod,onChange:function(e){V("withMethod",e)}})})]})),(0,Z.jsxs)(p.h,(0,n.Z)((0,n.Z)({label:"Bank details"},K("bank")),{},{children:[(0,Z.jsx)(b.x,{$size:12,$weight:600,$padding:"8px",children:(0,h.t)("Bank details")}),(0,Z.jsx)(u.Z,{label:(0,h.t)("label"),error:null===(t=q.bank)||void 0===t?void 0:t.label,children:(0,Z.jsx)(c.ZP,(0,n.Z)({placeholder:(0,h.t)("insertLabel")},I("bank.label")))}),(0,Z.jsx)(u.Z,{label:(0,h.t)("Country"),error:null===(o=q.bank)||void 0===o?void 0:o.label,children:(0,Z.jsx)(c.ZP,(0,n.Z)({placeholder:(0,h.t)("Country")},I("bank.country")))}),(0,Z.jsx)(u.Z,{label:(0,h.t)("Tax ID"),error:null===(S=q.bank)||void 0===S?void 0:S.taxCode,children:(0,Z.jsx)(c.ZP,(0,n.Z)({placeholder:(0,h.t)("Tax ID")},I("bank.taxCode")))})]})),(0,Z.jsx)(r.Z,(0,n.Z)({},A))]}))}},4897:function(e,a,t){t.d(a,{Lq:function(){return s.L},SQ:function(){return u},E_:function(){return c},Dr:function(){return b},Cs:function(){return h},Y5:function(){return v},$4:function(){return m.$4},qo:function(){return m.qo},Qc:function(){return m.Qc},ni:function(){return m.ni},KS:function(){return m.KS}});var n=t(3544),l=t(3691),o=t(5481),r=t(1500),i=t(755),d=t(3299),u=((0,o.Gg)(l.Hb),(0,r.H1)(l.Hb)),c=[{label:"Preview",value:i.Q.img_preview,required:!0},{label:"1x",value:i.Q.img_1x},{label:"2x",value:i.Q.img_2x},{label:"Webp",value:i.Q.webp}],v=[{top:{name:(0,n.t)("label"),getData:function(e){return null===e||void 0===e?void 0:e.label}},getImgPreview:function(e){var a,t;return e.images?null===(a=e.images)||void 0===a||null===(t=a[0])||void 0===t?void 0:t.img_preview:void 0},width:"270px",action:"dataWithAvatar"},{top:{name:(0,n.t)("sku"),getData:function(e){return null===e||void 0===e?void 0:e.sku}},bottom:{name:(0,n.t)("barCode"),getData:function(e){return null===e||void 0===e?void 0:e.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,n.t)("type"),path:"type"},width:"100px",action:"status"},{bottom:{name:(0,n.t)("status"),getData:function(e){return e.approved}},top:{name:(0,n.t)("Visibility"),getData:function(e){return e.visible?"visible":"hidden"}},width:"120px",action:"status"},{top:{name:(0,n.t)("Price OUT"),align:"end",getData:function(e){var a,t;return null!==(a=e.price)&&void 0!==a&&a.out?(0,d.pU)(null===(t=e.price)||void 0===t?void 0:t.out):"--.--"}},bottom:{name:(0,n.t)("Price IN"),align:"end",getData:function(e){var a,t;return null!==(a=e.price)&&void 0!==a&&a.in?(0,d.pU)(null===(t=e.price)||void 0===t?void 0:t.in):"--.--"}},width:"150px",action:"valueByPath"},{top:{name:(0,n.t)("Variation label"),getData:function(e){var a;return(null===(a=e.variation)||void 0===a?void 0:a.label)||"---"}},bottom:{name:(0,n.t)("SKU"),getData:function(e){var a;return(null===(a=e.variation)||void 0===a?void 0:a.sku)||"---"}},width:"190px",action:"valueByPath"},{top:{name:(0,n.t)("Warehouse"),getData:function(e){var a;return null===(a=e.warehouse)||void 0===a?void 0:a.label}},bottom:{name:(0,n.t)("Code"),getData:function(e){var a;return null===(a=e.warehouse)||void 0===a?void 0:a.code}},width:"150px",action:"valueByPath"},{top:{name:"\u0411\u0440\u0435\u043d\u0434",getData:function(e){var a;return null===(a=e.brand)||void 0===a?void 0:a.label}},bottom:{name:"\u0412\u0438\u0440\u043e\u0431\u043d\u0438\u043a",getData:function(e){var a;return null===(a=e.brand)||void 0===a?void 0:a.manufacturer}},width:"180px",action:"doubleDataWithAvatar"},{top:{name:"\u041e\u043d\u043e\u0432\u0438\u0432",getData:function(e){var a,t,n;return null!==(a=null===e||void 0===e||null===(t=e.editor)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email)&&void 0!==a?a:"---"}},bottom:{name:"\u0410\u0432\u0442\u043e\u0440",getData:function(e){var a,t,n;return null!==(a=null===e||void 0===e||null===(t=e.author)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email)&&void 0!==a?a:"---"}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},bottom:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},width:"150px",action:"dateDbl"}];var h=[{dataPath:"sku",label:"SKU"},{dataPath:"label",label:(0,n.t)("Label")},{dataPath:"barCode",label:(0,n.t)("Bar-code")},{dataPath:"approved",label:(0,n.t)("Status")},{dataPath:"price.out",label:(0,n.t)("Price")},{dataPath:"createdAt",label:(0,n.t)("Created at")},{dataPath:"updatedAt",label:(0,n.t)("Updated at")},{dataPath:"deletedAt",label:(0,n.t)("Deleted at")},{dataPath:"brand.label",label:(0,n.t)("Brand label")},{dataPath:"warehouse.code",label:(0,n.t)("Warehouse code")},{dataPath:"warehouse.label",label:(0,n.t)("Warehouse label")}],b=[{dataPath:"sku",label:"SKU"},{dataPath:"label",label:(0,n.t)("Label")},{dataPath:"barCode",label:(0,n.t)("Bar-code")},{dataPath:"warehouse.code",label:(0,n.t)("Warehouse code")},{dataPath:"warehouse.label",label:(0,n.t)("Warehouse label")},{dataPath:"brand.label",label:(0,n.t)("Brand label")}],m=(t(4683),t(2517)),s=t(3857)},2517:function(e,a,t){t.d(a,{$4:function(){return h},KS:function(){return b},Qc:function(){return m},ni:function(){return c},qo:function(){return s}});var n=t(3433),l=t(2973),o=t(3544),r=t(5481),i=t(6981),d=t(3299),u={top:{name:(0,o.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,o.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateDbl"},c=((0,r.Gg)(l.D),l.D.new,(0,o.t)(l.D.new),l.D.inWork,(0,o.t)(l.D.inWork),l.D.rejectedByCustomer,(0,o.t)(l.D.rejectedByCustomer),l.D.rejectedByManager,(0,o.t)(l.D.rejectedByManager),l.D.active,(0,o.t)(l.D.active),l.D.fulfilled,(0,o.t)(l.D.fulfilled),l.D.fulfilledWithRefund,(0,o.t)(l.D.fulfilledWithRefund),l.D.archived,(0,o.t)(l.D.archived),l.D.expired,(0,o.t)(l.D.expired),[{top:{name:"".concat((0,o.t)("Status")),getData:function(e){return e.status}},bottom:{name:(0,o.t)("Priority"),getData:function(e){return(0,o.t)("undefined")}},width:"150px",action:"status"},{top:{name:(0,o.t)("Total amount"),align:"end",getData:function(e){var a,t;return(0,d.pU)(null!==(a=null===(t=e.summary)||void 0===t?void 0:t.netto)&&void 0!==a?a:0)}},bottom:{name:(0,o.t)("Slots count"),align:"end",getData:function(e){var a,t;return(null===(a=e.slots)||void 0===a?void 0:a.length)||(null===(t=e.summary)||void 0===t?void 0:t.slotsCount)}},width:"120px",action:"numberWithSpaces"},{top:{name:(0,o.t)("Reference / Internal"),getData:function(e){var a;return null===e||void 0===e||null===(a=e.reference)||void 0===a?void 0:a.internal}},bottom:{name:(0,o.t)("Reference / External"),getData:function(e){var a;return null===e||void 0===e||null===(a=e.reference)||void 0===a?void 0:a.external}},width:"190px",action:"valueByPath"},{top:{name:(0,o.t)("Group"),getData:function(e){var a,t;return null===e||void 0===e||null===(a=e.group)||void 0===a||null===(t=a.reference)||void 0===t?void 0:t.internal}},bottom:{name:(0,o.t)("Strategy"),getData:function(e){var a;return null===e||void 0===e||null===(a=e.group)||void 0===a?void 0:a.strategy}},width:"180px",action:"valueByPath"},{top:{name:(0,o.t)("Customer"),getData:function(e){var a,t,n,l,o,r,i;return(null===(a=e.customer)||void 0===a?void 0:a.name)&&(null===(t=e.customer)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.first)+" "+(null===(l=e.customer)||void 0===l||null===(o=l.name)||void 0===o?void 0:o.second)||(null===(r=e.customer)||void 0===r?void 0:r.label)&&(null===(i=e.customer)||void 0===i?void 0:i.label.base)||"--- ---"}},bottom:{name:(0,o.t)("Phone"),path:"customer.phone"},width:"180px",action:"valueByPath"},{top:{name:(0,o.t)("Receiver"),getData:function(e){var a,t,n,l,o,r,i;return(null===(a=e.receiver)||void 0===a?void 0:a.name)&&(null===(t=e.receiver)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.first)+" "+(null===(l=e.receiver)||void 0===l||null===(o=l.name)||void 0===o?void 0:o.second)||(null===(r=e.receiver)||void 0===r?void 0:r.label)&&(null===(i=e.receiver)||void 0===i?void 0:i.label.base)||"--- ---"}},bottom:{name:(0,o.t)("Phone"),path:"receiver.phone"},width:"180px",action:"valueByPath"},{top:{name:(0,o.t)("Invoices")},width:"200px",action:"tags"},{top:{name:(0,o.t)("Payments")},width:"200px",action:"valueByPath"},{top:{name:(0,o.t)("Deliveries")},width:"200px",action:"valueByPath"},{top:{name:(0,o.t)("comment"),path:"comment"},width:"170px",action:"valueByPath"},{top:{name:(0,o.t)("Refunds")},width:"200px",action:"valueByPath"},{top:{name:(0,o.t)("Manager"),path:"manager.name"},bottom:{name:(0,o.t)("email"),path:"manager.email"},width:"180px",action:"valueByPath"},u]),v=["cashback","bonus","discount"];var h=[{top:{name:(0,o.t)("Offer label"),getData:function(e){var a;return null===(a=e.offer)||void 0===a?void 0:a.label}},bottom:{name:(0,o.t)("Variation label"),getData:function(e){var a;return null===(a=e.variation)||void 0===a?void 0:a.label}},action:"valueByPath",width:"210px"},{top:{name:(0,o.t)("Total amount"),getData:function(e){return e.netto}},bottom:{name:(0,o.t)("Total q-ty"),getData:function(e){return e.quantity}},action:"valueByPath",width:"125px"}].concat((0,n.Z)((0,i.yL)()),(0,n.Z)(v.map((function(e){return{top:{name:(0,o.t)(e),align:"end",getData:function(a){var t;return(0,d.pU)(null===a||void 0===a||null===(t=a[e])||void 0===t?void 0:t.amount)}},bottom:{name:(0,o.t)(e),align:"end",getData:function(a){var t;return(0,d.pU)(null===a||void 0===a||null===(t=a[e])||void 0===t?void 0:t.percentage)}},action:"valueByPath",width:"90px"}}))),[{top:{name:(0,o.t)("Offer sku"),getData:function(e){var a;return null===(a=e.offer)||void 0===a?void 0:a.sku}},bottom:{name:(0,o.t)("Variation sku"),getData:function(e){var a;return null===(a=e.variation)||void 0===a?void 0:a.sku}},action:"valueByPath",width:"150px"},{top:{name:(0,o.t)("Offer bar-code"),getData:function(e){var a;return null===(a=e.offer)||void 0===a?void 0:a.barCode}},bottom:{name:(0,o.t)("Variation bar-code"),getData:function(e){var a;return null===(a=e.variation)||void 0===a?void 0:a.barCode}},action:"valueByPath",width:"150px"},u]),b=h,m=[{dataPath:"reference.internal",label:(0,o.t)("Reference / Internal")},{dataPath:"reference.external",label:(0,o.t)("Reference / External")},{dataPath:"group.reference.internal",label:(0,o.t)("Reference / Internal")+" / ".concat((0,o.t)("Group").toLowerCase())},{dataPath:"group.reference.external",label:(0,o.t)("Reference / External")+" / ".concat((0,o.t)("Group").toLowerCase())},{dataPath:"barCode",label:(0,o.t)("Bar-code")},{dataPath:"status",label:(0,o.t)("Status")},{dataPath:"manager.email",label:(0,o.t)("Manager email")},{dataPath:"manager.code",label:(0,o.t)("Manager code")},{dataPath:"managers.email",label:(0,o.t)("Any managers email")},{dataPath:"managers.code",label:(0,o.t)("Any managers code")},{dataPath:"customer.email",label:(0,o.t)("Customer email")},{dataPath:"customer.phone",label:(0,o.t)("Customer phone")},{dataPath:"customer.name.first",label:(0,o.t)("Customer first name")},{dataPath:"customer.name.second",label:(0,o.t)("Customer second name")},{dataPath:"customer.reference",label:(0,o.t)("Customer reference")},{dataPath:"receiver.email",label:(0,o.t)("Customer email")},{dataPath:"receiver.phone",label:(0,o.t)("Customer phone")},{dataPath:"receiver.name.first",label:(0,o.t)("Customer first name")},{dataPath:"receiver.name.second",label:(0,o.t)("Customer second name")},{dataPath:"receiver.reference",label:(0,o.t)("Customer reference")},{dataPath:"warehouse.code",label:(0,o.t)("Warehouse code")},{dataPath:"warehouse.label",label:(0,o.t)("Warehouse label")},{dataPath:"createdAt",label:(0,o.t)("Created at")},{dataPath:"updatedAt",label:(0,o.t)("Updated at")},{dataPath:"deletedAt",label:(0,o.t)("Deleted at")}],s=[{dataPath:"reference.internal",label:(0,o.t)("Reference / Internal")},{dataPath:"reference.external",label:(0,o.t)("Reference / External")},{dataPath:"barCode",label:(0,o.t)("Bar-code")},{dataPath:"warehouse.code",label:(0,o.t)("Warehouse code")},{dataPath:"warehouse.label",label:(0,o.t)("Warehouse label")},{dataPath:"manager.email",label:(0,o.t)("Manager email")},{dataPath:"manager.code",label:(0,o.t)("Manager code")},{dataPath:"managers.email",label:(0,o.t)("Any managers email")},{dataPath:"managers.code",label:(0,o.t)("Any managers code")}]},755:function(e,a,t){t.d(a,{Q:function(){return n}});var n=function(e){return e.img_preview="img_preview",e.img_1x="img_1x",e.img_2x="img_2x",e.webp="webp",e}({})}}]);
//# sourceMappingURL=878.2c9f3dba.chunk.js.map