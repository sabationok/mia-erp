"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[696],{4696:function(e,n,i){i.r(n),i.d(n,{FormCreateOrdersGroupStepsEnum:function(){return Be},default:function(){return Ae}});var o,t,l,r,a=i(168),d=i(1413),u=i(9439),s=i(4942),c=i(1500),v=i(9953),f=i(2791),h=i(3350),m=i(8095),x=i(1251),p=i(107),g=i(4662),Z=i(3433),b=i(7348),j=i(2928),C=i(7843),S=i(3185),y=i(3665),P=i(6606),w=i(7653),I=i(6492),k=i(3329),D=(0,h.ZP)(w.Z)(o||(o=(0,a.Z)(["\n  & .header {\n  }\n  & .content {\n    padding: 0;\n  }\n"]))),B=function(e){var n=e.slots,i=e.onRemove,o=e.onUpdate,t=e.renderHeader,l=e.title,r=e.onAddSlotPress,a=e.renderFooter,d=(0,h.Fg)(),u=(0,f.useMemo)((function(){return n.map((function(e){return(0,k.jsx)(P.Z,{slot:e,editable:!0,onRemovePress:i?function(){return(null===e||void 0===e?void 0:e.tempId)&&i(null===e||void 0===e?void 0:e.tempId)}:void 0,onUpdate:o},"slot_".concat(null===e||void 0===e?void 0:e.tempId))}))}),[i,o,n]),s=(0,f.useMemo)((function(){return(0,k.jsxs)(m.ZP,{fxDirection:"row",fillHeight:!0,gap:8,alignItems:"center",padding:"2px 0",children:[t||(0,k.jsx)(I.x,{$weight:500,$size:15,children:l}),r&&(0,k.jsx)(m.ZP,{height:"80%",border:"1px solid ".concat(d.modalBorderColor)}),r&&(0,k.jsx)(j.ZP,{variant:"textExtraSmall",style:{minWidth:"fit-content",height:"100%",fontWeight:600},disabled:!r,onClick:r,children:(0,p.t)("Add")})]})}),[r,t,d.modalBorderColor,l]);return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(D,{open:!0,renderHeader:s,renderFooter:a,title:l,children:u})})},q=i(387),W=i(4805),E=i(1819),M=i(7824),_=(0,h.ZP)(m.ZP)(t||(t=(0,a.Z)(["\n  color: ",";\n"])),(function(e){return e.theme.fontColorSidebar})),A=(0,h.ZP)(m.ZP)(l||(l=(0,a.Z)([""]))),R=(0,h.ZP)(m.ZP)(r||(r=(0,a.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),z=function(e){var n=e.onChangeValidStatus,i=(0,y.kw)(),o=(0,E.xc)()[M.d.orders],t=(0,b.xA)().ordersGroupFormData.slots,l=(0,W.useMediaQuery)({maxWidth:480}),r=(0,f.useCallback)((function(e){o.addTempSlot(e)}),[o]),a=(0,f.useCallback)((function(e){o.removeTempSlot(e)}),[o]),d=(0,f.useCallback)((function(e){o.updateTempSlot(e)}),[o]),u=(0,f.useMemo)((function(){var e={};return null===t||void 0===t||t.map((function(n){var i,o,t;null!==(i=n.warehouse)&&void 0!==i&&i._id&&(e[n.warehouse._id]={warehouse:n.warehouse,slots:null!==(o=e[n.warehouse._id])&&void 0!==o&&o.slots?[].concat((0,Z.Z)(null===(t=e[n.warehouse._id])||void 0===t?void 0:t.slots),[n]):[n]});return""})),e}),[t]);(0,f.useEffect)((function(){n&&n(!(null===t||void 0===t||!t.length)&&(null===t||void 0===t?void 0:t.length)>0)}),[n,null===t||void 0===t?void 0:t.length]);var s=(0,f.useMemo)((function(){return Object.keys(u).map((function(e,n){var o,t,l=u[e];return(0,k.jsx)(B,{slots:l.slots,title:null===l||void 0===l||null===(t=l.warehouse)||void 0===t?void 0:t.label,onRemove:a,onUpdate:d,onAddSlotPress:function(){var e=i.open({Modal:S.n.FormCreateOrderSlot,props:{params:null!==l&&void 0!==l&&l.warehouse?{warehouse:(0,q.rE)(null===l||void 0===l?void 0:l.warehouse)}:void 0,onSubmit:function(n){r(n),n&&null!==e&&void 0!==e&&e.onClose&&(null===e||void 0===e||e.onClose())}}})}},"pre-order_".concat((null===(o=l.warehouse)||void 0===o?void 0:o._id)||n))}))}),[u,r,a,d,i]);return(0,k.jsxs)(_,{flex:1,fillWidth:!0,overflow:"hidden",style:{position:"relative"},children:[(0,k.jsx)(A,{flex:1,overflow:"auto",children:(0,k.jsx)(m.ZP,{flex:1,fillWidth:!0,children:s})}),(0,k.jsxs)(R,{fxDirection:"row",gap:8,padding:"8px",children:[(0,k.jsx)(j.ZP,{variant:"defaultSmall",onClick:function(){window.confirm("Remove all items?")&&C.kl.info("All items will be remove")},children:(0,p.t)("Remove all")}),(0,k.jsx)(j.ZP,{variant:"outlinedSmall",flex:1,onClick:function(){var e=i.open({Modal:S.n.FormCreateOrderSlot,props:{onSubmit:function(n){r(n),n&&null!==e&&void 0!==e&&e.onClose&&(null===e||void 0===e||e.onClose())}}})},children:(0,p.t)(l?"Add":"Add position to group")})]})]})},F=i(4990),$=i(4925),V=i(9656),T=i(1186),N=i(8839),L=i(7665),H=["onSelect","onSubmit","onClose","asReceiver"],O=function(e){var n=e.onSelect,i=(e.onSubmit,e.onClose),o=e.asReceiver,t=(0,$.Z)(e,H),l=(0,b.I6)().customers,r=(0,y.kw)(),a=(0,E.xc)()[E.EJ.customers],u=(0,f.useMemo)((function(){return{tableData:l,tableTitles:T.f,actionsCreator:function(e){return[{icon:"refresh",onClick:function(){return a.getAll()}},{separator:!0},{icon:"plus",onClick:function(){var e=r.open({ModalChildren:L.Z,modalChildrenProps:{onSubmit:function(n){a.create({data:(0,q.vg)(n),onSuccess:null===e||void 0===e?void 0:e.onClose})}}})}}]},onRowClick:function(e){null!==e&&void 0!==e&&e.rowData&&n&&(n(e.rowData),i&&i())}}}),[a,l,i,r,n]);return(0,f.useEffect)((function(){a.getAll({data:{refresh:!0,params:{}}})}),[]),(0,k.jsx)(V.Z,(0,d.Z)((0,d.Z)({fillWidth:!0,fillHeight:!0,title:(0,p.t)(o?"Select receiver":"Select customer"),onClose:i},t),{},{children:(0,k.jsx)(N.ZP,(0,d.Z)({},u))}))},G=i(7802),U=i(9214),Q=i(8878),J=["onSubmit","onSelect","onClose"],X=function(e){e.onSubmit;var n,i=e.onSelect,o=e.onClose,t=((0,$.Z)(e,J),(0,b.O5)()),l=t.users,r=t.permission,a=(0,E.xc)()[M.d.permissions],s=(0,f.useState)(!1),c=(0,u.Z)(s,1)[0],v=(0,f.useMemo)((function(){return{tableData:l.filter((function(e){return!e.integration})),onRowClick:function(e){var n=l.find((function(n){return n._id===(null===e||void 0===e?void 0:e.rowId)}));n&&i&&i(n)},actionsCreator:function(e){return[{name:"refresh",icon:"refresh",onClick:function(){var e,n;(null===(e=r.company)||void 0===e?void 0:e._id)&&a.getAllByCompanyId({data:{_id:null===(n=r.company)||void 0===n?void 0:n._id,params:{recipient:U.Eb.user}}})}}]}}}),[i,null===(n=r.company)||void 0===n?void 0:n._id,a,l]);return(0,k.jsx)(V.Z,{fillWidth:!0,fillHeight:!0,onClose:o,title:(0,p.t)("Select manager"),children:(0,k.jsx)(N.ZP,(0,d.Z)((0,d.Z)({tableTitles:Q.NT},v),{},{hasSearch:!1,isLoading:c}))})},K=i(1392),Y=i(2911),ee=i(389),ne=i(6681),ie=i(1134),oe=function(e){var n=e.onSuccess,i=e.isReceiver,o=(0,E.xc)()[E.EJ.customers],t=(0,y.kw)();return(0,k.jsx)(j.ZP,{variant:"onlyIcon",icon:"plus",iconSize:"100%",size:"30px",onClick:function(){var e=t.open({ModalChildren:L.Z,modalChildrenProps:{title:i?(0,p.t)("Create receiver"):void 0,onSubmit:function(i){o.create({data:(0,q.vg)(i),onSuccess:function(i){n&&n(i),null===e||void 0===e||e.onClose()}})}}})}})},te=function(e){var n=e.info,i=e.isReceiver,o=e.isManager,t=(0,h.Fg)(),l=(0,f.useMemo)((function(){if(n)return function(e){var n=e.isManager;return[{label:(0,p.t)("label"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.label)||void 0===n?void 0:n.base)||"---"},visible:!n},{label:(0,p.t)("name"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.first)||"---"},visible:!0},{label:(0,p.t)("Middle name"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.middle)||"---"},visible:!0},{label:(0,p.t)("secondName"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.second)||"---"},visible:!0},{label:(0,p.t)("email"),getValue:function(e){return(null===e||void 0===e?void 0:e.email)||"---"},visible:!0},{label:(0,p.t)("taxCode"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.taxCode)||void 0===n?void 0:n.corp)||"---"},visible:!n},{label:(0,p.t)("personalTaxCode"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.taxCode)||void 0===n?void 0:n.personal)||"---"},visible:!n},{label:(0,p.t)("tags"),getValue:function(e){var n;return(null===e||void 0===e||null===(n=e.tags)||void 0===n?void 0:n.join(", "))||"---"},visible:!n}]}({info:warehouse,isReceiver:i,isManager:o}).map((function(e){var i=e.label,o=e.getValue;return e.visible&&(0,k.jsxs)(m.ZP,{gap:2,padding:"4px",flex:"1 1 50%",maxWidth:"50%",border:"1px solid ".concat(t.modalBorderColor),children:[(0,k.jsx)(I.x,{$size:10,children:i}),(0,k.jsx)(I.x,{$align:"right",$size:12,$weight:600,children:o(n)})]},i)}))}),[n,o,i,t.modalBorderColor]);return(0,k.jsx)(m.ZP,{fillWidth:!0,flexWrap:"wrap",fxDirection:"row",border:"1px solid ".concat(t.modalBorderColor),children:l})};var le=[{name:"country",label:(0,p.t)("Country"),required:!1},{name:"region",label:(0,p.t)("Region"),required:!1},{name:"area",label:(0,p.t)("Area"),required:!1},{name:"city",label:(0,p.t)("City"),required:!1},{name:"street",label:(0,p.t)("Street"),required:!1},{name:"house",label:(0,p.t)("House"),required:!1},{name:"office",label:(0,p.t)("Office"),required:!1},{name:"room",label:(0,p.t)("Room"),required:!1}],re=i(765),ae=i(9846),de=i(9297),ue=i(8527),se=i(4522);function ce(e,n){(0,se.Z)(2,arguments);var i=(0,ue.Z)(e),o=(0,de.Z)(n);return isNaN(o)?new Date(NaN):o?(i.setDate(i.getDate()+o),i):i}var ve,fe,he,me,xe,pe,ge,Ze=i(8251),be=function(e){var n=e.title;return(0,k.jsx)(I.x,{$padding:"0 6px",$ellipsisMode:!0,$size:16,$weight:500,children:n})},je=(0,h.ZP)(m.ZP)(ve||(ve=(0,a.Z)([""]))),Ce=(0,h.ZP)(m.ZP)(fe||(fe=(0,a.Z)(["\n  padding-bottom: 8px;\n\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),Se=(0,h.ZP)(w.Z)(he||(he=(0,a.Z)(["\n  & .content {\n    max-width: 480px;\n    width: 100%;\n    margin: auto;\n  }\n"]))),ye=function(e){var n,i,o,t,l,r,a,v,h,x,g,Z,C=e.onChangeValidStatus,S=(0,y.kw)(),P=(0,ie.Gc)(),w=P.formState,I=w.isValid,D=w.errors,B=P.register,q=P.setValue,W=P.unregister,E=P.watch,M=P.trigger,_=(0,f.useState)(Ze.oZ.externalService),A=(0,u.Z)(_,2),R=(A[0],A[1],E()),z=(0,Y.f)((0,b.ei)().methods,{withFullLabel:!0}),$=(0,Y.f)((0,b.$N)().methods,{withFullLabel:!0}),V=(0,Y.f)((0,b.A2)().methods,{withFullLabel:!0}),T=(0,f.useState)({hasDelivery:!!R.deliveryInfo,hasDeliveryInvoice:!(null===(n=R.deliveryInfo)||void 0===n||!n.invoiceInfo),hasReceiverInfo:!!R.receiver,hasExecuteDate:!(null===(i=R.shipmentInfo)||void 0===i||!i.executeAt)}),N=(0,u.Z)(T,2),L=N[0],H=N[1],U=function(e,n){try{q(e,n,{shouldTouch:!0}),(0,re.mC)((function(){return M().then((function(e){e&&C&&C(e)})).catch((function(e){console.error("handleOnChangeValue trigger error",e)}))}))}catch(i){console.error("handleOnChangeValue: ",i)}},Q=function(e){return function(n){if(H((function(i){return(0,d.Z)((0,d.Z)({},i),{},(0,s.Z)({},e,n))})),n){if("hasExecuteDate"===e)return q("shipmentInfo.executeAt",ae.Z(ce(new Date,1),"yyyy-MM-dd"));if("hasDeliveryInvoice"===e)return q("deliveryInfo.invoiceInfo.expireAt",(0,c.w4)(ce(new Date,1)))}else if(!n){if("hasReceiverInfo"===e)return W("receiver");if("hasDeliveryInvoice"===e)return W("deliveryInfo.invoiceInfo");if("hasDelivery"===e)return W("deliveryInfo")}}},J=function(e){return{name:e,onChange:Q(e),value:L[e]}};return(0,f.useEffect)((function(){C&&C(I)}),[I,C]),(0,k.jsxs)(je,{flex:1,overflow:"auto",children:[(0,k.jsxs)(m.ZP,{fillWidth:!0,gap:8,padding:"8px 2px",style:{maxWidth:480,width:"100%",margin:"0 auto"},children:[(null===R||void 0===R?void 0:R.manager)&&(0,k.jsx)(F.Z,{label:(0,p.t)("Manager"),children:(0,k.jsx)(te,{info:null===R||void 0===R||null===(o=R.manager)||void 0===o?void 0:o.user,isManager:!0})}),(0,k.jsx)(j.ZP,{variant:"outlinedSmall",onClick:function(){var e=S.open({ModalChildren:X,modalChildrenProps:{onSelect:function(n){U("manager",n),(null===e||void 0===e?void 0:e.onClose)&&(null===e||void 0===e||e.onClose())}}})},children:(0,p.t)(null!==R&&void 0!==R&&R.manager?"Change manager":"Select manager")})]}),(0,k.jsxs)(m.ZP,{padding:"0 2px",children:[(0,k.jsxs)(Se,{contentContainerStyle:{padding:"8px 0",gap:8},open:!0,renderHeader:(0,k.jsx)(be,{title:(0,p.t)("Customer")}),children:[(null===R||void 0===R?void 0:R.customer)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(F.Z,{label:(0,p.t)("Customer information"),children:(0,k.jsx)(te,{info:null===R||void 0===R?void 0:R.customer})}),(0,k.jsx)(Ce,{fillWidth:!0,overflow:"hidden",children:(0,k.jsx)(F.Z,{label:(0,p.t)("Communication methods"),children:(0,k.jsx)(G.Z,{numColumns:2,value:[null!==(t=null===R||void 0===R||null===(l=R.communication)||void 0===l||null===(r=l.customer)||void 0===r?void 0:r._id)&&void 0!==t?t:""],resetButtonLabel:(0,p.t)("Not needed"),options:$,resetButtonPosition:"start",onSelect:function(e){var n=e.value;U("communication.customer",{_id:n})}})})})]}),(0,k.jsxs)(m.ZP,{fxDirection:"row",gap:8,fillWidth:!0,alignItems:"center",children:[(0,k.jsx)(oe,{onSuccess:function(e){U("customer",e)}}),(0,k.jsx)(j.ZP,{variant:"outlinedSmall",flex:1,onClick:function(){var e=S.open({ModalChildren:O,modalChildrenProps:{onSelect:function(n){U("customer",n),(null===e||void 0===e?void 0:e.onClose)&&(null===e||void 0===e||e.onClose())}}})},children:(0,p.t)(null!==R&&void 0!==R&&R.customer?"Change customer":"Select customer")})]}),(0,k.jsx)(Ce,{fillWidth:!0,gap:4,children:(0,k.jsx)(F.Z,{label:(0,p.t)("Receiver"),children:(0,k.jsx)(ee.Z,(0,d.Z)((0,d.Z)({},J("hasReceiverInfo")),{},{rejectLabel:(0,p.t)("The same"),acceptLabel:(0,p.t)("Another")}))})})]}),(null===L||void 0===L?void 0:L.hasReceiverInfo)&&(0,k.jsxs)(Se,{contentContainerStyle:{padding:"8px 0",gap:8},open:!0,renderHeader:(0,k.jsx)(be,{title:(0,p.t)("Receiver")}),children:[(null===R||void 0===R?void 0:R.receiver)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(F.Z,{label:(0,p.t)("Receiver information"),children:[(0,k.jsx)(te,{info:null===R||void 0===R?void 0:R.receiver})," "]}),(0,k.jsx)(Ce,{fillWidth:!0,children:(0,k.jsx)(F.Z,{label:(0,p.t)("Communication methods"),children:(0,k.jsx)(G.Z,{numColumns:2,value:[null!==(a=null===R||void 0===R||null===(v=R.communication)||void 0===v||null===(h=v.receiver)||void 0===h?void 0:h._id)&&void 0!==a?a:""],resetButtonLabel:(0,p.t)("Without"),options:$.map((function(e){return(0,d.Z)((0,d.Z)({},e),{},{value:e._id})})),resetButtonPosition:"start",onSelect:function(e){var n=e.value;U("communication.receiver",{_id:n})}})})})]}),(0,k.jsxs)(m.ZP,{fxDirection:"row",gap:8,fillWidth:!0,alignItems:"center",children:[(0,k.jsx)(oe,{isReceiver:!0,onSuccess:function(e){U("receiver",e)}}),(0,k.jsx)(j.ZP,{variant:"outlinedSmall",flex:1,onClick:function(){var e=S.open({ModalChildren:O,modalChildrenProps:{onSelect:function(n){U("receiver",n),(null===e||void 0===e?void 0:e.onClose)&&(null===e||void 0===e||e.onClose())}}})},children:(0,p.t)(null!==R&&void 0!==R&&R.receiver?"Change receiver":"Select receiver")})]})]}),(0,k.jsxs)(Se,{contentContainerStyle:{padding:"0 2px"},open:!0,renderHeader:(0,k.jsx)(be,{title:(0,p.t)("Shipment")}),children:[(0,k.jsxs)(Ce,{fillWidth:!0,gap:4,children:[(0,k.jsx)(F.Z,{label:(0,p.t)("Another execute date"),children:(0,k.jsx)(ee.Z,(0,d.Z)({},J("hasExecuteDate")))}),(null===L||void 0===L?void 0:L.hasExecuteDate)&&(0,k.jsx)(F.Z,{label:(0,p.t)("Execute at"),required:null===L||void 0===L?void 0:L.hasExecuteDate,children:(0,k.jsx)(ne.ZP,(0,d.Z)({placeholder:(0,p.t)("Execute at"),type:"date",required:null===L||void 0===L?void 0:L.hasExecuteDate},B("shipmentInfo.executeAt",{required:null===L||void 0===L?void 0:L.hasExecuteDate})))})]}),(0,k.jsx)(Ce,{fillWidth:!0,gap:4,children:(0,k.jsx)(F.Z,{label:(0,p.t)("Delivery"),children:(0,k.jsx)(ee.Z,(0,d.Z)({},J("hasDelivery")))})})]}),(null===L||void 0===L?void 0:L.hasDelivery)&&(0,k.jsxs)(Se,{contentContainerStyle:{padding:"0 2px"},open:!0,renderHeader:(0,k.jsx)(be,{title:(0,p.t)("Delivery")}),children:[(0,k.jsx)(Ce,{fillWidth:!0,gap:8,children:(0,k.jsx)(F.Z,{label:(0,p.t)("Delivery method"),required:!0,children:(0,k.jsx)(K.Z,{options:z,currentOption:null===R||void 0===R||null===(x=R.deliveryInfo)||void 0===x?void 0:x.method,onChangeIndex:function(e){U("deliveryInfo.method",z[e])}})})}),(0,k.jsx)(Ce,{fillWidth:!0,style:{columnGap:8,display:"grid",gridTemplateColumns:"1fr 1fr"},children:le.map((function(e){var n,i,o=e.name,t=e.label,l=e.required;return(0,k.jsx)(F.Z,{label:t,error:null!==D&&void 0!==D&&null!==(n=D.deliveryInfo)&&void 0!==n&&n.destination?null===D||void 0===D||null===(i=D.deliveryInfo)||void 0===i?void 0:i.destination[o]:void 0,required:l,children:(0,k.jsx)(ne.ZP,(0,d.Z)({required:l,placeholder:t},B("deliveryInfo.destination.".concat(o),{required:l})))},"dest-addr-".concat(t))}))}),(0,k.jsx)(Ce,{fillWidth:!0,gap:8,children:(0,k.jsx)(F.Z,{label:(0,p.t)("Has payment"),required:!0,children:(0,k.jsx)(ee.Z,(0,d.Z)({},J("hasDeliveryInvoice")))})}),(0,k.jsx)(Ce,{fillWidth:!0,gap:8,children:(null===L||void 0===L?void 0:L.hasDeliveryInvoice)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(F.Z,{label:(0,p.t)("Payment method"),required:!0,children:(0,k.jsx)(K.Z,{options:V,currentOption:null===R||void 0===R||null===(g=R.deliveryInfo)||void 0===g||null===(Z=g.invoiceInfo)||void 0===Z?void 0:Z.method,onChangeIndex:function(e){U("deliveryInfo.invoiceInfo.method",V[e])}})}),(0,k.jsx)(F.Z,{label:(0,p.t)("Expired at"),required:!0,children:(0,k.jsx)(ne.ZP,(0,d.Z)({placeholder:(0,p.t)("Expired at"),type:"datetime-local",required:!0},B("deliveryInfo.invoiceInfo.expireAt",{required:!0})))})]})})]}),(0,k.jsx)(Se,{contentContainerStyle:{padding:"8px 2px"},open:!0,renderHeader:(0,k.jsx)(be,{title:(0,p.t)("Invoicing")}),children:(0,k.jsx)(F.Z,{label:(0,p.t)("Expired at"),required:!0,children:(0,k.jsx)(ne.ZP,(0,d.Z)({placeholder:(0,p.t)("Expired at"),type:"datetime-local",required:!0},B("invoiceInfo.expireAt",{required:!0})))})})]})]})},Pe=i(763),we=i.n(Pe),Ie=i(4695),ke=i(371),De=i(1347),Be=function(e){return e.Stuffing="Stuffing",e.Info="Info",e}({}),qe=(0,c.H1)(Be),We=(me={},(0,s.Z)(me,Be.Stuffing,!0),(0,s.Z)(me,Be.Info,!1),me),Ee=h.ZP.form(xe||(xe=(0,a.Z)(["\n  color: ",";\n\n  display: flex;\n  flex-direction: column;\n\n  width: 98vw;\n  height: 98vh;\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.modalBackgroundColor})),Me=(0,h.ZP)(m.ZP)(pe||(pe=(0,a.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),_e=(0,h.ZP)(m.ZP)(ge||(ge=(0,a.Z)([""]))),Ae=function(e){var n,i,o,t,l=e.onClose,r=(0,E.xc)()[E.EJ.orders],a=(0,b.xA)().ordersGroupFormData,h=(0,f.useState)(!1),m=(0,u.Z)(h,2),Z=m[0],j=m[1],S=(0,c.dn)(qe),y=S.stepsMap,P=S.stepIdx,w=S.setNextStep,I=S.setPrevStep,D=S.getCurrentStep,B=S.isLast,q=(0,f.useState)(We),W=(0,u.Z)(q,2),M=W[0],_=W[1],A=function(e){return function(n){_((function(i){return(0,d.Z)((0,d.Z)({},i),{},(0,s.Z)({},Be[e],n))}))}},R=(0,ie.cI)({defaultValues:(0,d.Z)((0,d.Z)({},a.info),{},{invoiceInfo:(0,d.Z)((0,d.Z)({},null===(n=a.info)||void 0===n?void 0:n.invoiceInfo),{},{expireAt:null!==(i=null===(o=a.info)||void 0===o||null===(t=o.invoiceInfo)||void 0===t?void 0:t.expireAt)&&void 0!==i?i:(0,c.w4)(ce(new Date,1))})}),resolver:(0,Ie.X)(ke.Lr),reValidateMode:"onSubmit"}),F=R.watch,$=R.handleSubmit,V=F(),T=(0,f.useMemo)((function(){return null!==y&&void 0!==y&&y.Stuffing?(0,k.jsx)(z,{onChangeValidStatus:A("Stuffing")}):null!==y&&void 0!==y&&y.Info?(0,k.jsx)(ye,{onChangeValidStatus:A("Info"),isGroup:!0}):void 0}),[null===y||void 0===y?void 0:y.Info,null===y||void 0===y?void 0:y.Stuffing]),N=(0,f.useMemo)((function(){return M[D().value]}),[D,M]);return(0,k.jsx)(ie.RV,(0,d.Z)((0,d.Z)({},R),{},{children:(0,k.jsxs)(Ee,{onSubmit:$((function(e){B?(0,De.k_)(De.p6.groups.createByWarehouse,{data:{info:r.toOrderInfoReqData(V,{omitPathArr:[]}),slots:r.toOrderSlotsReqData(a.slots)},onLoading:j,logError:!0,logResData:!0}):C.kl.error("Form data is not valid")}),(function e(n){console.log(e.name,n)})),children:[(0,k.jsx)(x.xB,{title:(0,p.t)("Create orders group by warehouse"),onBackPress:l}),(0,k.jsxs)(Me,{fillWidth:!0,flex:1,overflow:"hidden",children:[(0,k.jsx)(v.Z,{options:qe,asStepper:!0,currentIndex:P,optionProps:{fitContentH:!0}}),T]}),(0,k.jsx)(_e,{padding:"8px",children:(0,k.jsx)(g.Z,{steps:qe,onNextPress:function(){"Info"===D().value&&r.updateCurrentGroupFormInfoData(we().cloneDeep(V)),N?w():C.kl.error("".concat((0,p.t)("Step is not finished"),': "').concat(D().value.toUpperCase(),'"'))},onPrevPress:function(){"Info"===D().value&&r.updateCurrentGroupFormInfoData(we().cloneDeep(V)),I()},currentIndex:P,canGoNext:!0,canSubmit:B,submitButton:!0,isLoading:Z,onCancelPress:0===P?l:void 0})})]})}))}},7665:function(e,n,i){i.d(n,{Z:function(){return E}});var o,t=i(168),l=i(1413),r=i(4925),a=function(e){return e.facebook="facebook",e.instagram="instagram",e.referralSystem="referralSystem",e.another="another",e}({}),d=i(9656),u=i(107),s=i(3350),c=i(8095),v=i(4990),f=i(6681),h=i(9964),m=i(457),x=i(1134),p=i(2928),g=i(1392),Z=i(8553),b=i(2791),j=i(7843),C=i(9751),S=i(763),y=i.n(S),P=i(3329),w=["defaultState","withReferer","onSubmit"],I=["register","setValue","handleSubmit","watch"],k=j.E4.isDevMode(),D=(0,Z.H1)(a),B=(0,s.ZP)(c.ZP)(o||(o=(0,t.Z)([""]))),q=function(e){var n=e.form,i=[{name:"first",label:(0,u.t)("First name"),required:!0},{name:"second",label:(0,u.t)("Second name")},{name:"middle",label:(0,u.t)("Middle name")}];return(0,P.jsx)(P.Fragment,{children:i.map((function(e){var i=e.name,o=e.label,t=e.required;return(0,P.jsx)(v.Z,{label:o,required:t,children:(0,P.jsx)(f.ZP,(0,l.Z)((0,l.Z)({placeholder:o},n.register("name.".concat(i),{required:t})),{},{required:t}))},"name_".concat(i))}))})},W=function(e){var n=e.form,i=[{name:"base",label:(0,u.t)("Label"),required:!0},{name:"print",label:(0,u.t)("Print label")}];return(0,P.jsx)(P.Fragment,{children:i.map((function(e){var i=e.name,o=e.label,t=e.required;return(0,P.jsx)(v.Z,{label:o,required:t,children:(0,P.jsx)(f.ZP,(0,l.Z)((0,l.Z)({placeholder:o},n.register("label.".concat(i),{required:t})),{},{required:t}))},"name_".concat(i))}))})},E=function(e){var n=e.defaultState,i=e.withReferer,o=e.onSubmit,t=(0,r.Z)(e,w),s=(0,x.cI)({defaultValues:(0,l.Z)((0,l.Z)({},n),{},{businessType:C.GE.company})}),Z=s.register,j=s.setValue,S=s.handleSubmit,E=s.watch,M=(0,r.Z)(s,I),_=E(),A=(0,b.useMemo)((function(){return!(null===n||void 0===n||!n.email)}),[null===n||void 0===n?void 0:n.email]);return(0,P.jsx)(d.Z,(0,l.Z)((0,l.Z)({fillHeight:!0},t),{},{title:t.title?t.title:(0,u.t)("Create customer"),onSubmit:S((function(e){o&&o(y().omit(e,A?["engagementSource","email"]:["engagementSource"]))})),children:(0,P.jsxs)(B,{padding:"0 8px 8px",children:[(0,P.jsx)(v.Z,{label:(0,u.t)("type"),required:!0,children:(0,P.jsx)(h.Z,{options:m.Wk,onSelect:function(e){j("businessType",null===e||void 0===e?void 0:e.value)}})}),_.businessType!==C.GE.person&&(0,P.jsx)(W,{form:(0,l.Z)({register:Z,setValue:j,handleSubmit:S,watch:E},M)}),_.businessType!==C.GE.company&&(0,P.jsx)(q,{form:(0,l.Z)({register:Z,setValue:j,handleSubmit:S,watch:E},M)}),(0,P.jsx)(v.Z,{label:(0,u.t)("email"),disabled:A,required:!0,children:(0,P.jsx)(f.ZP,(0,l.Z)((0,l.Z)({placeholder:(0,u.t)("email"),type:"email"},Z("email",{required:!0})),{},{disabled:A,required:!0}))}),(0,P.jsx)(v.Z,{label:(0,u.t)("phone"),children:(0,P.jsx)(f.ZP,(0,l.Z)({placeholder:(0,u.t)("phone")},Z("phone")))}),_.businessType!==C.GE.company&&(0,P.jsx)(v.Z,{label:(0,u.t)("Birth date"),children:(0,P.jsx)(f.ZP,(0,l.Z)((0,l.Z)({placeholder:(0,u.t)("Birth date")},Z("birthDate")),{},{type:"datetime-local"}))}),i&&k&&(0,P.jsx)(v.Z,{label:(0,u.t)("Referrer id"),children:(0,P.jsx)(f.ZP,(0,l.Z)({placeholder:(0,u.t)("Referrer id")},Z("referrer._id")))}),(0,P.jsx)(v.Z,{label:(0,u.t)("Source"),children:(0,P.jsx)(g.Z,{disabled:!0,options:D,currentOption:{value:null===_||void 0===_?void 0:_.engagementSource},onChangeIndex:function(e){j("engagementSource",D[e].value)}})}),(null===_||void 0===_?void 0:_.engagementSource)===a.referralSystem&&(0,P.jsxs)(c.ZP,{gap:8,fillWidth:!0,children:[(0,P.jsx)(v.Z,{label:(0,u.t)("Referrer"),required:!0,children:(0,P.jsx)(f.ZP,{placeholder:(0,u.t)("Referrer"),type:"email",required:!0})}),(0,P.jsxs)(c.ZP,{fxDirection:"row",fillWidth:!0,gap:8,padding:"8px 0",children:[(0,P.jsx)(p.ZP,{variant:"defaultSmall",children:(0,u.t)("Clear referrer")}),(0,P.jsx)(p.ZP,{variant:"outlinedSmall",flex:1,children:(0,u.t)("Select referrer")})]})]})]})}))}},6606:function(e,n,i){i.d(n,{Z:function(){return M}});var o,t,l,r,a,d,u,s,c,v=i(168),f=i(9439),h=i(8095),m=i(3350),x=i(2928),p=i(2791),g=i(6492),Z=i(107),b=i(6681),j=i(1500),C=i(3329),S=(0,m.ZP)(b.ZP)(o||(o=(0,v.Z)(["\n  flex: 1;\n  width: 100%;\n  height: 100%;\n\n  padding: 0 6px;\n  font-size: 16px;\n  font-weight: 500;\n\n  text-align: center;\n\n  //border: 0;\n  //color: inherit;\n  //background: transparent;\n  //text-align: center;\n  //font-family: inherit;\n  //font-size: inherit;\n  //font-weight: inherit;\n"]))),y=function(e){var n=e.value,i=void 0===n?0:n,o=e.onChangeValue,t=e.width,l=e.height,r=void 0===l?"18px":l,a=e.disabled,d=e.className,u=e.autoFocus,s=(0,p.useState)(null!==i&&void 0!==i?i:0),c=(0,f.Z)(s,2),v=c[0],m=c[1],g=(0,p.useRef)(null),Z=function(e){return function(){var n;o?o(v+e>0?v+e:v):m((function(n){return n+e?n+e:n})),null===(n=g.current)||void 0===n||n.focus()}};return(0,p.useEffect)((function(){j.sr.isNum(i)&&i>0&&m(i)}),[i]),(0,C.jsxs)(h.ZP,{fxDirection:"row",gap:4,width:t,alignItems:"center",height:"min-content",children:[(0,C.jsx)(x.ZP,{variant:"onlyIcon",size:r,icon:"minus",onClick:Z(-1)}),(0,C.jsx)(S,{value:v,disabled:a,className:d,ref:g,onChange:function(e){var n=e.target.value;isNaN(Number(n))||(o?o(Number(n)):m(Number(n)))},onSubmit:function(e){e.preventDefault()},autoFocus:u}),(0,C.jsx)(x.ZP,{variant:"onlyIcon",size:r,icon:"plus",onClick:Z(1)})]})},P=i(4990),w=(0,m.ZP)(h.ZP)(t||(t=(0,v.Z)(["\n  position: relative;\n  //height: fit-content;\n  padding: 4px;\n\n  //height: min-content;\n\n  //border-bottom: 2px solid ",";\n  color: ",";\n  cursor: default;\n\n  border: 1px solid ",";\n  border-left: 3px solid ",";\n\n  transition: all ",";\n\n  &:hover {\n    border-color: ",";\n  }\n"])),(function(e){return e.theme.fieldBackgroundColor}),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.globals.timingFunctionMain}),(function(e){var n=e.disabled,i=e.theme;return!n&&i.accentColor.base})),I=(0,m.ZP)(h.ZP)(l||(l=(0,v.Z)(["\n  width: min-content;\n  @media screen and (min-width: 768px) {\n    width: max-content;\n    flex-direction: row;\n    gap: 8px;\n  }\n"]))),k=(0,m.ZP)(h.ZP)(r||(r=(0,v.Z)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));\n  //grid-template-rows: repeat(5, min-content);\n  //grid-template-areas:\n  //  'label label label label sku sku'\n  //  'price bonus discount bonus cashback total';\n  //'category category brand brand type type'\n  //'atr_1 atr_1  atr_2  atr_2 qty qty'\n  //'warehouse warehouse warehouse warehouse warehouse warehouse';\n\n  //max-width: 270px;\n  height: max-content;\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),D=(0,m.ZP)(k)(a||(a=(0,v.Z)(["\n  grid-template-columns: repeat(auto-fill, minmax(125px, 1fr));\n"]))),B=(0,m.ZP)(h.ZP)(d||(d=(0,v.Z)(["\n  //height: fit-content;\n\n  //width: 100%;\n  object-position: center;\n  object-fit: contain;\n  overflow: hidden;\n  width: 100%;\n  max-width: 125px;\n  //max-height: 100px;\n  //height: 100px;\n\n  //@media screen and (max-width: 480px) {\n  //  width: 100px;\n  //  margin: auto;\n  //}\n"]))),q=(0,m.ZP)(g.x)(u||(u=(0,v.Z)(["\n  color: ",";\n"])),(function(e){var n=e.theme;return"secondary"===e.colorType?n.globals.inputPlaceholderColor:n.fontColorSidebar})),W=(0,m.ZP)(x.ZP)(s||(s=(0,v.Z)(["\n  padding: 6px 10px;\n"]))),E=(0,m.ZP)(h.ZP)(c||(c=(0,v.Z)(["\n  //border-top: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor})),M=function(e){var n,i,o,t,l,r,a,d,u,s,c,v=e.slot,x=e.onEditPress,b=e.disabled,S=e.onSelectPress,M=e.onRemovePress,A=(e.onUpdate,e.editable),R=(0,p.useState)(v),z=(0,f.Z)(R,1)[0],F=(0,p.useMemo)((function(){var e,n,i,o,t,l,r,a,d,u,s,c,v,f,h,m,x,p,g,Z=[];null!==z&&void 0!==z&&null!==(e=z.product)&&void 0!==e&&null!==(n=e.images)&&void 0!==n&&n.length&&(Z=null===z||void 0===z||null===(v=z.product)||void 0===v?void 0:v.images);null!==z&&void 0!==z&&null!==(i=z.variation)&&void 0!==i&&null!==(o=i.offer)&&void 0!==o&&null!==(t=o.images)&&void 0!==t&&t.length&&(Z=null===z||void 0===z||null===(f=z.variation)||void 0===f||null===(h=f.offer)||void 0===h?void 0:h.images);null!==z&&void 0!==z&&null!==(l=z.inventory)&&void 0!==l&&null!==(r=l.offer)&&void 0!==r&&null!==(a=r.images)&&void 0!==a&&a.length&&(Z=null===z||void 0===z||null===(m=z.inventory)||void 0===m||null===(x=m.offer)||void 0===x?void 0:x.images);null!==z&&void 0!==z&&null!==(d=z.origin)&&void 0!==d&&null!==(u=d.offer)&&void 0!==u&&null!==(s=u.images)&&void 0!==s&&s.length&&(Z=null===z||void 0===z||null===(p=z.origin)||void 0===p||null===(g=p.offer)||void 0===g?void 0:g.images);return(null===(c=Z[0])||void 0===c?void 0:c.img_preview)||""}),[null===z||void 0===z||null===(n=z.product)||void 0===n?void 0:n.images,null===z||void 0===z||null===(i=z.variation)||void 0===i||null===(o=i.offer)||void 0===o?void 0:o.images,null===z||void 0===z||null===(t=z.origin)||void 0===t||null===(l=t.offer)||void 0===l?void 0:l.images,null===z||void 0===z||null===(r=z.inventory)||void 0===r||null===(a=r.offer)||void 0===a?void 0:a.images]),$=(0,p.useMemo)((function(){return _.map((function(e){var n=z&&e.name&&z[e.name],i=n&&"object"===typeof n&&"amount"in n?n.amount:n;return(0,C.jsxs)(h.ZP,{justifyContent:"flex-start",fillWidth:!0,padding:"4px",gap:4,children:[(0,C.jsx)(q,{colorType:"secondary",$size:10,children:e.label}),(0,C.jsx)(q,{$size:12,$align:"right",$weight:500,children:(0,j.__)(i||0)})]},e.name)}))}),[z]),V=(0,p.useMemo)((function(){var e,n;return null===v||void 0===v||null===(e=v.variation)||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.map((function(e){var n;return(0,C.jsxs)(h.ZP,{justifyContent:"flex-start",fillWidth:!0,padding:"4px",gap:4,children:[(0,C.jsx)(q,{colorType:"secondary",$size:10,children:null===e||void 0===e||null===(n=e.parent)||void 0===n?void 0:n.label}),(0,C.jsx)(g.x,{$size:12,$align:"right",$weight:500,children:null===e||void 0===e?void 0:e.label})]},null===e||void 0===e?void 0:e._id)}))}),[null===v||void 0===v||null===(d=v.variation)||void 0===d?void 0:d.properties]),T=(0,m.Fg)();return(0,C.jsx)(w,{disabled:b,children:(0,C.jsxs)(h.ZP,{fillWidth:!0,gap:8,fxDirection:"row",children:[(0,C.jsxs)(I,{style:{borderRight:"1px solid ".concat(T.modalBorderColor)},padding:"0 4px 0 0",children:[(0,C.jsx)(B,{justifyContent:"flex-start",children:(0,C.jsx)("img",{src:F,style:{objectFit:"cover",objectPosition:"center"},alt:"",width:"100%"})}),!b&&(0,C.jsxs)(h.ZP,{maxWidth:"125px",justifyContent:"space-between",children:[A&&(0,C.jsx)(P.Z,{label:(0,Z.t)("quantity"),style:{width:"100%",marginBottom:8},disabled:b,children:(0,C.jsx)(y,{value:null===z||void 0===z?void 0:z.quantity,disabled:b})}),(0,C.jsxs)(E,{children:[M&&(0,C.jsx)(W,{variant:"textExtraSmall",disabled:!M,onClick:M,children:(0,Z.t)("Delete")}),S&&(0,C.jsx)(W,{variant:"textExtraSmall",disabled:!S,onClick:S,children:(0,Z.t)("Select")}),x&&(0,C.jsx)(W,{variant:"textExtraSmall",disabled:!x,onClick:x,children:(0,Z.t)("Edit")})]})]})]}),(0,C.jsxs)(h.ZP,{flex:1,gap:2,children:[(0,C.jsx)(h.ZP,{fxDirection:"row",gap:8,fillWidth:!0,alignItems:"flex-start",children:(0,C.jsxs)(h.ZP,{fxDirection:"row",flexWrap:"wrap",gap:8,flex:1,alignItems:"center",padding:"4px 8px",children:[(0,C.jsx)(q,{style:{flex:1},children:null===v||void 0===v||null===(u=v.variation)||void 0===u?void 0:u.label}),(0,C.jsx)(q,{$size:12,colorType:"secondary",children:null===v||void 0===v||null===(s=v.variation)||void 0===s?void 0:s.sku}),(0,C.jsx)(q,{$size:12,colorType:"secondary",children:null===v||void 0===v||null===(c=v.product)||void 0===c?void 0:c.type})]})}),(0,C.jsx)(g.x,{$size:12,$weight:600,children:(0,Z.t)("Properties")}),(0,C.jsx)(D,{fillWidth:!0,alignItems:"flex-start",children:V}),(0,C.jsx)(g.x,{$size:12,$weight:600,children:(0,Z.t)("Summary")}),(0,C.jsx)(k,{fillWidth:!0,alignItems:"flex-start",justifyContent:"space-between",children:$})]})]})})},_=[{label:(0,Z.t)("Price"),name:"out"}]},1392:function(e,n,i){var o=i(3433),t=i(9439),l=i(2791),r=i(1500),a=i(8095),d=i(3855),u=i(6492),s=i(3329);n.Z=function(e){var n=e.options,i=e.onChangeIndex,c=e.currentIndex,v=e.currentOption,f=e.multiple,h=e.onChange,m=e.value,x=e.disabled,p=e.disabledCheck,g=e.renderLabel,Z=(0,l.useState)(0),b=(0,t.Z)(Z,2),j=b[0],C=b[1],S=(0,l.useState)([]),y=(0,t.Z)(S,2),P=y[0],w=y[1],I=(0,l.useCallback)((function(e){f?w((function(n){var i=P.includes(e)?n.filter((function(n){return n!==e})):[].concat((0,o.Z)(n),[e]);return h&&h(i),i})):(w([e]),h&&h([e]))}),[f,h,P]),k=(0,l.useCallback)((function(e){i?i(e):C(e)}),[i]),D=(0,l.useMemo)((function(){return null===n||void 0===n?void 0:n.map((function(e,n){var i=p?p(e,n):x;return(0,s.jsxs)(a.ZP,{fxDirection:"row",gap:8,padding:"2px 4px",alignItems:"center",style:{opacity:i?.7:1,pointerEvents:i?"none":"all"},onClick:function(){i||(k(n),(null===e||void 0===e?void 0:e._id)&&I(null===e||void 0===e?void 0:e._id))},children:[(0,s.jsx)(d.Z,{checked:(null===e||void 0===e?void 0:e._id)&&P.includes(null===e||void 0===e?void 0:e._id)||n===j,size:"22px",disabled:i}),g?g({option:e,index:n,checked:(null===e||void 0===e?void 0:e._id)&&P.includes(null===e||void 0===e?void 0:e._id)||n===j}):(0,s.jsx)(u.x,{children:null===e||void 0===e?void 0:e.label})]},"m-opt_".concat(e.value))}))}),[j,x,p,I,k,n,g,P]);return(0,l.useEffect)((function(){r.sr.isUnd(c)||C(c)}),[c]),(0,l.useEffect)((function(){f||r.sr.isUnd(v)||r.sr.isUnd(n)||C(n.findIndex((function(e){return(null===e||void 0===e?void 0:e.value)===(null===v||void 0===v?void 0:v.value)||(null===e||void 0===e?void 0:e._id)===(null===v||void 0===v?void 0:v._id)})))}),[v,f,n]),(0,l.useEffect)((function(){f&&!r.sr.isUnd(m)&&r.sr.isArray(m)&&w(m)}),[f,m]),(0,s.jsx)(a.ZP,{fillWidth:!0,gap:8,children:D})}},4662:function(e,n,i){var o,t,l,r=i(168),a=i(9439),d=i(3350),u=i(8095),s=i(2928),c=i(2791),v=i(1500),f=i(107),h=i(4805),m=i(3329),x=(0,d.ZP)(u.ZP)(o||(o=(0,r.Z)(["\n  //min-height: 44px;\n  // border-top: 1px solid ",";\n  // border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),p=(0,d.ZP)(s.ZP)(t||(t=(0,r.Z)(["\n  padding-top: 0;\n  padding-bottom: 0;\n\n  flex: 1;\n\n  min-width: min-content;\n  height: 100%;\n"]))),g=(0,d.ZP)(s.ZP)(l||(l=(0,r.Z)(["\n  min-width: 34px;\n  height: 100%;\n  // color: ",";\n  // fill: ",";\n  // background-color: ",";\n  @media screen and (min-width: 480px) {\n    flex: 1;\n  }\n"])),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.accentColor.light}));n.Z=function(e){var n=e.steps,i=e.currentIndex,o=void 0===i?0:i,t=e.onNextPress,l=e.onPrevPress,r=e.onCancelPress,d=e.onAcceptPress,u=e.canGoNext,s=void 0===u||u,Z=e.canAccept,b=e.canSubmit,j=e.cancelButton,C=void 0===j||j,S=e.submitButton,y=void 0!==S&&S,P=e.acceptButton,w=e.arrowButtons,I=void 0===w||w,k=e.isLoading,D=(0,h.useMediaQuery)({query:"(max-width: 768px)"}),B=(0,h.useMediaQuery)({query:"(max-width: 480px)"}),q=(0,c.useState)(o),W=(0,a.Z)(q,2),E=W[0],M=W[1],_=(0,c.useMemo)((function(){var e,i;return n&&n[E-1]?{label:null===(e=n[E-1])||void 0===e?void 0:e.label,value:null===(i=n[E-1])||void 0===i?void 0:i.value}:null}),[E,n]),A=(0,c.useMemo)((function(){var e,i;return n&&n[E+1]?{label:null===(e=n[E+1])||void 0===e?void 0:e.label,value:null===(i=n[E+1])||void 0===i?void 0:i.value}:null}),[E,n]),R=(0,c.useCallback)((function(){if(n)if(l){if(0===E)return void(r&&r());var e=E-1;l&&l({option:n[e],value:n[e].value,index:e})}else M((function(e){return 0===e?e:e-1}))}),[E,r,l,n]),z=(0,c.useCallback)((function(){if(n){if(t){var e=E+1;return e===n.length?d&&d():t({option:n[e],value:n[e].value,index:e})}M((function(e){return e+1===n.length?e+1:e}))}}),[E,d,t,n]);return(0,c.useEffect)((function(){v.sr.isNotUnd(o)&&M(o)}),[o]),(0,m.jsxs)(x,{fxDirection:"row",gap:8,fillWidth:!0,children:[C&&!D&&(0,m.jsx)(p,{variant:"defaultSmall",isLoading:k,onClick:r,children:(0,f.t)("Cancel")}),I&&(0,m.jsx)(g,{variant:B?"onlyIconFilled":"filledSmall",icon:"SmallArrowLeft",onClick:R,disabled:k||!_,children:null===_||void 0===_?void 0:_.label}),I&&(0,m.jsx)(g,{variant:B?"onlyIconFilled":"filledSmall",endIcon:"SmallArrowRight",onClick:z,disabled:k||!s||!A,children:null===A||void 0===A?void 0:A.label}),(y||P)&&(0,m.jsx)(p,{variant:"filledSmall",type:b&&y?"submit":"button",onClick:d,isLoading:k,disabled:b&&y?!b:!Z,children:(0,f.t)("Accept")})]})}},1251:function(e,n,i){i.d(n,{Qv:function(){return p},xB:function(){return g},ze:function(){return b}});var o,t,l,r=i(168),a=i(1413),d=i(4925),u=i(2928),s=i(8095),c=i(6492),v=i(3350),f=i(107),h=i(763),m=i(3329),x=["onClose","onBackPress","title","showSubmitButton","canSubmit","renderTitle"],p=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).error;return(0,m.jsx)("div",{children:"Error: ".concat(e)})},g=function(e){var n=e.onClose,i=e.onBackPress,o=e.title,t=e.showSubmitButton,l=e.canSubmit,r=e.renderTitle,v=(0,d.Z)(e,x);return(0,m.jsx)(Z,(0,a.Z)((0,a.Z)({padding:"4px 0"},v),{},{gap:8,children:(0,m.jsxs)(s.ZP,{fillWidth:!0,fxDirection:"row",justifyContent:"space-between",alignItems:"stretch",height:"32px",children:[i&&(0,m.jsx)(u.ZP,{variant:"textExtraSmall",icon:"SmallArrowLeft",iconSize:"22px",padding:"0",style:{minWidth:"max-content",minHeight:"100%"},onClick:i||n,children:(0,f.t)("Back")}),r||(0,m.jsx)(s.ZP,{justifyContent:"center",overflow:"hidden",children:(0,m.jsx)(c.x,{$weight:600,$size:14,style:{textTransform:"uppercase",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:o})}),t&&(0,m.jsx)(u.ZP,{variant:"textExtraSmall",gap:"6px",type:t?"submit":"button",padding:"0 6px",endIcon:"done",endIconSize:"22px",style:{minWidth:"max-content",minHeight:"100%"},disabled:!l,children:"Ok"}),n&&(0,m.jsx)(u.ZP,{variant:"onlyIconNoEffects",icon:"close",iconSize:"95%",size:"24px",padding:"0",onClick:n})]})}))},Z=(0,v.ZP)(s.ZP)(o||(o=(0,r.Z)(["\n  height: 32px;\n"]))),b=function(e){var n=e.submitButtonText,i=void 0===n?"\u041f\u0440\u0438\u0439\u043d\u044f\u0442\u0438":n,o=e.loading,t=e.extraFooter,l=e.canSubmit,r=e.onCreatePress,a=e.resetButtonShown,d=e.onAcceptPress,c=e.canAccept;return(0,m.jsxs)(j,{fillWidth:!0,children:[t,(0,m.jsxs)(s.ZP,{padding:"8px 8px",fxDirection:"row",gap:8,alignItems:"center",children:[a&&(0,m.jsx)(u.ZP,{variant:"onlyIcon",icon:"clear",size:"36px",iconSize:"80%",type:"reset"}),r&&(0,m.jsx)(u.ZP,{variant:"onlyIcon",icon:"plus",size:"36px",iconSize:"80%",onClick:r}),(0,m.jsx)(u.ZP,{variant:"filledMiddle",flex:1,type:(0,h.isUndefined)(l)?"button":"submit",style:{padding:"0 12px"},textTransform:"uppercase",fontWeight:600,endIcon:"SmallArrowRight",endIconSize:"24px",disabled:(0,h.isUndefined)(l)?!c:!l,isLoading:o,onClick:d,children:i})]})]})},j=(0,v.ZP)(s.ZP)(t||(t=(0,r.Z)([""])));v.ZP.form(l||(l=(0,r.Z)(["\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n  max-width: 480px;\n\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.modalBackgroundColor}))},1186:function(e,n,i){i.d(n,{f:function(){return t}});var o=i(107),t=[{top:{name:"".concat((0,o.t)("label"),"/").concat((0,o.t)("name")),getData:function(e){var n,i=null!==(n=e.label)&&void 0!==n?n:e.name;return i?Object.values(i).map((function(e){return null!==e&&void 0!==e?e:""})).join(" "):"---"}},bottom:{name:"\u0406\u041f\u041d/\u0404\u0414\u0420\u041f\u041e\u0423",getData:function(e){var n,i;return((null===(n=e.taxCode)||void 0===n?void 0:n.personal)||"---")+"/"+((null===(i=e.taxCode)||void 0===i?void 0:i.corp)||"---")}},width:"240px",action:"doubleDataWithAvatar"},{top:{name:"\u0422\u0438\u043f",getData:function(e){return null===e||void 0===e?void 0:e.type}},bottom:{name:"\u0421\u0442\u0430\u0442\u0443\u0441",path:"status"},width:"120px",action:"valueByPath"},{top:{name:"\u0415\u043c\u0435\u0439\u043b",path:"email",uppercase:!1},bottom:{name:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",path:"phone"},width:"170px",action:"contacts"},{top:{name:"\u041b\u043e\u043a\u0430\u0446\u0456\u044f"},width:"170px",action:"valueByPath"},{top:{name:"\u0422\u0435\u0433\u0438",path:"tags"},width:"200px",action:"tags"},{top:{name:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",path:"description"},width:"170px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateSimple"}]}}]);
//# sourceMappingURL=696.49b40ac4.chunk.js.map