"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[375,495],{5375:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z},useOrderTableConfigs:function(){return j}});var n,o=a(168),r=a(1413),i=a(9439),l=a(8589),d=a(8495),u=a(3350),c=a(2791),v=a(6931),s=a(7348),h=a(4897),m=a(2973),p=a(3665),f=a(3185),b=a(7689),g=a(387),P=a(6522),x=a(1819),w=a(7824),D=function(){var e=(0,p.f9)(),t=(0,b.s0)(),a=(0,x.xc)()[w.d.orders].getAll;return(0,c.useCallback)((function(n){var o=null===n||void 0===n?void 0:n.selectedRow,r=o?(0,g.Gg)(o):"";return[{icon:"refresh",onClick:function(){a({data:{refresh:!0},onLoading:n.onRefresh})}},{separator:!0},{name:"openOrderOverview",icon:"openInNew",disabled:!r,onClick:function(){r&&t(r)}},{name:"archiveOrder",icon:"archive",disabled:!r,onClick:function(){r&&window.confirm("\u0410\u0440\u0445\u0456\u0432\u0443\u0432\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u0435\u043d\u043d\u044f: ".concat(r))}},{name:"editOrder",icon:"edit",disabled:!r,onClick:function(){e.open({Modal:f.n.FormCreateOrder,props:{title:"Edit order"}})}},{name:"copyOrder",icon:"copy",disabled:!r,onClick:function(){e.open({Modal:f.n.FormCreateOrder,props:{title:"Copy order: ".concat(r)}})}},{separator:!0},{name:"createOrder",icon:"AddToList",type:"onlyIconFilled",onClick:function(){e.open({Modal:f.n.FormCreateOrdersGroup,props:{title:(0,P.t)("Create orders group")}})}},{name:"createOrder",icon:"plus",type:"onlyIconFilled",onClick:function(){e.open({Modal:f.n.FormCreateOrder,props:{title:(0,P.t)("Create order")}})}}]}),[a,e,t])},C=a(3306),y=a(9953),B=a(8095),k=a(6492),S=a(763),A=a(9541),W=a(2989),O=a(3329),L=(0,C.H1)(m.D),R=(0,u.ZP)(B.ZP)(n||(n=(0,o.Z)(["\n  ","\n"])),d.VU),Z=function(e){var t=j(),a=t.tableConfig,n=t.isLoading,o=(0,c.useState)({}),d=(0,i.Z)(o,1)[0],u=(0,c.useCallback)((function(e){var t,a,n,o;return(0,O.jsxs)(B.ZP,{justifyContent:"space-between",fillHeight:!0,fillWidth:!0,overflow:"hidden",padding:"2px 4px",gap:6,style:{cursor:"inherit"},children:[(0,O.jsx)(k.x,{$size:11,$weight:500,$textTransform:"none",children:null!==(t=null===e||void 0===e||null===(a=e.option)||void 0===a?void 0:a.label)&&void 0!==t?t:null}),(0,O.jsx)(k.x,{$size:10,$ellipsisMode:!0,children:null!==e&&void 0!==e&&null!==(n=e.option)&&void 0!==n&&n.value?d[null===e||void 0===e||null===(o=e.option)||void 0===o?void 0:o.value]:0})]})}),[d]);return(0,O.jsx)(v.default,{path:e.path,children:(0,O.jsxs)(R,{children:[(0,O.jsx)(y.Z,{style:{height:52},options:L,renderLabel:u,optionProps:{fitContentH:!1}}),(0,O.jsx)(B.ZP,{fillWidth:!0,flex:1,overflow:"hidden",children:(0,O.jsx)(l.ZP,(0,r.Z)((0,r.Z)({},a),{},{isLoading:n.orders}))})]})})},j=function(){var e=(0,A.J)({orders:{content:"Refreshing..."},refresh:{content:"Refreshing..."},order:{content:"Refreshing..."}}),t=e.onLoading,a=e.isLoading,n=(0,x.xc)()[w.d.orders].getAll,o=(0,s.xA)(),r=D(),l=(0,W.xj)(),d=(0,c.useState)(),u=(0,i.Z)(d,2),v=u[0],m=u[1],p=(0,c.useState)(),f=(0,i.Z)(p,2),b=f[0],g=f[1],P=(0,c.useMemo)((function(){return{tableData:o.orders,tableTitles:h.ni,sortParams:h.qo,searchParams:h.Qc,hasFilter:!1,hasSearch:!0,showFooter:!0,checkBoxes:!0,actionsCreator:r,onSubmitSearch:function(e){if(e.search){var a,o={},r=null===(a=e.param)||void 0===a?void 0:a.dataPath;l.push({query:{search:e.search,searchPath:r}}),r&&e.search&&(0,S.isString)(r)&&(0,C.P_)(r,e.search,o,{mutation:!0}),g(e),n({params:o,onLoading:t("orders")}).then()}else n({onLoading:t("orders")}).then()},onTableSortChange:function(e,a){m({param:e,order:a}),l.push({query:{sortPath:e.dataPath,sortOrder:a}}),n({params:{sortOrder:a,sortPath:e.dataPath},onLoading:t("orders")}).then()}}}),[r,n,t,l,o.orders]);return(0,c.useEffect)((function(){n({data:{refresh:!0},onLoading:t("orders")})}),[]),{tableConfig:P,isLoading:a,sortParams:v,searchParams:b}}},8495:function(e,t,a){a.d(t,{SI:function(){return u},VU:function(){return d}});var n,o,r,i=a(168),l=a(3350),d=(0,l.iv)(n||(n=(0,i.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),u=(0,l.iv)(o||(o=(0,i.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,l.iv)(r||(r=(0,i.Z)(["\n  outline: 1px solid tomato;\n"])))},4897:function(e,t,a){a.d(t,{SQ:function(){return u},E_:function(){return c},Dr:function(){return h},Cs:function(){return s},Y5:function(){return v},$4:function(){return m.$4},qo:function(){return m.qo},Qc:function(){return m.Qc},ni:function(){return m.ni},KS:function(){return m.KS}});var n=a(6522),o=a(3691),r=a(5481),i=a(3306),l=a(755),d=a(3299),u=((0,r.Gg)(o.Hb),(0,i.H1)(o.Hb)),c=[{label:"Preview",value:l.Q.img_preview,required:!0},{label:"1x",value:l.Q.img_1x},{label:"2x",value:l.Q.img_2x},{label:"Webp",value:l.Q.webp}],v=[{top:{name:(0,n.t)("label"),getData:function(e){return null===e||void 0===e?void 0:e.label}},getImgPreview:function(e){var t,a;return e.images?null===(t=e.images)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.img_preview:void 0},width:"270px",action:"dataWithAvatar"},{top:{name:(0,n.t)("sku"),getData:function(e){return null===e||void 0===e?void 0:e.sku}},bottom:{name:(0,n.t)("barCode"),getData:function(e){return null===e||void 0===e?void 0:e.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,n.t)("type"),path:"type"},width:"100px",action:"status"},{bottom:{name:(0,n.t)("status"),getData:function(e){return e.approved}},top:{name:(0,n.t)("Visibility"),getData:function(e){return e.visible?"visible":"hidden"}},width:"120px",action:"status"},{top:{name:(0,n.t)("Price OUT"),align:"end",getData:function(e){var t,a;return null!==(t=e.price)&&void 0!==t&&t.out?(0,d.pU)(null===(a=e.price)||void 0===a?void 0:a.out):"--.--"}},bottom:{name:(0,n.t)("Price IN"),align:"end",getData:function(e){var t,a;return null!==(t=e.price)&&void 0!==t&&t.in?(0,d.pU)(null===(a=e.price)||void 0===a?void 0:a.in):"--.--"}},width:"150px",action:"valueByPath"},{top:{name:(0,n.t)("Variation label"),getData:function(e){var t;return(null===(t=e.variation)||void 0===t?void 0:t.label)||"---"}},bottom:{name:(0,n.t)("SKU"),getData:function(e){var t;return(null===(t=e.variation)||void 0===t?void 0:t.sku)||"---"}},width:"190px",action:"valueByPath"},{top:{name:(0,n.t)("Warehouse"),getData:function(e){var t;return null===(t=e.warehouse)||void 0===t?void 0:t.label}},bottom:{name:(0,n.t)("Code"),getData:function(e){var t;return null===(t=e.warehouse)||void 0===t?void 0:t.code}},width:"150px",action:"valueByPath"},{top:{name:"\u0411\u0440\u0435\u043d\u0434",getData:function(e){var t;return null===(t=e.brand)||void 0===t?void 0:t.label}},bottom:{name:"\u0412\u0438\u0440\u043e\u0431\u043d\u0438\u043a",getData:function(e){var t;return null===(t=e.brand)||void 0===t?void 0:t.manufacturer}},width:"180px",action:"doubleDataWithAvatar"},{top:{name:"\u041e\u043d\u043e\u0432\u0438\u0432",getData:function(e){var t,a,n;return null!==(t=null===e||void 0===e||null===(a=e.editor)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.email)&&void 0!==t?t:"---"}},bottom:{name:"\u0410\u0432\u0442\u043e\u0440",getData:function(e){var t,a,n;return null!==(t=null===e||void 0===e||null===(a=e.author)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.email)&&void 0!==t?t:"---"}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},bottom:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},width:"150px",action:"dateDbl"}];var s=[{dataPath:"sku",label:"SKU"},{dataPath:"label",label:(0,n.t)("Label")},{dataPath:"barCode",label:(0,n.t)("Bar-code")},{dataPath:"approved",label:(0,n.t)("Status")},{dataPath:"price.out",label:(0,n.t)("Price")},{dataPath:"createdAt",label:(0,n.t)("Created at")},{dataPath:"updatedAt",label:(0,n.t)("Updated at")},{dataPath:"deletedAt",label:(0,n.t)("Deleted at")},{dataPath:"brand.label",label:(0,n.t)("Brand label")},{dataPath:"warehouse.code",label:(0,n.t)("Warehouse code")},{dataPath:"warehouse.label",label:(0,n.t)("Warehouse label")}],h=[{dataPath:"sku",label:"SKU"},{dataPath:"label",label:(0,n.t)("Label")},{dataPath:"barCode",label:(0,n.t)("Bar-code")},{dataPath:"warehouse.code",label:(0,n.t)("Warehouse code")},{dataPath:"warehouse.label",label:(0,n.t)("Warehouse label")},{dataPath:"brand.label",label:(0,n.t)("Brand label")}],m=(a(4683),a(2517))},2517:function(e,t,a){a.d(t,{$4:function(){return s},KS:function(){return h},Qc:function(){return m},ni:function(){return c},qo:function(){return p}});var n=a(3433),o=a(2973),r=a(6522),i=a(5481),l=a(6981),d=a(3299),u={top:{name:(0,r.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,r.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateDbl"},c=((0,i.Gg)(o.D),o.D.new,(0,r.t)(o.D.new),o.D.inWork,(0,r.t)(o.D.inWork),o.D.rejectedByCustomer,(0,r.t)(o.D.rejectedByCustomer),o.D.rejectedByManager,(0,r.t)(o.D.rejectedByManager),o.D.active,(0,r.t)(o.D.active),o.D.fulfilled,(0,r.t)(o.D.fulfilled),o.D.fulfilledWithRefund,(0,r.t)(o.D.fulfilledWithRefund),o.D.archived,(0,r.t)(o.D.archived),o.D.expired,(0,r.t)(o.D.expired),[{top:{name:"".concat((0,r.t)("Status")),getData:function(e){return e.status}},bottom:{name:(0,r.t)("Priority"),getData:function(e){return(0,r.t)("undefined")}},width:"150px",action:"status"},{top:{name:(0,r.t)("Total amount"),align:"end",getData:function(e){var t,a;return(0,d.pU)(null!==(t=null===(a=e.summary)||void 0===a?void 0:a.netto)&&void 0!==t?t:0)}},bottom:{name:(0,r.t)("Slots count"),align:"end",getData:function(e){var t,a;return(null===(t=e.slots)||void 0===t?void 0:t.length)||(null===(a=e.summary)||void 0===a?void 0:a.slotsCount)}},width:"120px",action:"numberWithSpaces"},{top:{name:(0,r.t)("Reference / Internal"),getData:function(e){var t;return null===e||void 0===e||null===(t=e.reference)||void 0===t?void 0:t.internal}},bottom:{name:(0,r.t)("Reference / External"),getData:function(e){var t;return null===e||void 0===e||null===(t=e.reference)||void 0===t?void 0:t.external}},width:"190px",action:"valueByPath"},{top:{name:(0,r.t)("Group"),getData:function(e){var t,a;return null===e||void 0===e||null===(t=e.group)||void 0===t||null===(a=t.reference)||void 0===a?void 0:a.internal}},bottom:{name:(0,r.t)("Strategy"),getData:function(e){var t;return null===e||void 0===e||null===(t=e.group)||void 0===t?void 0:t.strategy}},width:"180px",action:"valueByPath"},{top:{name:(0,r.t)("Customer"),getData:function(e){var t,a,n,o,r,i,l;return(null===(t=e.customer)||void 0===t?void 0:t.name)&&(null===(a=e.customer)||void 0===a||null===(n=a.name)||void 0===n?void 0:n.first)+" "+(null===(o=e.customer)||void 0===o||null===(r=o.name)||void 0===r?void 0:r.second)||(null===(i=e.customer)||void 0===i?void 0:i.label)&&(null===(l=e.customer)||void 0===l?void 0:l.label.base)||"--- ---"}},bottom:{name:(0,r.t)("Phone"),path:"customer.phone"},width:"180px",action:"valueByPath"},{top:{name:(0,r.t)("Receiver"),getData:function(e){var t,a,n,o,r,i,l;return(null===(t=e.receiver)||void 0===t?void 0:t.name)&&(null===(a=e.receiver)||void 0===a||null===(n=a.name)||void 0===n?void 0:n.first)+" "+(null===(o=e.receiver)||void 0===o||null===(r=o.name)||void 0===r?void 0:r.second)||(null===(i=e.receiver)||void 0===i?void 0:i.label)&&(null===(l=e.receiver)||void 0===l?void 0:l.label.base)||"--- ---"}},bottom:{name:(0,r.t)("Phone"),path:"receiver.phone"},width:"180px",action:"valueByPath"},{top:{name:(0,r.t)("Invoices")},width:"200px",action:"tags"},{top:{name:(0,r.t)("Payments")},width:"200px",action:"valueByPath"},{top:{name:(0,r.t)("Deliveries")},width:"200px",action:"valueByPath"},{top:{name:(0,r.t)("comment"),path:"comment"},width:"170px",action:"valueByPath"},{top:{name:(0,r.t)("Refunds")},width:"200px",action:"valueByPath"},{top:{name:(0,r.t)("Manager"),path:"manager.name"},bottom:{name:(0,r.t)("email"),path:"manager.email"},width:"180px",action:"valueByPath"},u]),v=["cashback","bonus","discount"];var s=[{top:{name:(0,r.t)("Offer label"),getData:function(e){var t;return null===(t=e.offer)||void 0===t?void 0:t.label}},bottom:{name:(0,r.t)("Variation label"),getData:function(e){var t;return null===(t=e.variation)||void 0===t?void 0:t.label}},action:"valueByPath",width:"210px"},{top:{name:(0,r.t)("Total amount"),getData:function(e){return e.netto}},bottom:{name:(0,r.t)("Total q-ty"),getData:function(e){return e.quantity}},action:"valueByPath",width:"125px"}].concat((0,n.Z)((0,l.yL)()),(0,n.Z)(v.map((function(e){return{top:{name:(0,r.t)(e),align:"end",getData:function(t){var a;return(0,d.pU)(null===t||void 0===t||null===(a=t[e])||void 0===a?void 0:a.amount)}},bottom:{name:(0,r.t)(e),align:"end",getData:function(t){var a;return(0,d.pU)(null===t||void 0===t||null===(a=t[e])||void 0===a?void 0:a.percentage)}},action:"valueByPath",width:"90px"}}))),[{top:{name:(0,r.t)("Offer sku"),getData:function(e){var t;return null===(t=e.offer)||void 0===t?void 0:t.sku}},bottom:{name:(0,r.t)("Variation sku"),getData:function(e){var t;return null===(t=e.variation)||void 0===t?void 0:t.sku}},action:"valueByPath",width:"150px"},{top:{name:(0,r.t)("Offer bar-code"),getData:function(e){var t;return null===(t=e.offer)||void 0===t?void 0:t.barCode}},bottom:{name:(0,r.t)("Variation bar-code"),getData:function(e){var t;return null===(t=e.variation)||void 0===t?void 0:t.barCode}},action:"valueByPath",width:"150px"},u]),h=s,m=[{dataPath:"reference.internal",label:(0,r.t)("Reference / Internal")},{dataPath:"reference.external",label:(0,r.t)("Reference / External")},{dataPath:"group.reference.internal",label:(0,r.t)("Reference / Internal")+" / ".concat((0,r.t)("Group").toLowerCase())},{dataPath:"group.reference.external",label:(0,r.t)("Reference / External")+" / ".concat((0,r.t)("Group").toLowerCase())},{dataPath:"barCode",label:(0,r.t)("Bar-code")},{dataPath:"status",label:(0,r.t)("Status")},{dataPath:"manager.email",label:(0,r.t)("Manager email")},{dataPath:"manager.code",label:(0,r.t)("Manager code")},{dataPath:"managers.email",label:(0,r.t)("Any managers email")},{dataPath:"managers.code",label:(0,r.t)("Any managers code")},{dataPath:"customer.email",label:(0,r.t)("Customer email")},{dataPath:"customer.phone",label:(0,r.t)("Customer phone")},{dataPath:"customer.name.first",label:(0,r.t)("Customer first name")},{dataPath:"customer.name.second",label:(0,r.t)("Customer second name")},{dataPath:"customer.reference",label:(0,r.t)("Customer reference")},{dataPath:"receiver.email",label:(0,r.t)("Customer email")},{dataPath:"receiver.phone",label:(0,r.t)("Customer phone")},{dataPath:"receiver.name.first",label:(0,r.t)("Customer first name")},{dataPath:"receiver.name.second",label:(0,r.t)("Customer second name")},{dataPath:"receiver.reference",label:(0,r.t)("Customer reference")},{dataPath:"warehouse.code",label:(0,r.t)("Warehouse code")},{dataPath:"warehouse.label",label:(0,r.t)("Warehouse label")},{dataPath:"createdAt",label:(0,r.t)("Created at")},{dataPath:"updatedAt",label:(0,r.t)("Updated at")},{dataPath:"deletedAt",label:(0,r.t)("Deleted at")}],p=[{dataPath:"reference.internal",label:(0,r.t)("Reference / Internal")},{dataPath:"reference.external",label:(0,r.t)("Reference / External")},{dataPath:"barCode",label:(0,r.t)("Bar-code")},{dataPath:"warehouse.code",label:(0,r.t)("Warehouse code")},{dataPath:"warehouse.label",label:(0,r.t)("Warehouse label")},{dataPath:"manager.email",label:(0,r.t)("Manager email")},{dataPath:"manager.code",label:(0,r.t)("Manager code")},{dataPath:"managers.email",label:(0,r.t)("Any managers email")},{dataPath:"managers.code",label:(0,r.t)("Any managers code")}]},755:function(e,t,a){a.d(t,{Q:function(){return n}});var n=function(e){return e.img_preview="img_preview",e.img_1x="img_1x",e.img_2x="img_2x",e.webp="webp",e}({})}}]);
//# sourceMappingURL=375.41842f44.chunk.js.map