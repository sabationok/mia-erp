"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[427],{3427:function(e,r,n){n.r(r);var l=n(1413),o=n(9439),t=n(4925),a=n(2791),s=n(5611),i=n(4990),d=n(6681),u=n(1819),c=n(9964),p=n(3544),x=n(2989),m=n(3423),h=n(457),Z=n(867),b=n(8105),j=n(7824),f=n(7049),v=n(1383),S=n(5843),C=n(8095),y=n(8050),T=n(8582),g=n(3329),E=["defaultState","id","title","onClose"],P=["businessSubjectType","type"],G=function(e){var r,n,o=(0,S.SF)(),t=o.register,a=o.formState.errors;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.Z,{label:(0,p.t)("Label"),error:null===(r=a.label)||void 0===r?void 0:r.base,required:!0,children:(0,g.jsx)(d.ZP,(0,l.Z)((0,l.Z)({placeholder:(0,p.t)("insertLabel")},t("label.base")),{},{required:!0,autoFocus:!0}))}),(0,g.jsx)(i.Z,{label:(0,p.t)("Print label"),error:null===(n=a.label)||void 0===n?void 0:n.print,children:(0,g.jsx)(d.ZP,(0,l.Z)({placeholder:(0,p.t)("Enter print label")},t("label.print")))})]})},q=function(e){var r,n,o,t=(0,S.SF)(),a=t.register,s=t.formState.errors;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.Z,{label:(0,p.t)("name"),error:null===(r=s.name)||void 0===r?void 0:r.first,required:!0,children:(0,g.jsx)(d.ZP,(0,l.Z)((0,l.Z)({placeholder:(0,p.t)("Insert first name")},a("name.first")),{},{required:!0,autoFocus:e.autoFocus}))}),(0,g.jsx)(i.Z,{label:(0,p.t)("secondName"),error:null===s||void 0===s||null===(n=s.name)||void 0===n?void 0:n.second,children:(0,g.jsx)(d.ZP,(0,l.Z)({placeholder:(0,p.t)("insertSecondName")},a("name.second")))}),(0,g.jsx)(i.Z,{label:(0,p.t)("Middle name"),error:null===s||void 0===s||null===(o=s.name)||void 0===o?void 0:o.middle,children:(0,g.jsx)(d.ZP,(0,l.Z)({placeholder:(0,p.t)("Insert middle name")},a("name.middle")))})]})};r.default=function(e){var r=e.defaultState,n=(e.id,e.title),w=e.onClose,F=(0,t.Z)(e,E),k=(0,u.xc)()[j.d.permissions],I=(0,a.useState)(!1),L=(0,o.Z)(I,2),N=L[0],V=L[1],M=(0,x.hN)({defaultValues:(0,l.Z)({businessSubjectType:s.GE.company},r),reValidateMode:"onBlur",shouldUnregister:!0}),O=M.register,_=M.unregister,H=M.formState.errors,U=M.handleSubmit,W=M.formValues,A=W.businessSubjectType,B=W.type,J=(0,t.Z)(W,P),R=M.registerSelect,Y=M.setValue,z=(0,a.useMemo)((function(){return{renderOwnershipTypeSelect:A===s.GE.company,renderLabelInput:A&&[s.GE.company,s.GE.entrepreneur].includes(A),renderNamesInputs:A&&[s.GE.person,s.GE.entrepreneur].includes(A),renderPersonalTaxCode:A&&[s.GE.person,s.GE.entrepreneur].includes(A),renderTaxCode:A&&[s.GE.company,s.GE.entrepreneur].includes(A),renderAttractionSourceSelect:B===Z.I.CUSTOMER}}),[B,A]);return(0,g.jsxs)(y.Z,{onClose:w,fillHeight:!0,width:"480px",title:n,children:[(0,g.jsx)(C._0,(0,l.Z)((0,l.Z)({fillHeight:!0},F),{},{onSubmit:U((function(e){console.log({formValues:J}),k.createCompany({data:(0,f.vg)(e),onSuccess:function(e){console.log("Company created",e),v.kl.success("Company created: ".concat((null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label))),w&&w()},onError:function(){v.kl.error("Error")},onLoading:V}).then()}),(function(e){console.error("[Form Create Company]",e)})),children:(0,g.jsx)(S.Tu,{value:M,children:(0,g.jsxs)(b.C,{flex:1,fillWidth:!0,padding:"8px 4px",overflow:"auto",children:[(0,g.jsx)(i.Z,{label:(0,p.t)("businessSubjectType"),error:H.businessSubjectType,required:!0,children:(0,g.jsx)(c.Z,{options:h.Wk,currentOption:{value:A},onSelect:function(e){var r=e.value;Y("businessSubjectType",r),r!==s.GE.company&&_("ownershipType")}})}),z.renderNamesInputs&&(0,g.jsx)(q,{}),z.renderLabelInput&&(0,g.jsx)(G,{}),(0,g.jsx)(i.Z,{label:"\u0415\u043c\u0435\u0439\u043b (\u043e\u0441\u043d\u043e\u0432\u043d\u0438\u0439)",error:H.email,required:!0,children:(0,g.jsx)(d.ZP,(0,l.Z)((0,l.Z)({placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043e\u0441\u043d\u043e\u0432\u043d\u0438\u0439 \u0435\u043c\u0435\u0439\u043b"},O("email")),{},{type:"email",required:!0}))}),(0,g.jsx)(i.Z,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d (\u043e\u0441\u043d\u043e\u0432\u043d\u0438\u0439)",error:H.phone,required:!0,children:(0,g.jsx)(d.ZP,(0,l.Z)({placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043e\u0441\u043d\u0438\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0438\u0439 \u043d\u043e\u043c\u0435\u0440"},O("phone")))}),z.renderOwnershipTypeSelect&&(0,g.jsx)(m.Z,(0,l.Z)({},R("ownershipType",{options:h.YJ,label:"\u0424\u043e\u0440\u043c\u0430 \u0432\u043b\u0430\u0441\u043d\u043e\u0441\u0442\u0456",placeholder:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0444\u043e\u0440\u043c\u0443 \u0432\u043b\u0430\u0441\u043d\u043e\u0441\u0442\u0456 \u043a\u043e\u043c\u043f\u0430\u043d\u0456\u0457"}))),z.renderTaxCode&&(0,g.jsx)(i.Z,{label:(0,p.t)("taxCode"),error:H.taxCode,children:(0,g.jsx)(d.ZP,(0,l.Z)({placeholder:(0,p.t)("taxCode")},O("taxCode")))}),z.renderPersonalTaxCode&&(0,g.jsx)(i.Z,{label:(0,p.t)("personalTaxCode"),error:H.taxCode,children:(0,g.jsx)(d.ZP,(0,l.Z)({placeholder:(0,p.t)("personalTaxCode")},O("personalTaxCode")))})]})})})),(0,g.jsx)(T.Z,{canSubmit:!0,isLoading:N})]})}}}]);
//# sourceMappingURL=427.9d0b7426.chunk.js.map