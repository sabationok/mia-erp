"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[548,495],{2483:function(n,e,i){i.d(e,{j:function(){return f}});var t,o,r=i(168),l=i(1413),d=i(4781),a=i(2791),u=i(3350),s=i(8095),c=i(3329),v=(0,a.createContext)({}),f=function(n){var e=(0,d.on)(),i=(0,a.useCallback)((function(n){return function(i){i.target===i.currentTarget&&e.remove(n)}}),[e]),t=(0,a.useMemo)((function(){return e.getStack().map((function(n,t){var o=n.RenderComponent,r=n.props,d=n.id;return(0,c.jsx)(x,{className:"overlay-".concat(d),style:{zIndex:20+t},fillHeight:!0,fillWidth:!0,alignItems:"flex-end",onClick:i(d),children:(0,c.jsx)(v.Provider,{value:{onClose:function(){e.remove(d)},compId:d,index:t},children:(0,c.jsx)(o,(0,l.Z)((0,l.Z)({},r),{},{onClose:function(){e.remove(d)},compId:d,index:t}),"overlay-".concat(d))})},"overlay-".concat(d))}))}),[i,e]);return(0,c.jsx)(p,{fillWidth:!0,fillHeight:!0,isActive:t.length>0,overflow:"hidden",children:t})},p=(0,u.ZP)(s.ZP)(t||(t=(0,r.Z)(["\n  position: absolute;\n\n  top: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 200;\n\n  left: ",";\n\n  opacity: ",";\n  visibility: ",";\n  pointer-events: ",";\n\n  background-color: ",";\n\n  transition: all ",";\n"])),(function(n){return n.isActive?0:"100%"}),(function(n){return n.isActive?1:0}),(function(n){return n.isActive?"visible":"hidden"}),(function(n){return n.isActive?"all":"none"}),(function(n){return n.theme.backdropColorDark}),(function(n){return n.theme.globals.timingFunctionMain})),x=(0,u.ZP)(s.ZP)(o||(o=(0,r.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 20;\n\n  max-width: 360px;\n\n  height: 100%;\n\n  animation: TransformFromRight;\n\n  @media screen and (max-width: 768px) {\n    max-width: 400px;\n  }\n"])))},4781:function(n,e,i){i.d(e,{on:function(){return s}});var t=i(1413),o=i(3433),r=i(9439),l=i(2791),d=i(6382),a=i(3329),u=(0,l.createContext)({}),s=function(){return(0,l.useContext)(u)};e.ZP=function(n){var e=n.children,i=(0,l.useState)([]),s=(0,r.Z)(i,2),c=s[0],v=s[1],f=(0,l.useCallback)((function(n){v((function(e){return e.filter((function(e){return e.id!==n}))}))}),[]),p=(0,l.useCallback)((function(){v([])}),[]),x=(0,l.useCallback)((function(n){var e="".concat(n.RenderComponent.name,"_").concat((0,d.x0)(8));return"function"===typeof n.RenderComponent&&v((function(i){var r=i.find((function(e){return e.id.includes(n.RenderComponent.name)}));if(r){var l=i.filter((function(n){var e,i;return(null===(e=n.RenderComponent)||void 0===e?void 0:e.name)!==(null===(i=r.RenderComponent)||void 0===i?void 0:i.name)}));return[].concat((0,o.Z)(l),[(0,t.Z)((0,t.Z)({},n),{},{id:e})])}return[].concat((0,o.Z)(i),[(0,t.Z)((0,t.Z)({},n),{},{id:e})])})),{onClose:function(){return f(e)},compId:e}}),[f]),h={getStack:function(){return c},remove:f,clearStack:p,open:x,create:function(n,e){return x({RenderComponent:n,props:e})}};return(0,a.jsx)(u.Provider,{value:h,children:e})}},6548:function(n,e,i){i.r(e),i.d(e,{default:function(){return qn}});var t,o=i(168),r=i(9439),l=i(2791),d=i(3350),a=i(8495),u=i(6146),s=i(2989),c=i(4781),v=i(8095),f=i(7348),p=i(1819),x=i(2483),h=i(1251),m=i(2928),g=i(3544),b=i(1500),Z=i(9953),j=i(4925),C=i(6744),y=i(6753),P=i(4240),w=i(6492),I=i(3329),S=function(n){var e=n.cell,i=n.data,t=(0,l.useMemo)((function(){var n,e,t,o,r,l=null===i||void 0===i?void 0:i.customer;return[{label:(0,g.t)("First name"),value:null===l||void 0===l||null===(n=l.name)||void 0===n?void 0:n.first,visible:"company"!==(null===l||void 0===l?void 0:l.businessType)},{label:(0,g.t)("Second name"),value:null===l||void 0===l||null===(e=l.name)||void 0===e?void 0:e.second,visible:"company"!==(null===l||void 0===l?void 0:l.businessType)},{label:(0,g.t)("Middle name"),value:null===l||void 0===l||null===(t=l.name)||void 0===t?void 0:t.middle,visible:"company"!==(null===l||void 0===l?void 0:l.businessType)},{label:(0,g.t)("Base label"),value:null===l||void 0===l||null===(o=l.name)||void 0===o?void 0:o.first,visible:"person"!==(null===l||void 0===l?void 0:l.businessType)},{label:(0,g.t)("Print"),value:null===l||void 0===l||null===(r=l.name)||void 0===r?void 0:r.second,visible:"person"!==(null===l||void 0===l?void 0:l.businessType)},{label:(0,g.t)("Email"),value:null===l||void 0===l?void 0:l.email,visible:!0},{label:(0,g.t)("Phone"),value:null===l||void 0===l?void 0:l.phone,visible:!0},{label:(0,g.t)("Business type"),value:null===l||void 0===l?void 0:l.businessType,visible:!0},{label:(0,g.t)("Sex type"),value:null===l||void 0===l?void 0:l.sexType,visible:!0},{label:(0,g.t)("Engagement type"),value:null===l||void 0===l?void 0:l.engagementSource,visible:!0},{label:(0,g.t)("Age"),value:null===l||void 0===l?void 0:l.age,visible:!0},{label:(0,g.t)("Tags"),value:null,visible:!0}].map((function(n){var e;return n.visible&&(0,I.jsxs)(v.ZP,{fxDirection:"row",padding:"6px",gap:8,alignItems:"center",justifyContent:"space-between",children:[(0,I.jsx)(w.x,{$size:11,children:null===n||void 0===n?void 0:n.label}),(0,I.jsx)(w.x,{$size:13,$weight:500,children:null!==(e=null===n||void 0===n?void 0:n.value)&&void 0!==e?e:(0,g.t)("undefined")})]},n.label)}))}),[null===i||void 0===i?void 0:i.customer]);return(0,I.jsxs)(y.b.Cell,{children:[(null===e||void 0===e?void 0:e.title)&&(0,I.jsx)(P.z,{title:null===e||void 0===e?void 0:e.title}),t]})},k=["CellComponent"],T=function(n){return n.General="General",n.Customer="Customer",n.Invoicing="Invoicing",n.Delivery="Delivery",n.Additional="Additional",n}(T||{}),z=(0,b.Dl)(T),B=(0,d.ZP)(v.ZP)(t||(t=(0,o.Z)([""]))),_=function(n){var e=(0,c.on)(),i=(0,f.xA)().currentOrder,t=(0,l.useState)(T.General),o=(0,r.Z)(t,2),d=o[0],a=o[1],u=function(){var n={};return D.forEach((function(e){var i,t=e.tab;t&&(n[t]?null===(i=n[t])||void 0===i||i.push(e):n[t]=[e])})),n}(),s=(0,l.useMemo)((function(){var n;return u[d]?null===(n=u[d])||void 0===n?void 0:n.map((function(n){var t=n.CellComponent,o=(0,j.Z)(n,k);return t?(0,I.jsx)(t,{overlayHandler:e.open,cell:o,data:i},o.title):(0,I.jsx)(C.U,{overlayHandler:e.open,cell:o,data:i},o.title)})):null}),[u,d,e.open,i]);return(0,I.jsxs)(B,{fillWidth:!0,flex:1,overflow:"auto",children:[(0,I.jsx)(Z.Z,{optionProps:{fitContentH:!0},options:z,onOptSelect:function(n){(null===n||void 0===n?void 0:n.value)&&a(null===n||void 0===n?void 0:n.value)}}),(0,I.jsx)(v.ZP,{overflow:"hidden",children:(0,I.jsx)(v.ZP,{overflow:"auto",children:s})})]})},D=[{title:(0,g.t)("Manager"),getValue:function(n){var e,i;return null===n||void 0===n||null===(e=n.manager)||void 0===e||null===(i=e.user)||void 0===i?void 0:i.email},tab:T.General},{title:(0,g.t)("Reference"),getValue:function(n){var e;return null===n||void 0===n||null===(e=n.reference)||void 0===e?void 0:e.internal},tab:T.General},{title:(0,g.t)("Group reference"),getValue:function(n){var e,i;return null===n||void 0===n||null===(e=n.group)||void 0===e||null===(i=e.reference)||void 0===i?void 0:i.internal},tab:T.General},{title:(0,g.t)("Group strategy"),getValue:function(n){var e;return null===n||void 0===n||null===(e=n.group)||void 0===e?void 0:e.strategy},tab:T.General},{title:(0,g.t)("Totals"),CellComponent:function(n){var e,i,t=n.data,o=n.cell,r=(0,l.useMemo)((function(){var n,e;return[{label:(0,g.t)("Amount"),value:(0,b.__)(null===t||void 0===t||null===(n=t.total)||void 0===n?void 0:n.amount)},{label:(0,g.t)("Items count"),value:null===t||void 0===t||null===(e=t.total)||void 0===e?void 0:e.items}].map((function(n){return(0,I.jsxs)(v.ZP,{fxDirection:"row",padding:"6px",justifyContent:"space-between",fillWidth:!0,gap:8,children:[(0,I.jsx)(w.x,{$size:11,children:n.label}),(0,I.jsx)(y.b.CellText,{$weight:600,children:null===n||void 0===n?void 0:n.value})]})}))}),[null===t||void 0===t||null===(e=t.total)||void 0===e?void 0:e.amount,null===t||void 0===t||null===(i=t.total)||void 0===i?void 0:i.items]);return(0,I.jsxs)(y.b.Cell,{children:[(0,I.jsx)(P.z,{title:o.title}),r]})},tab:T.General},{title:(0,g.t)("Status"),getValue:function(n){return null===n||void 0===n?void 0:n.status},tab:T.General},{CellComponent:S,tab:T.Customer},{title:(0,g.t)("Receiver"),CellComponent:S,tab:T.Delivery},{title:(0,g.t)("Invoicing"),CellComponent:function(n){n.cell;var e,i=n.data,t=(0,l.useMemo)((function(){var n;return[{label:(0,g.t)("Count"),value:null===i||void 0===i||null===(n=i.deliveries)||void 0===n?void 0:n.length}].map((function(n){var e;return(0,I.jsxs)(v.ZP,{fxDirection:"row",padding:"6px",gap:8,alignItems:"center",justifyContent:"space-between",children:[(0,I.jsx)(w.x,{$size:11,children:null===n||void 0===n?void 0:n.label}),(0,I.jsx)(w.x,{$size:13,$weight:500,children:null!==(e=null===n||void 0===n?void 0:n.value)&&void 0!==e?e:(0,g.t)("undefined")})]},n.label)}))}),[null===i||void 0===i||null===(e=i.deliveries)||void 0===e?void 0:e.length]);return(0,I.jsxs)(y.b.Cell,{children:[(0,I.jsx)(P.z,{title:(0,g.t)("General info")}),t]})},tab:T.Invoicing},{title:(0,g.t)("Delivery"),CellComponent:function(n){n.cell;var e,i=n.data,t=(0,l.useMemo)((function(){var n;return[{label:(0,g.t)("Count"),value:null===i||void 0===i||null===(n=i.deliveries)||void 0===n?void 0:n.length}].map((function(n){var e;return(0,I.jsxs)(v.ZP,{fxDirection:"row",padding:"6px",gap:8,alignItems:"center",justifyContent:"space-between",children:[(0,I.jsx)(w.x,{$size:11,children:null===n||void 0===n?void 0:n.label}),(0,I.jsx)(w.x,{$size:13,$weight:500,children:null!==(e=null===n||void 0===n?void 0:n.value)&&void 0!==e?e:(0,g.t)("undefined")})]},n.label)}))}),[null===i||void 0===i||null===(e=i.deliveries)||void 0===e?void 0:e.length]);return(0,I.jsxs)(y.b.Cell,{children:[(0,I.jsx)(P.z,{title:(0,g.t)("General info")}),t]})},tab:T.Delivery},{title:(0,g.t)("Additional"),tab:T.Additional}];var $,L,M,R,A,E,V,O,H,W,G=i(4165),F=i(5861),J=i(1413),q=i(51),U=i(1484),X=(0,l.createContext)({}),N=function(){return(0,l.useContext)(X)},Q=function(n){var e,i=n.children,t=(0,s.Zx)(),o=null===(e=(0,s.Zx)())||void 0===e?void 0:e.orderId,r=(0,f.xA)().currentOrder,d=(0,q.TL)(),a=(0,p.xc)()[p.EJ.orders],u=(0,l.useMemo)((function(){return(0,J.Z)((0,J.Z)({},r),{},{_origin:r,getSlots:function(){var n=(0,F.Z)((0,G.Z)().mark((function n(e){return(0,G.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",o?d((0,U.wV)((0,J.Z)((0,J.Z)({},e),{},{data:{params:{orderId:o}}}))):void 0);case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),getPayments:function(){var n=(0,F.Z)((0,G.Z)().mark((function n(e){return(0,G.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",o?d((0,U.JA)((0,J.Z)((0,J.Z)({},e),{},{data:{params:{orderId:o}}}))):void 0);case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),getInvoices:function(){var n=(0,F.Z)((0,G.Z)().mark((function n(e){return(0,G.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",o?d((0,U.qQ)((0,J.Z)((0,J.Z)({},e),{},{data:{params:{orderId:o}}}))):void 0);case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),getDeliveries:function(){var n=(0,F.Z)((0,G.Z)().mark((function n(e){return(0,G.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",o?d((0,U.vc)((0,J.Z)((0,J.Z)({},e),{},{data:{params:{orderId:o}}}))):void 0);case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})}),[r,d,o]);return(0,l.useEffect)((function(){(!r||o&&o!==r._id)&&t.orderId&&a.getById({data:{params:{_id:o}}})}),[r,o,t.orderId,a]),(0,I.jsx)(X.Provider,{value:null!==u&&void 0!==u?u:{},children:i})},Y=i(4942),K=i(289),nn=i(1617),en=l.forwardRef((function(n,e){n.permissionId;var i=n.onConnect,t=n.onConnectError,o=n.onJoin,r=n.onLeave,d=n.onTyping,a=n.chatId,u=(n.orderId,n.onSend),s=(0,q.TL)(),c=(0,l.useCallback)((function(){a&&nn.vl.handleJoin({data:{chatId:a}}),s((0,K.Oy)({type:K.Y.chat,status:!0}))}),[a,s]),v=(0,l.useCallback)((function(){s((0,K.Oy)({type:K.Y.chat,status:!1}))}),[s]);return(0,l.useEffect)((function(){var n=nn.vl.socketRef,e=null===n||void 0===n?void 0:n.connection;if(e){var l=[];return null!==e&&void 0!==e&&e.active?e.active&&c():null===n||void 0===n||n.connect(),l.push(null===n||void 0===n?void 0:n.onConnect((function(){i&&i(),c()}))),t&&l.push(n.onConnectError((function(n){t&&t(n),v()}))),d&&l.push(nn.vl.onTyping.onSuccess(d)),o&&l.push(nn.vl.onJoin.onSuccess(o)),r&&l.push(nn.vl.onLeave.onSuccess(r)),u&&l.push(nn.vl.onSend.onSuccess(u)),function(){l.forEach((function(n){return n()}))}}v()}),[a,s,c,v,i,t,o,r,u,d]),null})),tn=i(2434),on=i(9541),rn=i(7477),ln=i(7843),dn=i(763),an=i(9846),un=i(5952),sn=function(n){var e=n.msg,i=n.isRequest;return(0,I.jsxs)(cn,{padding:"8px",gap:12,maxWidth:"80%",alignSelf:i?"flex-end":"flex-start",$isRequest:i,children:[(0,I.jsx)(w.x,{$align:"left",$lineHeight:1.55,$weight:500,children:e.text}),(0,I.jsx)(w.x,{$align:i?"right":"left",$weight:500,$size:10,children:e.createdAt?(0,an.Z)(new Date(e.createdAt),"dd.MM.yy hh:mm",{locale:un.Z}):""})]},e._id)},cn=(0,d.zo)(v.ZP)($||($=(0,o.Z)(["\n  border-radius: 4px;\n  border: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor})),vn=i(1134),fn=i(4695),pn=i(6681),xn=i(1329),hn=xn.Xp.object().shape({text:xn.Xp.string().required(),chatId:xn.Xp.string().uuid().required()}),mn=function(n){var e=n.chatId,i=(n.onSubmit,(0,vn.cI)({defaultValues:{chatId:e},resolver:(0,fn.X)(hn),reValidateMode:"onSubmit"})),t=i.watch,o=i.resetField,r=i.register,d=i.setValue,a=i.handleSubmit,u=(0,l.useRef)(),s=(0,q.TL)(),c=t();return(0,l.useEffect)((function(){e&&d("chatId",e)}),[e,d]),(0,I.jsxs)(v._0,{padding:"8px 8px 16px",fxDirection:"row",gap:12,alignItems:"center",onSubmit:a((function(n){s((0,tn.ab)({data:{data:{data:n}},onSuccess:function(){o("text")}}))})),children:[(0,I.jsx)(pn.ZP,(0,J.Z)({$height:"100%"},r("text",{required:!0,onChange:function(){u.current||(u.current=!0,nn.vl.handleTyping({data:{status:!0,chatId:null!==e&&void 0!==e?e:""}}))},onBlur:function(){u.current=!1,nn.vl.handleTyping({data:{status:!1,chatId:null!==e&&void 0!==e?e:""}})}}))),(0,I.jsx)(m.ZP,{type:"submit",disabled:!c.text,variant:"filled",sizeType:"middle",children:"Send"})]})},gn=(0,d.ZP)(v.ZP)(L||(L=(0,o.Z)(["\n  flex-direction: column-reverse;\n  gap: 8px;\n  padding: 8px;\n\n  flex: 1;\n  overflow: auto;\n"]))),bn=function(n){var e=n.orderId,i=n.chatId,t=(0,f.hz)(),o=(0,q.TL)(),d=(0,s.Zx)().permissionId,a=(0,on.J)(),u=(0,l.useState)((function(){var n=i||(e?t.keysMap[e]:void 0);return n?t.dataMap[n]:void 0})),c=(0,r.Z)(u,2),p=c[0],x=c[1],h=(0,l.useState)({}),m=(0,r.Z)(h,2),g=m[0],b=m[1],Z=t.wsConnectionStatus,j=function(n){o((0,tn.Kz)({params:n,onLoading:a.onLoading("messages")}))},C=function(n){o((0,tn.fE)({params:n,onLoading:a.onLoading("chat"),onSuccess:function(n){var e=n.data;x(e),j({chatId:e._id})},onError:function(e){var i;(null===(i=e.response)||void 0===i?void 0:i.status)===rn.WE.NotFound&&n.orderId&&function(n){o((0,tn.h)({params:n,onLoading:a.onLoading("chat"),onSuccess:function(n){var e=n.data;x(e),j({chatId:e._id})}}))}({orderId:n.orderId})}}))},y=(0,l.useMemo)((function(){return Object.entries(g).map((function(n){var e=(0,r.Z)(n,2),i=e[0],t=e[1];return(0,I.jsx)(v.ZP,{$padding:"8px",children:(null===t||void 0===t?void 0:t.email)||(null===t||void 0===t?void 0:t.name)},i)}))}),[g]),P=(0,l.useMemo)((function(){var n=null===p||void 0===p?void 0:p._id;return n?t.messages.listsMap[n]:null}),[null===p||void 0===p?void 0:p._id,t.messages.listsMap]),w=(0,l.useMemo)((function(){return null===P||void 0===P?void 0:P.map((function(n){var e,i=!(null===(e=n.sender)||void 0===e||!e.user);return(0,I.jsx)(sn,{msg:n,isRequest:i},n._id)}))}),[P]);return(0,l.useEffect)((function(){if(i){var n=t.dataMap[i];n?(x(n),j({chatId:i})):C({_id:i})}else e&&C({orderId:e})}),[i,e]),(0,I.jsxs)(v.ZP,{overflow:"hidden",flex:1,children:[(0,I.jsx)(en,{chatId:null===p||void 0===p?void 0:p._id,onTyping:function(n){var e,i,t;n.data.member&&(n.data.status?function(n){b((function(e){return(0,J.Z)((0,J.Z)({},e),n)}))}((0,Y.Z)({},null===(e=n.data.member)||void 0===e?void 0:e._id,{email:"email"})):(t=null===(i=n.data.member)||void 0===i?void 0:i._id,b((function(n){return(0,dn.omit)(n,[t])}))))},onJoin:function(n){var e,i,t,o,r,l,a,u,s,c;(null===(e=n.data.member)||void 0===e?void 0:e._id)!==d&&ln.kl.info("".concat((null===(i=n.data)||void 0===i||null===(t=i.member)||void 0===t||null===(o=t.user)||void 0===o?void 0:o.email)||(null===(r=n.data)||void 0===r||null===(l=r.member)||void 0===l||null===(a=l.customer)||void 0===a?void 0:a.email)||(null===(u=n.data)||void 0===u||null===(s=u.member)||void 0===s||null===(c=s.integration)||void 0===c?void 0:c.label)," joined to chat"))},onLeave:function(n){var e,i,t,o,r,l,a,u,s,c;(null===(e=n.data.member)||void 0===e?void 0:e._id)!==d&&ln.kl.info("".concat((null===(i=n.data)||void 0===i||null===(t=i.member)||void 0===t||null===(o=t.user)||void 0===o?void 0:o.email)||(null===(r=n.data)||void 0===r||null===(l=r.member)||void 0===l||null===(a=l.customer)||void 0===a?void 0:a.email)||(null===(u=n.data)||void 0===u||null===(s=u.member)||void 0===s||null===(c=s.integration)||void 0===c?void 0:c.label)," leaved to chat"))},onSend:function(n){var e,i,t;if((null===(e=n.data)||void 0===e||null===(i=e.member)||void 0===i?void 0:i._id)!==d){var r=null===(t=n.data.chat)||void 0===t?void 0:t._id;r&&o((0,K.ue)({chatId:r,data:n.data}))}else console.log({permissionId:d,data:n})}}),(0,I.jsx)(gn,{children:w}),!(null===y||void 0===y||!y.length)&&(0,I.jsx)(v.ZP,{gap:12,padding:"8px 16px",children:y}),!Z&&(0,I.jsx)(v.ZP,{padding:"16px",children:"Is not connected"}),(0,I.jsx)(mn,{chatId:null===p||void 0===p?void 0:p._id})]})},Zn=function(n){var e=n.order;return(0,I.jsx)(bn,{orderId:null===e||void 0===e?void 0:e._id})},jn=function(n){return n.Info="Info",n.Chat="Chat",n.Statuses="Statuses",n.Tasks="Tasks",n}({}),Cn=(0,b.H1)(jn),yn=function(n){return(0,I.jsxs)(In,{fxDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"8px 0",children:[(0,I.jsx)(m.ZP,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"edit",disabled:!(null!==n&&void 0!==n&&n.onEdit),onClick:null===n||void 0===n?void 0:n.onEdit}),(0,I.jsx)(Sn,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:"delete",disabled:!(null!==n&&void 0!==n&&n.onDelete),onClick:null===n||void 0===n?void 0:n.onDelete}),(0,I.jsxs)(v.ZP,{fxDirection:"row",gap:6,margin:"0 0 0 auto",children:[(0,I.jsx)(m.ZP,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"refresh",isLoading:null===n||void 0===n?void 0:n.isRefresh,disabled:!(null!==n&&void 0!==n&&n.onRefresh),onClick:null===n||void 0===n?void 0:n.onRefresh}),(0,I.jsx)(kn,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"SmallArrowLeft",disabled:!(null!==n&&void 0!==n&&n.onOpenRightSide),onClick:null===n||void 0===n?void 0:n.onOpenRightSide})]})]})},Pn=(0,d.ZP)(v.ZP)(M||(M=(0,o.Z)(["\n  position: relative;\n  overflow: hidden;\n\n  background-color: ",";\n"])),(function(n){return n.theme.sideBarBackgroundColor})),wn=(0,d.ZP)(v.ZP)(R||(R=(0,o.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.sideBarBorderColor}),(function(n){return n.theme.sideBarBorderColor})),In=(0,d.ZP)(v.ZP)(A||(A=(0,o.Z)([""]))),Sn=(0,d.ZP)(m.ZP)(E||(E=(0,o.Z)(["\n  fill: ",";\n"])),(function(n){return n.theme.globals.colors.error})),kn=(0,d.ZP)(m.ZP)(V||(V=(0,o.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n"]))),Tn=function(n){var e=(0,l.useState)(0),i=(0,r.Z)(e,2),t=i[0],o=i[1],d=N(),a=(0,s.xj)(),u=(0,l.useMemo)((function(){return Cn[t].value===jn.Info?(0,I.jsx)(_,{order:d._origin}):Cn[t].value===jn.Chat?(0,I.jsx)(Zn,{order:d._origin}):null}),[d._origin,t]);return(0,I.jsxs)(Pn,{flex:1,fillWidth:!0,padding:"0 8px",children:[(0,I.jsx)(h.xB,{title:(0,g.t)("Order overview"),onBackPress:function(){a.goBack()}}),(0,I.jsxs)(wn,{flex:1,fillWidth:!0,overflow:"auto",children:[(0,I.jsx)(Z.Z,{options:Cn,optionProps:{fitContentH:!0},onOptSelect:function(n,e,i){return"number"===typeof i&&o(i)}}),(0,I.jsx)(v.ZP,{flex:1,overflow:"hidden",children:u}),![jn.Chat].includes(Cn[t].value)&&(0,I.jsx)(yn,{})]})]})},zn=(0,d.ZP)(v.ZP)(O||(O=(0,o.Z)(["\n  position: relative;\n\n  overflow: hidden;\n\n  border-right: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor})),Bn=function(n){var e=n.toggleRightSideVisibility,i=(0,f.xA)().currentOrder,t=(0,l.useState)(!1)[1],o=(0,p.xc)().orders;return(0,I.jsxs)(zn,{children:[(0,I.jsx)(Tn,{order:i,onRefresh:function(){(null===i||void 0===i?void 0:i._id)&&o.getById({data:{_id:null===i||void 0===i?void 0:i._id,options:{refreshCurrent:!0}},onLoading:t})},onOpenRightSide:e}),(0,I.jsx)(x.j,{})]})},_n=i(8839),Dn=i(4897),$n=i(3383),Ln=function(n){var e=(0,l.useState)(),i=(0,r.Z)(e,2),t=i[0],o=i[1],d=(0,on.J)(),a=N(),u=(0,l.useMemo)((function(){var n;return t?null===a||void 0===a||null===(n=a.slots)||void 0===n?void 0:n.filter((function(n){var e;return(null===(e=n.offer)||void 0===e?void 0:e.type)===t})):null===a||void 0===a?void 0:a.slots}),[null===a||void 0===a?void 0:a.slots,t]),s=(0,l.useMemo)((function(){return{actionsCreator:function(n){return[{icon:"refresh",name:"refresh",disabled:!a._id,onClick:function(){a.getSlots({onLoading:d.onLoading("refresh")})}}]}}}),[a,d]);return(0,l.useEffect)((function(){var n;null!==a&&void 0!==a&&null!==(n=a.slots)&&void 0!==n&&n.length||a.getSlots({onLoading:d.onLoading("refresh")})}),[]),(0,I.jsxs)(v.ZP,{fillWidth:!0,overflow:"hidden",flex:1,children:[(0,I.jsx)(v.ZP,{fillWidth:!0,children:(0,I.jsx)(Z.Z,{options:$n.LC,defaultValue:t,preventDefault:!0,onResetPress:function(){o(void 0)},onOptSelect:function(n,e){o(e)}})}),(0,I.jsx)(_n.ZP,(0,J.Z)((0,J.Z)({hasSearch:!1,hasFilter:!1},s),{},{tableData:u,isLoading:d.isLoading.refresh,tableTitles:Dn.$4}))]})},Mn=i(7946),Rn=function(n){var e=N(),i=(0,on.J)(),t=(0,l.useMemo)((function(){return{actionsCreator:function(n){return[{name:"refresh",icon:"refresh",disabled:!e._id,onClick:function(){e.getInvoices({})}}]}}}),[e]);return(0,l.useEffect)((function(){null!==e&&void 0!==e&&e._id&&e.getInvoices({onLoading:i.onLoading("refresh")})}),[]),(0,I.jsx)(_n.ZP,(0,J.Z)((0,J.Z)({},t),{},{hasSearch:!1,hasFilter:!1,isLoading:i.isLoading.refresh,tableData:null===e||void 0===e?void 0:e.invoices,tableTitles:Mn.x}))},An=function(){return(0,I.jsx)(_n.ZP,{hasSearch:!1,hasFilter:!1})},En=function(n){n.order;var e=N();return(0,l.useEffect)((function(){var n;null!==e&&void 0!==e&&null!==(n=e.deliveries)&&void 0!==n&&n.length||null===e||void 0===e||e.getDeliveries({})}),[e]),(0,I.jsx)(_n.ZP,{hasSearch:!1,hasFilter:!1,actionsCreator:function(){return[{title:"Refresh",icon:"refresh",onClick:function(){return e.getDeliveries({})}}]}})},Vn=i(7121),On=function(n){return n.Content="Content",n.Invoices="Invoices",n.Payments="Payments",n.Deliveries="Deliveries",n}(On||{}),Hn=(0,b.H1)(On),Wn=(0,d.ZP)(v.ZP)(H||(H=(0,o.Z)(["\n  overflow: auto;\n\n  max-width: 100%;\n\n  transition: ",";\n  background-color: ",";\n\n  @media screen and (min-width: 768px) {\n    min-width: 320px;\n  }\n\n  @media screen and (max-width: 768px) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 20;\n\n    transform: translateX(","%);\n\n    box-shadow: ",";\n  }\n"])),(function(n){return n.theme.globals.timingFunctionMain}),(function(n){return n.theme.backgroundColorLight}),(function(n){return n.isVisible?0:100}),(function(n){return n.isVisible?"0 12px 26px rgba(0, 0, 0, 0.25)":""})),Gn=function(n){var e,i,t=n.toggleVisibility,o=n.isVisible,d=(0,f.xA)().currentOrder,a=(0,l.useState)(On.Content),u=(0,r.Z)(a,2),s=u[0],c=u[1],p=(0,l.useMemo)((function(){return s===On.Content?(0,I.jsx)(Ln,{}):s===On.Invoices?(0,I.jsx)(Rn,{}):s===On.Payments?(0,I.jsx)(An,{}):s===On.Deliveries?(0,I.jsx)(En,{}):void 0}),[s]);return(0,I.jsxs)(Wn,{overflow:"hidden",fillHeight:!0,isVisible:o,children:[o&&(0,I.jsx)(Vn.OX,{title:null!==(e=null===d||void 0===d||null===(i=d.reference)||void 0===i?void 0:i.internal)&&void 0!==e?e:(0,g.t)("undefined"),onBackPress:t}),(0,I.jsx)(v.ZP,{children:(0,I.jsx)(Z.Z,{options:Hn,defaultValue:s,onOptSelect:function(n,e,i){e&&c(e)},preventDefault:!0})}),(0,I.jsx)(v.ZP,{overflow:"hidden",flex:1,children:p})]})},Fn=i(7824),Jn=d.ZP.div(W||(W=(0,o.Z)(["\n  display: grid;\n  grid-template-columns: minmax(220px, 1fr) 0;\n\n  ",";\n\n  //@media screen and (max-width: 768px) {\n  //}\n  @media screen and (min-width: 768px) {\n    grid-template-columns: minmax(360px, 1fr) 2fr;\n  }\n  @media screen and (min-width: 1000px) {\n    grid-template-columns: minmax(360px, 400px) 2fr;\n  }\n"])),a.VU),qn=function(n){var e=n.path,i=(0,p.xc)()[Fn.d.orders],t=(0,l.useState)(!1),o=(0,r.Z)(t,2),d=o[0],a=o[1],v=(0,s.Zx)().orderId,f=function(){a((function(n){return!n}))};return(0,l.useEffect)((function(){v&&i.getById({data:{_id:v,options:{refreshCurrent:!0}}})}),[v,i]),(0,I.jsx)(u.vI,{path:e,children:(0,I.jsx)(Q,{children:(0,I.jsx)(c.ZP,{children:(0,I.jsxs)(Jn,{children:[(0,I.jsx)(Bn,{toggleRightSideVisibility:f}),(0,I.jsx)(Gn,{toggleVisibility:f,isVisible:d})]})})})})}},8495:function(n,e,i){i.d(e,{SI:function(){return u},VU:function(){return a}});var t,o,r,l=i(168),d=i(3350),a=(0,d.iv)(t||(t=(0,l.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),u=(0,d.iv)(o||(o=(0,l.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,d.iv)(r||(r=(0,l.Z)(["\n  outline: 1px solid tomato;\n"])))},6753:function(n,e,i){i.d(e,{b:function(){return Z}});var t,o,r,l,d,a,u,s=i(168),c=i(3350),v=i(8095),f=i(6492),p=c.ZP.button(t||(t=(0,s.Z)(["\n  display: flex;\n  align-items: center;\n\n  border: 0;\n  background-color: transparent;\n\n  font-family: inherit;\n  font-weight: 600;\n  font-size: 13px;\n  padding: 6px 10px;\n  color: ",";\n\n  cursor: pointer;\n\n  &[disabled] {\n    pointer-events: none;\n    color: ",";\n  }\n"])),(function(n){return n.theme.accentColor.base}),(function(n){return n.theme.modalBorderColor})),x=(0,c.ZP)(v.ZP)(o||(o=(0,s.Z)(["\n  //min-height: 70px;\n  height: max-content;\n  min-height: max-content;\n\n  padding: 0 8px 8px;\n  gap: 4px;\n\n  //overflow: hidden;\n\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"])),(function(n){return n.theme.sideBarBorderColor})),h=(0,c.ZP)(v.ZP)(r||(r=(0,s.Z)(["\n  justify-content: center;\n  align-items: center;\n\n  padding: 4px 8px;\n  min-height: 28px;\n  color: #fcfcfc;\n\n  background-color: ",";\n\n  //background-color: #f1f1f1;\n\n  border-radius: 4px;\n  border: 1px solid ",";\n"])),(function(n){return n.theme.fieldBackgroundColor}),(function(n){return n.theme.modalBorderColor})),m=(0,c.ZP)(f.x)(l||(l=(0,s.Z)(["\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  max-width: 100%;\n\n  color: ",";\n"])),(function(n){return n.$isTitle||n.$disabled?n.theme.globals.inputPlaceholderColor:void 0})),g=(0,c.ZP)(v.ZP)(d||(d=(0,s.Z)(["\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n"]))),b=(0,c.ZP)(v.ZP)(a||(a=(0,s.Z)(["\n  justify-content: center;\n\n  border-radius: 2px;\n  padding: 4px 12px;\n  height: 28px;\n\n  background-color: ",";\n"])),(function(n){return n.theme.fieldBackgroundColor})),Z={CategoryItem:(0,c.ZP)(v.ZP)(u||(u=(0,s.Z)(["\n  align-items: center;\n  justify-content: center;\n\n  flex-direction: row;\n\n  padding: 4px 8px;\n\n  font-weight: 500;\n  font-size: 13px;\n  color: ",";\n\n  min-height: 28px;\n\n  border-radius: 2px;\n  //background-color: ",";\n  border: 1px solid ",";\n"])),(function(n){return n.theme.fontColorSidebar}),(function(n){return n.theme.field.backgroundColor}),(function(n){return n.theme.accentColor.base})),ImagesSetBox:g,CellText:m,Tag:h,HeaderButton:p,Cell:x,DefaultTag:b}},4240:function(n,e,i){i.d(e,{z:function(){return d}});var t=i(3544),o=i(8095),r=(i(2791),i(6753)),l=i(3329),d=function(n){var e=n.title,i=void 0===e?"Title":e,d=n.openOverlayButtonTitle,a=void 0===d?(0,t.t)("Change"):d,u=n.onOpenOverlayPress,s=n.editButtonText,c=void 0===s?(0,t.t)("Change"):s,v=n.onEditPress,f=n.acceptButtonText,p=void 0===f?(0,t.t)("Ok"):f,x=n.onAcceptPress,h=n.editMode,m=void 0!==h&&h,g=n.canAccept,b=void 0!==g&&g,Z=n.cancelButtonText,j=void 0===Z?(0,t.t)("Cancel"):Z,C=n.onCancelPress;return(0,l.jsxs)(o.ZP,{fxDirection:"row",justifyContent:"space-between",height:"max-content",alignItems:"center",minHeight:"36px",padding:"4px 0",children:[(0,l.jsx)(r.b.CellText,{$isTitle:!0,$size:13,style:{marginRight:"auto"},children:i}),u&&(0,l.jsx)(r.b.HeaderButton,{type:"button",onClick:u,children:a}),!m&&v&&(0,l.jsx)(r.b.HeaderButton,{type:"button",onClick:v,children:c}),m&&C&&(0,l.jsx)(r.b.HeaderButton,{type:"button",onClick:C,children:j}),m&&x&&(0,l.jsx)(r.b.HeaderButton,{type:"button",disabled:!b,onClick:x,children:p})]})}},6744:function(n,e,i){i.d(e,{U:function(){return a}});var t=i(8095),o=i(3544),r=i(2791),l=i(6753),d=i(3329),a=function(n){var e=n.cell,i=n.data,a=(0,r.useMemo)((function(){return e.getValue?e.getValue(i):null}),[e,i]);return(0,d.jsxs)(l.b.Cell,{children:[(0,d.jsx)(l.b.CellText,{$isTitle:!0,$size:13,$padding:"6px 8px",children:null===e||void 0===e?void 0:e.title}),(0,d.jsx)(t.ZP,{fillWidth:!0,flex:1,fxDirection:"column",gap:8,justifyContent:"flex-end",alignItems:"flex-end",overflow:"hidden",style:{minHeight:32},children:!a||["string","number"].includes(typeof a)?(0,d.jsx)(l.b.CellText,{$isTitle:!a,$weight:500,children:a||(0,o.t)("undefined")}):a})]})}},1251:function(n,e,i){i.d(e,{Qv:function(){return m},xB:function(){return g},ze:function(){return Z}});var t,o,r,l=i(168),d=i(1413),a=i(4925),u=i(2928),s=i(8095),c=i(6492),v=i(3350),f=i(3544),p=i(763),x=i(3329),h=["onClose","onBackPress","title","showSubmitButton","canSubmit","renderTitle"],m=function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).error;return(0,x.jsx)("div",{children:"Error: ".concat(n)})},g=function(n){var e=n.onClose,i=n.onBackPress,t=n.title,o=n.showSubmitButton,r=n.canSubmit,l=n.renderTitle,v=(0,a.Z)(n,h);return(0,x.jsx)(b,(0,d.Z)((0,d.Z)({padding:"4px 0"},v),{},{gap:8,children:(0,x.jsxs)(s.ZP,{fillWidth:!0,fxDirection:"row",justifyContent:"space-between",alignItems:"stretch",height:"32px",children:[i&&(0,x.jsx)(u.ZP,{variant:"textExtraSmall",icon:"SmallArrowLeft",iconSize:"22px",padding:"0",style:{minWidth:"max-content",minHeight:"100%"},onClick:i||e,children:(0,f.t)("Back")}),l||(0,x.jsx)(s.ZP,{justifyContent:"center",overflow:"hidden",children:(0,x.jsx)(c.x,{$weight:600,$size:14,style:{textTransform:"uppercase",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:t})}),o&&(0,x.jsx)(u.ZP,{variant:"textExtraSmall",gap:"6px",type:o?"submit":"button",padding:"0 6px",endIcon:"done",endIconSize:"22px",style:{minWidth:"max-content",minHeight:"100%"},disabled:!r,children:"Ok"}),e&&(0,x.jsx)(u.ZP,{variant:"onlyIconNoEffects",icon:"close",iconSize:"95%",size:"24px",padding:"0",onClick:e})]})}))},b=(0,v.ZP)(s.ZP)(t||(t=(0,l.Z)(["\n  height: 32px;\n"]))),Z=function(n){var e=n.submitButtonText,i=void 0===e?"\u041f\u0440\u0438\u0439\u043d\u044f\u0442\u0438":e,t=n.loading,o=n.extraFooter,r=n.canSubmit,l=n.onCreatePress,d=n.resetButtonShown,a=n.onAcceptPress,c=n.canAccept;return(0,x.jsxs)(j,{fillWidth:!0,children:[o,(0,x.jsxs)(s.ZP,{padding:"8px 8px",fxDirection:"row",gap:8,alignItems:"center",children:[d&&(0,x.jsx)(u.ZP,{variant:"onlyIcon",icon:"clear",size:"36px",iconSize:"80%",type:"reset"}),l&&(0,x.jsx)(u.ZP,{variant:"onlyIcon",icon:"plus",size:"36px",iconSize:"80%",onClick:l}),(0,x.jsx)(u.ZP,{variant:"filledMiddle",flex:1,type:(0,p.isUndefined)(r)?"button":"submit",style:{padding:"0 12px"},textTransform:"uppercase",fontWeight:600,endIcon:"SmallArrowRight",endIconSize:"24px",disabled:(0,p.isUndefined)(r)?!c:!r,isLoading:t,onClick:a,children:i})]})]})},j=(0,v.ZP)(s.ZP)(o||(o=(0,l.Z)([""])));v.ZP.form(r||(r=(0,l.Z)(["\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n  max-width: 480px;\n\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(n){return n.theme.modalBackgroundColor}))}}]);
//# sourceMappingURL=548.390ec8da.chunk.js.map