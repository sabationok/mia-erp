{"version":3,"file":"static/js/264.5c4cbd34.chunk.js","mappings":"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","sources":["components/Modals/EditOfferModal.tsx"],"sourcesContent":["import { ModalFormProps } from '../ModalForm';\nimport { OfferDimensionsFormArea } from '../Forms/offers/dimensions/OfferDimensionsFormArea';\nimport ModalBase from '../atoms/Modal';\nimport { t } from '../../i18e';\nimport { toOfferFormData } from '../../utils';\nimport { OfferEntity, OfferTypeEnum } from '../../types/offers/offers.types';\nimport { OfferMeasurementFormArea } from 'components/Forms/offers/measurement/OfferMeasurementFormArea';\nimport { OfferBaseInfoFormArea } from '../Forms/offers/OfferBaseInfoFormArea';\nimport FlexBox from '../atoms/FlexBox';\nimport { AppLoaderSpiner } from '../atoms/AppLoaderSpiner';\nimport { Text } from '../atoms/Text';\nimport { useLoaders } from '../../Providers/Loaders/useLoaders.hook';\nimport { LoadersProvider } from 'Providers/Loaders/LoaderProvider';\nimport { OfferFormPropertiesArea } from '../Forms/offers/properties/OfferFormPropertiesArea';\nimport { OfferFormImagesArea } from '../Forms/offers/images/OfferFormImagesArea';\nimport { useCurrentOffer } from '../../hooks';\nimport { OfferFormCategoriesArea } from '../Forms/offers/categories/OfferFormCategoriesArea';\nimport { OfferLoadersData, OfferLoadersKey } from '../Forms/offers/types';\nimport { OfferPriceFormArea } from '../Forms/pricing/OfferPriceFormArea';\nimport OfferTagsFormArea from '../Forms/offers/OfferTagsFormArea';\nimport PriceDiscountsFormArea from '../Forms/pricing/PriceDiscountsFormArea';\n\nexport interface EditOfferModalProps extends ModalFormProps {\n  copy?: boolean;\n  offer: OfferEntity;\n}\n\nconst EditOfferModal: React.FC<EditOfferModalProps> = ({ onClose, offer, copy }) => {\n  const Offer = useCurrentOffer(offer);\n  // const service = useOffersService();\n  // const router = useAppRouter();\n\n  const loaders = useLoaders<OfferLoadersKey, OfferLoadersData>(\n    { offer_refresh: { content: 'Refreshing...' }, offer_update: { content: 'Updating...' } },\n    {\n      formData: Offer ? toOfferFormData(Offer) : { type: OfferTypeEnum.GOODS },\n    }\n  );\n\n  const { setData, state } = loaders;\n\n  const offerId = copy ? state.formData?._id : Offer?._id;\n\n  if (!Offer) {\n    return (\n      <ModalBase title={!copy ? t('Update offer') : t('Copy offer')} fillHeight>\n        <FlexBox fillWidth fillHeight padding={'26px'} alignItems={'center'} justifyContent={'center'}>\n          <Text $size={16} $weight={600}>\n            {t('Offer not found')}\n          </Text>\n        </FlexBox>\n      </ModalBase>\n    );\n  }\n\n  return (\n    <ModalBase fillHeight title={!copy ? t('Update offer') : t('Copy offer')} onClose={onClose}>\n      <LoadersProvider value={loaders}>\n        {loaders.isLoading?.offer ? (\n          <FlexBox fillWidth padding={'24px'} alignItems={'center'} gap={16}>\n            <AppLoaderSpiner size={52} />\n\n            <Text>{t('Loading info about offer...')}</Text>\n          </FlexBox>\n        ) : (\n          <FlexBox padding={'0 0 16px'}>\n            <OfferBaseInfoFormArea\n              _id={offerId}\n              edit={!copy}\n              type={state.formData?.type}\n              defaultValues={state?.formData}\n              onSuccess={({ data }) => {\n                setData('formData', copy ? { ...toOfferFormData(data), _id: data._id } : toOfferFormData(data));\n              }}\n            />\n\n            <OfferFormCategoriesArea\n              _id={offerId}\n              offer={Offer}\n              defaultValues={state.formData?.categoriesIds}\n              disabled={!state.formData}\n            />\n\n            <OfferFormPropertiesArea\n              _id={offerId}\n              offer={Offer}\n              defaultValues={state.formData?.propertiesIds}\n              disabled={!state.formData}\n            />\n\n            <OfferPriceFormArea\n              expandable={true}\n              isOpen={false}\n              offer={Offer}\n              defaultState={Offer?.price}\n              price={Offer?.price}\n              title={t('Price')}\n            />\n\n            {Offer?.price && <PriceDiscountsFormArea price={Offer?.price} />}\n\n            <OfferFormImagesArea\n              offer={Offer}\n              defaultValues={state?.formData?.images}\n              disabled={!state?.formData}\n              _id={offerId}\n            />\n\n            <OfferTagsFormArea\n              _id={offerId}\n              offer={Offer}\n              defaultValues={state.formData?.tagsIds}\n              disabled={!state.formData}\n            />\n\n            <OfferDimensionsFormArea\n              offer={Offer}\n              defaultValues={state.formData?.dimensions}\n              disabled={copy ? !(state.formData?._id && state.formData) : !offerId}\n              _id={offerId}\n            />\n            <OfferMeasurementFormArea\n              offer={Offer}\n              defaultValues={state.formData?.measurement}\n              disabled={copy ? !(state.formData?._id && state.formData) : !offerId}\n              _id={offerId}\n            />\n          </FlexBox>\n        )}\n      </LoadersProvider>\n    </ModalBase>\n  );\n};\n\nexport default EditOfferModal;\n"],"names":["_ref","_state$formData","_loaders$isLoading","_state$formData2","_state$formData3","_state$formData4","_state$formData5","_state$formData6","_state$formData7","_state$formData8","_state$formData9","_state$formData10","onClose","offer","copy","Offer","useCurrentOffer","loaders","useLoaders","offer_refresh","content","offer_update","formData","toOfferFormData","type","OfferTypeEnum","setData","state","offerId","_id","_jsx","ModalBase","fillHeight","title","t","children","LoadersProvider","value","isLoading","_jsxs","FlexBox","fillWidth","padding","alignItems","gap","AppLoaderSpiner","size","Text","OfferBaseInfoFormArea","edit","defaultValues","onSuccess","_ref2","data","_objectSpread","OfferFormCategoriesArea","categoriesIds","disabled","OfferFormPropertiesArea","propertiesIds","OfferPriceFormArea","expandable","isOpen","defaultState","price","PriceDiscountsFormArea","OfferFormImagesArea","images","OfferTagsFormArea","tagsIds","OfferDimensionsFormArea","dimensions","OfferMeasurementFormArea","measurement","justifyContent","$size","$weight"],"sourceRoot":""}