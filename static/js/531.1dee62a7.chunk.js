"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[531],{2531:function(n,e,o){o.r(e),o.d(e,{FormCreateOrderTabs:function(){return M},OrderTabsEnum:function(){return F},default:function(){return D}});var i,t,l,r=o(168),d=o(1413),a=o(3433),u=o(9439),s=o(4925),c=o(9656),f=o(2989),v=o(2791),m=o(9953),h=o(8095),x=o(3350),p=o(4475),g=o(3665),b=o(3544),Z=o(3185),j=o(3329),w=["onSelect"],C=function(n){var e=n.onSelect,o=((0,s.Z)(n,w),(0,g.kw)());return(0,j.jsx)(p.Z,{buttonText:(0,b.t)("Add position to group"),onClick:function(){var n=o.open({Modal:Z.n.FormCreateOrderSlot,props:{onSubmit:function(o){e(o),o&&null!==n&&void 0!==n&&n.onClose&&(null===n||void 0===n||n.onClose())}}})}})},P=o(6606),y=o(6382),S=o(2928),k=o(7843),$=(0,x.ZP)(h.ZP)(i||(i=(0,r.Z)(["\n  position: relative;\n  overflow: hidden;\n"]))),z=(0,x.ZP)(h.ZP)(t||(t=(0,r.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor}),(function(n){return n.theme.modalBorderColor})),I=function(n){n.onSelect,n.onRemove;var e=n.list,o=(0,v.useState)(e||[]),i=(0,u.Z)(o,2),t=i[0],l=i[1],r=(0,g.kw)(),s=(0,v.useCallback)((function(n){l((function(e){return[].concat((0,a.Z)(e),[(0,d.Z)((0,d.Z)({},n),{},{tempId:(0,y.x0)(8)})])}))}),[]),c=(0,v.useCallback)((function(n){l((function(e){return e.filter((function(e){return e.tempId!==n}))}))}),[]),f=(0,v.useMemo)((function(){return null===t||void 0===t?void 0:t.map((function(n,e){return(0,j.jsx)(P.Z,{index:e,slot:n,onRemove:function(){return c(null===n||void 0===n?void 0:n.tempId)}},e.toString())}))}),[t,c]);return(0,j.jsxs)($,{flex:1,children:[(0,j.jsx)(h.ZP,{flex:1,overflow:"auto",children:(0,j.jsx)(h.ZP,{children:f})}),(0,j.jsx)(C,{onSelect:s}),(0,j.jsxs)(z,{fxDirection:"row",gap:8,padding:"8px",children:[(0,j.jsx)(S.ZP,{variant:"defaultSmall",onClick:function(){window.confirm("Remove all items?")&&k.kl.info("All items will be remove")},children:(0,b.t)("Remove all")}),(0,j.jsx)(S.ZP,{variant:"outlinedSmall",onClick:function(){var n=r.open({Modal:Z.n.FormCreateOrderSlot,props:{onSubmit:function(e){s(e),e&&null!==n&&void 0!==n&&n.onClose&&(null===n||void 0===n||n.onClose())}}})},children:(0,b.t)("Add position to order")})]})]})},_=o(1500),B=["defaultState","onSubmit"],F=function(n){return n.content="content",n.info="info",n.summary="summary",n.invoices="invoices",n}({}),M=(0,_.H1)(F),N=(0,_.dW)(M),W=(0,x.ZP)(c.Z)(l||(l=(0,r.Z)(["\n  @media screen and (min-width: 480px) {\n    width: fit-content;\n  }\n"]))),D=function(n){n.defaultState,n.onSubmit;var e=(0,s.Z)(n,B),o=(0,v.useState)(0),i=(0,u.Z)(o,2),t=i[0],l=i[1],r=(0,v.useState)([]),c=(0,u.Z)(r,2),h=c[0],x=c[1],p=(0,f.hN)({}),g=(0,v.useCallback)((function(n){x((function(e){return[].concat((0,a.Z)(e),[n])}))}),[]),b=(0,v.useCallback)((function(n){x((function(e){return e.filter((function(e){return e._id!==n._id}))}))}),[]),Z=(0,v.useMemo)((function(){var n,e,o,i;return null!==(n=N(t))&&void 0!==n&&n.content?(0,j.jsx)(I,{list:h,onSelect:g,onRemove:b}):null!==(e=N(t))&&void 0!==e&&e.info?(0,j.jsx)(j.Fragment,{}):(null!==(o=N(t))&&void 0!==o&&o.summary,void(null!==(i=N(t))&&void 0!==i&&i.invoices))}),[t,h,g,b]),w=(0,v.useMemo)((function(){return(0,j.jsx)(m.Z,{options:M,onChangeIndex:l,currentIndex:t})}),[t]);return(0,j.jsx)(W,(0,d.Z)((0,d.Z)({fitContentH:!0,fillHeight:!0},e),{},{onSubmit:p.handleSubmit((function(n){console.log("FormCreateOrderData ======================================="),console.log(n)})),extraHeader:w,children:Z}))}},6606:function(n,e,o){o.d(e,{Z:function(){return M}});var i,t,l,r,d,a,u,s,c,f=o(168),v=o(9439),m=o(8095),h=o(3350),x=o(2928),p=o(2791),g=o(6492),b=o(3544),Z=o(6681),j=o(1500),w=o(3329),C=(0,h.ZP)(Z.ZP)(i||(i=(0,f.Z)(["\n  flex: 1;\n  width: 100%;\n  height: 100%;\n\n  padding: 0 6px;\n  font-size: 16px;\n  font-weight: 500;\n\n  text-align: center;\n\n  //border: 0;\n  //color: inherit;\n  //background: transparent;\n  //text-align: center;\n  //font-family: inherit;\n  //font-size: inherit;\n  //font-weight: inherit;\n"]))),P=function(n){var e=n.value,o=void 0===e?0:e,i=n.onChangeValue,t=n.width,l=n.height,r=void 0===l?"18px":l,d=n.disabled,a=n.className,u=n.autoFocus,s=(0,p.useState)(null!==o&&void 0!==o?o:0),c=(0,v.Z)(s,2),f=c[0],h=c[1],g=(0,p.useRef)(null),b=function(n){return function(){var e;i?i(f+n>0?f+n:f):h((function(e){return e+n?e+n:e})),null===(e=g.current)||void 0===e||e.focus()}};return(0,p.useEffect)((function(){j.sr.isNum(o)&&o>0&&h(o)}),[o]),(0,w.jsxs)(m.ZP,{fxDirection:"row",gap:4,width:t,alignItems:"center",height:"min-content",children:[(0,w.jsx)(x.ZP,{variant:"onlyIcon",size:r,icon:"minus",onClick:b(-1)}),(0,w.jsx)(C,{value:f,disabled:d,className:a,ref:g,onChange:function(n){var e=n.target.value;isNaN(Number(e))||(i?i(Number(e)):h(Number(e)))},onSubmit:function(n){n.preventDefault()},autoFocus:u}),(0,w.jsx)(x.ZP,{variant:"onlyIcon",size:r,icon:"plus",onClick:b(1)})]})},y=o(4990),S=(0,h.ZP)(m.ZP)(t||(t=(0,f.Z)(["\n  position: relative;\n  //height: fit-content;\n  padding: 4px;\n\n  //height: min-content;\n\n  //border-bottom: 2px solid ",";\n  color: ",";\n  cursor: default;\n\n  border: 1px solid ",";\n  border-left: 3px solid ",";\n\n  transition: all ",";\n\n  &:hover {\n    border-color: ",";\n  }\n"])),(function(n){return n.theme.fieldBackgroundColor}),(function(n){return n.theme.fontColorSidebar}),(function(n){return n.theme.modalBorderColor}),(function(n){return n.theme.modalBorderColor}),(function(n){return n.theme.globals.timingFunctionMain}),(function(n){var e=n.disabled,o=n.theme;return!e&&o.accentColor.base})),k=(0,h.ZP)(m.ZP)(l||(l=(0,f.Z)(["\n  width: min-content;\n  @media screen and (min-width: 768px) {\n    width: max-content;\n    flex-direction: row;\n    gap: 8px;\n  }\n"]))),$=(0,h.ZP)(m.ZP)(r||(r=(0,f.Z)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));\n  //grid-template-rows: repeat(5, min-content);\n  //grid-template-areas:\n  //  'label label label label sku sku'\n  //  'price bonus discount bonus cashback total';\n  //'category category brand brand type type'\n  //'atr_1 atr_1  atr_2  atr_2 qty qty'\n  //'warehouse warehouse warehouse warehouse warehouse warehouse';\n\n  //max-width: 270px;\n  height: max-content;\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor}),(function(n){return n.theme.modalBorderColor})),z=(0,h.ZP)($)(d||(d=(0,f.Z)(["\n  grid-template-columns: repeat(auto-fill, minmax(125px, 1fr));\n"]))),I=(0,h.ZP)(m.ZP)(a||(a=(0,f.Z)(["\n  //height: fit-content;\n\n  //width: 100%;\n  object-position: center;\n  object-fit: contain;\n  overflow: hidden;\n  width: 100%;\n  max-width: 125px;\n  //max-height: 100px;\n  //height: 100px;\n\n  //@media screen and (max-width: 480px) {\n  //  width: 100px;\n  //  margin: auto;\n  //}\n"]))),_=(0,h.ZP)(g.x)(u||(u=(0,f.Z)(["\n  color: ",";\n"])),(function(n){var e=n.theme;return"secondary"===n.colorType?e.globals.inputPlaceholderColor:e.fontColorSidebar})),B=(0,h.ZP)(x.ZP)(s||(s=(0,f.Z)(["\n  padding: 6px 10px;\n"]))),F=(0,h.ZP)(m.ZP)(c||(c=(0,f.Z)(["\n  //border-top: 1px solid ",";\n"])),(function(n){return n.theme.modalBorderColor})),M=function(n){var e,o,i,t,l,r,d,a,u,s,c,f=n.slot,x=n.onEditPress,Z=n.disabled,C=n.onSelectPress,M=n.onRemovePress,W=(n.onUpdate,n.editable),D=(0,p.useState)(f),R=(0,v.Z)(D,1)[0],T=(0,p.useMemo)((function(){var n,e,o,i,t,l,r,d,a,u,s,c,f,v,m,h,x,p,g,b=[];null!==R&&void 0!==R&&null!==(n=R.product)&&void 0!==n&&null!==(e=n.images)&&void 0!==e&&e.length&&(b=null===R||void 0===R||null===(f=R.product)||void 0===f?void 0:f.images);null!==R&&void 0!==R&&null!==(o=R.variation)&&void 0!==o&&null!==(i=o.offer)&&void 0!==i&&null!==(t=i.images)&&void 0!==t&&t.length&&(b=null===R||void 0===R||null===(v=R.variation)||void 0===v||null===(m=v.offer)||void 0===m?void 0:m.images);null!==R&&void 0!==R&&null!==(l=R.inventory)&&void 0!==l&&null!==(r=l.offer)&&void 0!==r&&null!==(d=r.images)&&void 0!==d&&d.length&&(b=null===R||void 0===R||null===(h=R.inventory)||void 0===h||null===(x=h.offer)||void 0===x?void 0:x.images);null!==R&&void 0!==R&&null!==(a=R.origin)&&void 0!==a&&null!==(u=a.offer)&&void 0!==u&&null!==(s=u.images)&&void 0!==s&&s.length&&(b=null===R||void 0===R||null===(p=R.origin)||void 0===p||null===(g=p.offer)||void 0===g?void 0:g.images);return(null===(c=b[0])||void 0===c?void 0:c.img_preview)||""}),[null===R||void 0===R||null===(e=R.product)||void 0===e?void 0:e.images,null===R||void 0===R||null===(o=R.variation)||void 0===o||null===(i=o.offer)||void 0===i?void 0:i.images,null===R||void 0===R||null===(t=R.origin)||void 0===t||null===(l=t.offer)||void 0===l?void 0:l.images,null===R||void 0===R||null===(r=R.inventory)||void 0===r||null===(d=r.offer)||void 0===d?void 0:d.images]),E=(0,p.useMemo)((function(){return N.map((function(n){var e=R&&n.name&&R[n.name],o=e&&"object"===typeof e&&"amount"in e?e.amount:e;return(0,w.jsxs)(m.ZP,{justifyContent:"flex-start",fillWidth:!0,padding:"4px",gap:4,children:[(0,w.jsx)(_,{colorType:"secondary",$size:10,children:n.label}),(0,w.jsx)(_,{$size:12,$align:"right",$weight:500,children:(0,j.__)(o||0)})]},n.name)}))}),[R]),O=(0,p.useMemo)((function(){var n,e;return null===f||void 0===f||null===(n=f.variation)||void 0===n||null===(e=n.properties)||void 0===e?void 0:e.map((function(n){var e;return(0,w.jsxs)(m.ZP,{justifyContent:"flex-start",fillWidth:!0,padding:"4px",gap:4,children:[(0,w.jsx)(_,{colorType:"secondary",$size:10,children:null===n||void 0===n||null===(e=n.parent)||void 0===e?void 0:e.label}),(0,w.jsx)(g.x,{$size:12,$align:"right",$weight:500,children:null===n||void 0===n?void 0:n.label})]},null===n||void 0===n?void 0:n._id)}))}),[null===f||void 0===f||null===(a=f.variation)||void 0===a?void 0:a.properties]),q=(0,h.Fg)();return(0,w.jsx)(S,{disabled:Z,children:(0,w.jsxs)(m.ZP,{fillWidth:!0,gap:8,fxDirection:"row",children:[(0,w.jsxs)(k,{style:{borderRight:"1px solid ".concat(q.modalBorderColor)},padding:"0 4px 0 0",children:[(0,w.jsx)(I,{justifyContent:"flex-start",children:(0,w.jsx)("img",{src:T,style:{objectFit:"cover",objectPosition:"center"},alt:"",width:"100%"})}),!Z&&(0,w.jsxs)(m.ZP,{maxWidth:"125px",justifyContent:"space-between",children:[W&&(0,w.jsx)(y.Z,{label:(0,b.t)("quantity"),style:{width:"100%",marginBottom:8},disabled:Z,children:(0,w.jsx)(P,{value:null===R||void 0===R?void 0:R.quantity,disabled:Z})}),(0,w.jsxs)(F,{children:[M&&(0,w.jsx)(B,{variant:"textExtraSmall",disabled:!M,onClick:M,children:(0,b.t)("Delete")}),C&&(0,w.jsx)(B,{variant:"textExtraSmall",disabled:!C,onClick:C,children:(0,b.t)("Select")}),x&&(0,w.jsx)(B,{variant:"textExtraSmall",disabled:!x,onClick:x,children:(0,b.t)("Edit")})]})]})]}),(0,w.jsxs)(m.ZP,{flex:1,gap:2,children:[(0,w.jsx)(m.ZP,{fxDirection:"row",gap:8,fillWidth:!0,alignItems:"flex-start",children:(0,w.jsxs)(m.ZP,{fxDirection:"row",flexWrap:"wrap",gap:8,flex:1,alignItems:"center",padding:"4px 8px",children:[(0,w.jsx)(_,{style:{flex:1},children:null===f||void 0===f||null===(u=f.variation)||void 0===u?void 0:u.label}),(0,w.jsx)(_,{$size:12,colorType:"secondary",children:null===f||void 0===f||null===(s=f.variation)||void 0===s?void 0:s.sku}),(0,w.jsx)(_,{$size:12,colorType:"secondary",children:null===f||void 0===f||null===(c=f.product)||void 0===c?void 0:c.type})]})}),(0,w.jsx)(g.x,{$size:12,$weight:600,children:(0,b.t)("Properties")}),(0,w.jsx)(z,{fillWidth:!0,alignItems:"flex-start",children:O}),(0,w.jsx)(g.x,{$size:12,$weight:600,children:(0,b.t)("Summary")}),(0,w.jsx)($,{fillWidth:!0,alignItems:"flex-start",justifyContent:"space-between",children:E})]})]})})},N=[{label:(0,b.t)("Price"),name:"out"}]}}]);
//# sourceMappingURL=531.1dee62a7.chunk.js.map