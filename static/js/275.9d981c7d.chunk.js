"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[275],{6275:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var o,u=n(168),i=n(1413),l=n(9439),r=n(4925),d=n(2791),a=n(9656),c=n(3350),s=function(e){return e.UAH="UAH",e.EUR="EUR",e.USD="USD",e}({}),Z=n(4990),p=n(6681),v=n(8007),b=n(4343),h=n(3423),m=n(1500),y=n(51),f=n(8095),C=n(3544),x=n(870),P=n(2989),g=n(4695),O=n(3719),S=n(3329),j=["edit","onSubmit","copy","defaultState","addInputs"],_=v.Ry().shape({_id:v.Z_(),label:v.Z_()}).nullable().optional(),E=v.Ry().shape({_id:v.Z_(),label:v.Z_()}).required(),I=c.ZP.div(o||(o=(0,u.Z)(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: 8px;\n"])),(function(e){return e.gridTemplateColumns||"1fr 120px"})),N=function(e){e.edit;var t,n,o,u,c=e.onSubmit,N=(e.copy,e.defaultState),R=(e.addInputs,(0,r.Z)(e,j)),A=(0,y.CG)().directories.directories,T=(0,d.useState)(null===N||void 0===N?void 0:N.type),U=(0,l.Z)(T,2),F=U[0],q=U[1],M=(0,P.hN)({defaultValues:(0,i.Z)((0,i.Z)({currency:s.UAH},N),{},{eventDate:(0,m.w4)(null===N||void 0===N?void 0:N.eventDate)}),resolver:(0,g.X)((u=F,v.Ry().shape({amount:v.Rx().required(),type:v.Z_().required(),eventDate:v.Z_().required(),comment:v.Z_().optional(),countIn:u&&["INCOME","TRANSFER"].includes(u)?E:_,subCountIn:_,countOut:u&&["EXPENSE","TRANSFER"].includes(u)?E:_,subCountOut:_,category:E,subCategory:_}))),reValidateMode:"onSubmit"}),D=M.formState,V=D.errors,L=D.isValid,k=M.formValues,w=M.register,H=M.setValue,X=M.registerSelect,G=M.handleSubmit,W=(0,O.d)();var z=(0,d.useMemo)((function(){var e,t=A[x.cA.COUNTS],n=t.find((function(e){var t;return e._id===(null===(t=k.countIn)||void 0===t?void 0:t._id)}));return k.type&&["INCOME","TRANSFER"].includes(k.type)?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h.Z,(0,i.Z)({},X("countIn",{label:(0,C.ZP)("countIn"),placeholder:(0,C.ZP)("countIn"),required:!0,options:t},{childName:"subCountIn"}))),(null===n||void 0===n?void 0:n.childrenList)&&(null===n||void 0===n||null===(e=n.childrenList)||void 0===e?void 0:e.length)>0&&(0,S.jsx)(h.Z,(0,i.Z)({label:(0,C.ZP)("subCountIn"),placeholder:(0,C.ZP)("subCountIn")},X("subCountIn",{options:null===n||void 0===n?void 0:n.childrenList})))]}):null}),[A,null===(t=k.countIn)||void 0===t?void 0:t._id,k.type,X]),B=(0,d.useMemo)((function(){var e,t=A[x.cA.COUNTS],n=null===(e=t.find((function(e){var t;return e._id===(null===(t=k.countOut)||void 0===t?void 0:t._id)})))||void 0===e?void 0:e.childrenList;return k.type&&["EXPENSE","TRANSFER"].includes(k.type)?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h.Z,(0,i.Z)({},X("countOut",{label:(0,C.ZP)("countOut"),placeholder:(0,C.ZP)("countOut"),required:!0,options:t,error:V.countOut},{childName:"subCountOut"}))),n&&n.length>0&&(0,S.jsx)(h.Z,(0,i.Z)({label:(0,C.ZP)("subCountOut"),placeholder:(0,C.ZP)("subCountOut")},X("subCountOut",{options:n,error:V.subCountOut})))]}):null}),[A,V.countOut,V.subCountOut,null===(n=k.countOut)||void 0===n?void 0:n._id,k.type,X]),J=(0,d.useMemo)((function(){var e,t=A[x.cA.CATEGORIES_TR].filter((function(e){return e.type===k.type})),n=null===(e=t.find((function(e){var t;return e._id===(null===(t=k.category)||void 0===t?void 0:t._id)})))||void 0===e?void 0:e.childrenList;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h.Z,(0,i.Z)({},X("category",{label:(0,C.ZP)("category"),placeholder:(0,C.ZP)("category"),required:!0,options:t},{childName:"subCategory"}))),n&&n.length>0&&(0,S.jsx)(h.Z,(0,i.Z)({label:(0,C.ZP)("subCategory"),placeholder:(0,C.ZP)("subCategory")},X("subCategory",{options:n})))]})}),[A,null===(o=k.category)||void 0===o?void 0:o._id,k.type,X]);return(0,S.jsx)(a.Z,(0,i.Z)((0,i.Z)({isValid:L,onSubmit:G((function(e){var t="INCOME"===k.type&&["countOut","subCountOut"]||"EXPENSE"===k.type&&["countIn","subCountIn"]||[],n=(0,m.G9)(e,t,"","amount");c&&c({_id:"",data:n},(0,i.Z)({},W.state))}),(function(e){return console.log(e)})),onOptSelect:function(e){var t=e.value;t&&(q(t),H("type",t))}},R),{},{extraFooter:(0,S.jsx)(O.Z,(0,i.Z)({},W)),children:(0,S.jsxs)(f.ZP,{className:"inputs",flex:"1",fillWidth:!0,maxHeight:"100%",padding:"0 8px 8px",overflow:"auto",children:[(0,S.jsx)(Z.Z,{label:(0,C.ZP)("dateAndTime"),direction:"vertical",children:(0,S.jsx)(p.ZP,(0,i.Z)({placeholder:(0,C.ZP)("dateAndTime"),type:"datetime-local"},w("eventDate")))}),(0,S.jsxs)(I,{children:[(0,S.jsx)(Z.Z,{label:(0,C.ZP)("amount"),direction:"vertical",children:(0,S.jsx)(p.ZP,(0,i.Z)({placeholder:(0,C.ZP)("amount"),type:"number"},w("amount",{valueAsNumber:!0})))}),(0,S.jsx)(Z.Z,{label:(0,C.ZP)("currency"),direction:"vertical",children:(0,S.jsx)(p.ZP,(0,i.Z)((0,i.Z)({placeholder:(0,C.ZP)("currency")},w("currency")),{},{disabled:!0}))})]}),B,z,J,(0,S.jsx)(h.Z,(0,i.Z)({label:(0,C.ZP)("contractor"),placeholder:(0,C.ZP)("contractor")},X("contractor",{options:A[x.cA.CONTRACTORS]}))),(0,S.jsx)(Z.Z,{label:(0,C.ZP)("comment"),direction:"vertical",children:(0,S.jsx)(b.Z,(0,i.Z)({placeholder:(0,C.ZP)("comment")},w("comment")))})]})}))}}}]);
//# sourceMappingURL=275.9d981c7d.chunk.js.map