"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[226,495],{2483:function(e,n,t){t.d(n,{j:function(){return f}});var i,o,r=t(168),l=t(1413),a=t(4781),d=t(2791),u=t(3350),s=t(8095),c=t(3329),v=(0,d.createContext)({}),f=function(e){var n=(0,a.on)(),t=(0,d.useCallback)((function(e){return function(t){t.target===t.currentTarget&&n.remove(e)}}),[n]),i=(0,d.useMemo)((function(){return n.getStack().map((function(e,i){var o=e.RenderComponent,r=e.props,a=e.id;return(0,c.jsx)(h,{className:"overlay-".concat(a),style:{zIndex:20+i},fillHeight:!0,fillWidth:!0,alignItems:"flex-end",onClick:t(a),children:(0,c.jsx)(v.Provider,{value:{onClose:function(){n.remove(a)},compId:a,index:i},children:(0,c.jsx)(o,(0,l.Z)((0,l.Z)({},r),{},{onClose:function(){n.remove(a)},compId:a,index:i}),"overlay-".concat(a))})},"overlay-".concat(a))}))}),[t,n]);return(0,c.jsx)(p,{fillWidth:!0,fillHeight:!0,isActive:i.length>0,overflow:"hidden",children:i})},p=(0,u.ZP)(s.ZP)(i||(i=(0,r.Z)(["\n  position: absolute;\n\n  top: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 200;\n\n  left: ",";\n\n  opacity: ",";\n  visibility: ",";\n  pointer-events: ",";\n\n  background-color: ",";\n\n  transition: all ",";\n"])),(function(e){return e.isActive?0:"100%"}),(function(e){return e.isActive?1:0}),(function(e){return e.isActive?"visible":"hidden"}),(function(e){return e.isActive?"all":"none"}),(function(e){return e.theme.backdropColorDark}),(function(e){return e.theme.globals.timingFunctionMain})),h=(0,u.ZP)(s.ZP)(o||(o=(0,r.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 20;\n\n  max-width: 360px;\n\n  height: 100%;\n\n  animation: TransformFromRight;\n\n  @media screen and (max-width: 768px) {\n    max-width: 400px;\n  }\n"])))},4781:function(e,n,t){t.d(n,{on:function(){return s}});var i=t(1413),o=t(3433),r=t(9439),l=t(2791),a=t(6382),d=t(3329),u=(0,l.createContext)({}),s=function(){return(0,l.useContext)(u)};n.ZP=function(e){var n=e.children,t=(0,l.useState)([]),s=(0,r.Z)(t,2),c=s[0],v=s[1],f=(0,l.useCallback)((function(e){v((function(n){return n.filter((function(n){return n.id!==e}))}))}),[]),p=(0,l.useCallback)((function(){v([])}),[]),h=(0,l.useCallback)((function(e){var n="".concat(e.RenderComponent.name,"_").concat((0,a.x0)(8));return"function"===typeof e.RenderComponent&&v((function(t){var r=t.find((function(n){return n.id.includes(e.RenderComponent.name)}));if(r){var l=t.filter((function(e){var n,t;return(null===(n=e.RenderComponent)||void 0===n?void 0:n.name)!==(null===(t=r.RenderComponent)||void 0===t?void 0:t.name)}));return[].concat((0,o.Z)(l),[(0,i.Z)((0,i.Z)({},e),{},{id:n})])}return[].concat((0,o.Z)(t),[(0,i.Z)((0,i.Z)({},e),{},{id:n})])})),{onClose:function(){return f(n)},compId:n}}),[f]),m={getStack:function(){return c},remove:f,clearStack:p,open:h,create:function(e,n){return h({RenderComponent:e,props:n})}};return(0,d.jsx)(u.Provider,{value:m,children:n})}},3038:function(e,n,t){t.r(n),t.d(n,{default:function(){return xn},useOfferOverviewLoaders:function(){return hn}});var i,o,r,l,a,d,u=t(168),s=t(9439),c=t(3350),v=t(8495),f=t(6931),p=t(2791),h=t(3226),m=t(4942),x=t(1500),g=t(6492),b=t(9953),C=t(8095),Z=t(8189),j=t(1413),w=t(4165),P=t(5861),y=t(1819),S=t(8839),I=t(3665),k=t(2989),D=t(7578),O=t(8239),A=t(6981),B=t(51),_=t(9978),M=t(3329),L=function(e){var n,t=e.onSelect,i=e.selected,o=e.withActions,r=void 0===o||o,l=(0,I.f9)(),a=(0,y.xc)()[y.EJ.offers],d=(0,k.Zx)().offerId,u=(0,k.G2)({_id:d}),c=(0,p.useState)(),v=(0,s.Z)(c,2),f=v[0],h=v[1],m=(0,D.un)(),x=(0,B.TL)(),g=(0,p.useCallback)(function(){var e=(0,P.Z)((0,w.Z)().mark((function e(n){var t,i;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.refresh,i=n.update,u){e.next=3;break}return e.abrupt("return");case 3:a.getAllPrices({data:{params:{offerId:null===u||void 0===u?void 0:u._id},refreshCurrent:t,update:i},onLoading:null===m||void 0===m?void 0:m.onLoading("prices")});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[u,m,a]),b=(0,p.useMemo)((function(){return{onRowClick:function(e){var n;(h(null===e||void 0===e?void 0:e.rowData),t)&&t({_id:(null===e||void 0===e?void 0:e.rowId)||(null===e||void 0===e||null===(n=e.rowData)||void 0===n?void 0:n._id)||""})},actionsCreator:r?function(e){var n,t=(null===(n=e.selectedRow)||void 0===n?void 0:n._id)||(null===f||void 0===f?void 0:f._id);return[{icon:"refresh",type:"onlyIcon",onClick:function(){return g({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!0},{icon:"copy",type:"onlyIcon",disabled:!0},{icon:"edit",type:"onlyIcon",disabled:!t,onClick:function(){x((0,_.SN)({data:{params:{_id:t}},onLoading:m.onLoading("price",void 0,{content:"Refreshing price info..."}),onSuccess:function(){l.open({ModalChildren:O.Z,modalChildrenProps:{offer:u,updateId:t}})}}))}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){l.open({ModalChildren:O.Z,modalChildrenProps:{offer:u}})}}]}:void 0}}),[r,t,null===f||void 0===f?void 0:f._id,g,x,m,l,u]);return(0,p.useEffect)((function(){g({refresh:!0})}),[]),(0,M.jsx)(S.ZP,(0,j.Z)((0,j.Z)({},b),{},{hasSearch:!1,hasFilter:!1,isLoading:null===m||void 0===m||null===(n=m.isLoading)||void 0===n?void 0:n.prices,selectedRow:i,tableData:null===u||void 0===u?void 0:u.prices,tableTitles:A.po}))},T=t(758),E=t(3664),R=t(7348),V=t(387),N=function(e){var n=e.onSelect,t=e.selected,i=e.withActions,o=(0,R.i7)().currentOffer,r=(0,I.f9)(),l=(0,y.xc)()[y.EJ.offers],a=(0,p.useState)(!1),d=(0,s.Z)(a,2),u=d[0],c=d[1],v=(0,p.useCallback)((function(e){var n=e.refresh;e.update;if(o){var t=(0,V.rE)(o);l.getAllInventories({data:{refreshCurrent:n,params:{offer:t}},onLoading:c})}}),[o,l]),f=(0,p.useMemo)((function(){return{tableData:null===o||void 0===o?void 0:o.inventories,tableTitles:T.QX,onRowClick:function(e){if(n){if(null!==e&&void 0!==e&&e.rowData)return void n((0,V.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e.rowId&&n({_id:null===e||void 0===e?void 0:e.rowId})}},actionsCreator:i?function(e){return[{icon:"refresh",type:"onlyIcon",onClick:function(){return v({refresh:!0})}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){r.open({ModalChildren:E.Z.CreateWarehouseDocument,modalChildrenProps:{}})}}]}:void 0}}),[null===o||void 0===o?void 0:o.inventories,v,r,n,i]);return(0,p.useEffect)((function(){v({refresh:!0})}),[]),(0,M.jsx)(S.ZP,(0,j.Z)((0,j.Z)({},f),{},{hasSearch:!1,hasFilter:!1,isLoading:u,selectedRow:t}))},H=function(e){return(0,M.jsx)(C.ZP,{padding:"16px",children:(0,M.jsx)(g.x,{$size:16,$weight:600,children:"In work"})})},F=t(9541),W=t(7121),$=t(9185),U=t(107),z=function(e){var n=e.selected,t=(0,B.TL)(),i=(0,R.Uh)(),o=null===n||void 0===n?void 0:n._id;return(0,p.useEffect)((function(){t((0,$.X)({params:{offerId:o}}))}),[o,t]),(0,M.jsx)(S.ZP,{actionsCreator:function(){return[{title:"refresh",icon:"refresh",type:"onlyIcon",onClick:function(){t((0,$.X)({params:{offerId:o}}))}}]},tableData:i.list,tableTitles:[{top:{name:"Offer label",getData:function(e){var n;return null===(n=e.offer)||void 0===n?void 0:n.label}},bottom:{name:"SKU",getData:function(e){var n;return null===(n=e.offer)||void 0===n?void 0:n.sku}},action:"valueByPath",width:"250px"},{top:{name:"Slash tag",getData:function(e){return e.slashTag}},bottom:{name:"Unic code",getData:function(e){return e.code}},action:"valueByPath",width:"150px"},{top:{name:"Sales",getData:function(e){var n;return null===(n=e.stats)||void 0===n?void 0:n.sales},align:"end"},bottom:{name:"Refunds",getData:function(e){var n;return null===(n=e.stats)||void 0===n?void 0:n.refunds},align:"end"},action:"valueByPath",width:"100px"},{top:{name:"Clicks",getData:function(e){var n;return null===(n=e.stats)||void 0===n?void 0:n.clicks},align:"end"},bottom:{name:"Errors",getData:function(e){var n;return null===(n=e.stats)||void 0===n?void 0:n.errors},align:"end"},action:"valueByPath",width:"100px"},{top:{name:"Status",getData:function(e){return e.isActive?"Active":"Not active"}},bottom:{name:"Is deleted",getData:function(e){return e.deletedAt?(0,U.t)("Yes"):(0,U.t)("No")}},action:"valueByPath",width:"125px"},{top:{name:"Device ID",getData:function(e){return e.deviceId}},bottom:{name:"Cookies ID",getData:function(e){return e.cookiesId}},action:"valueByPath",width:"250px"},{top:{name:"Domain",getData:function(e){return e.referer}},bottom:{name:"Url referer",getData:function(e){return e.domain}},action:"valueByPath",width:"210px"},{top:{name:"Ip address",getData:function(e){return e.ip}},bottom:{name:"User agent",getData:function(e){return e.userAgent}},action:"valueByPath",width:"450px"},{top:{name:"Url",getData:function(e){return e.url}},bottom:{name:"Destination Url",getData:function(e){return e.destinationUrl}},action:"valueByPath",width:"450px"},(0,x.TT)(),(0,x.kj)(),(0,x.My)()]})},G=function(e){return e.Prices="Prices",e.Variations="Variations",e.Warehousing="Warehousing",e.Sales="Sales",e.Links="Links",e}(G||{}),K=(0,x.H1)(G),J=(0,c.ZP)(C.ZP)(i||(i=(0,u.Z)(["\n  overflow: auto;\n\n  padding: 0 8px;\n\n  max-width: 100%;\n\n  transition: ",";\n  background-color: ",";\n\n  @media screen and (min-width: 768px) {\n    min-width: 320px;\n  }\n\n  @media screen and (max-width: 768px) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 20;\n\n    transform: translateX(","%);\n\n    box-shadow: ",";\n  }\n"])),(function(e){return e.theme.globals.timingFunctionMain}),(function(e){return e.theme.backgroundColorLight}),(function(e){return e.isVisible?0:100}),(function(e){return e.isVisible?"0 12px 26px rgba(0, 0, 0, 0.25)":""})),q=(0,c.ZP)(C.ZP)(o||(o=(0,u.Z)(["\n  //border-top: 1px solid ",";\n  //border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),X=function(e){var n,t,i=e.isVisible,o=e.toggleVisibility,r=(0,h.rh)(),l=(0,F.J)(),a=(0,p.useState)(K[0].value),d=(0,s.Z)(a,2),u=d[0],c=d[1],v=(0,p.useMemo)((function(){var e,n;if(!r.currentOffer)return null;var t=(e={},(0,m.Z)(e,G.Variations,(0,M.jsx)(Z.Z,{withActions:!0})),(0,m.Z)(e,G.Warehousing,(0,M.jsx)(N,{withActions:!0})),(0,m.Z)(e,G.Prices,(0,M.jsx)(L,{withActions:!0})),(0,m.Z)(e,G.Sales,(0,M.jsx)(H,{withActions:!0})),(0,m.Z)(e,G.Links,(0,M.jsx)(z,{withActions:!0})),e);return u&&null!==(n=null===t||void 0===t?void 0:t[u])&&void 0!==n?n:null}),[u,r.currentOffer]);return(0,M.jsx)(D.f4,{value:l,children:(0,M.jsxs)(J,{overflow:"hidden",fillHeight:!0,isVisible:i,children:[i&&(0,M.jsx)(W.OX,{onBackPress:o,renderTitle:(0,M.jsxs)(C.ZP,{padding:"0 8px",fxDirection:"row",alignItems:"center",justifyContent:"center",gap:8,children:[(0,M.jsx)(g.x,{$weight:600,$size:14,children:null===r||void 0===r||null===(n=r.currentOffer)||void 0===n?void 0:n.label}),(0,M.jsx)(g.x,{$size:14,$weight:400,children:null===r||void 0===r||null===(t=r.currentOffer)||void 0===t?void 0:t.sku})]})}),(0,M.jsx)(b.Z,{options:K,onOptSelect:function(e,n,t){n&&c(n)},preventDefault:!0}),(0,M.jsx)(q,{overflow:"hidden",fillWidth:!0,flex:1,children:v})]})})},Y=t(2483),Q=t(4925),ee=t(2928),ne=t(4781),te=t(6744),ie=t(763),oe=t.n(ie),re=t(870),le=t(6753),ae=t(4240),de=t(9184),ue=(0,c.ZP)(C.ZP)(r||(r=(0,u.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),se=function(e){var n,t,i,o=e.onClose,r=(0,y.xc)()[y.EJ.offers],l=(0,k.G2)(),a=(0,R.q$)(re.cA.CATEGORIES_PROD).directory,d=(0,F.J)({update:{content:"Loadings..."}}),u=(0,x.sK)(null===l||void 0===l||null===(n=l.categories)||void 0===n?void 0:n.map((function(e){return e._id}))),c=(0,p.useState)(u),v=(0,s.Z)(c,2),f=v[0],h=v[1],m=(0,p.useMemo)((function(){return(null===u||void 0===u?void 0:u.join(","))!==(0,x.sK)(f).join(",")}),[u,f]);return(0,p.useEffect)((function(){null!==l&&void 0!==l&&l.categories&&h(null===l||void 0===l?void 0:l.categories.map((function(e){return e._id})))}),[]),(0,M.jsxs)(W.dF,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),l&&r.updateById({onLoading:d.onLoading("update"),data:{data:(0,j.Z)((0,j.Z)({},(0,x.rE)(l)),{},{data:{categories:f}})},onSuccess:function(e,n){o&&o()}})},children:[(0,M.jsx)(W.OX,{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457",onBackPress:o,canSubmit:m,okButton:!0,isLoading:null===(t=d.isLoading)||void 0===t?void 0:t.update}),(0,M.jsx)(ue,{padding:"0 0 8px 0",flex:1,overflow:"auto",children:(0,M.jsx)(de.Z,{onChangeIds:h,options:a,defaultData:f,offer:l})}),(0,M.jsx)(W.AT,{canSubmit:m,loading:null===(i=d.isLoading)||void 0===i?void 0:i.update})]})},ce=function e(n){var t,i,o=n.item,r=n.lvl,l=void 0===r?0:r,a=n.selectedIds,d=(0,p.useMemo)((function(){var n;return null===o||void 0===o||null===(n=o.childrenList)||void 0===n?void 0:n.map((function(n,t){return(0,M.jsx)(e,{item:n,index:t,lvl:l+1,selectedIds:a},"item_lvl_".concat(l,"_").concat(n._id))}))}),[null===o||void 0===o?void 0:o.childrenList,l,a]),u=(0,p.useMemo)((function(){return a.includes(o._id)}),[o._id,a]);return(0,M.jsxs)(M.Fragment,{children:[u&&(0,M.jsxs)(le.b.CategoryItem,{fxDirection:"row",alignItems:"center",padding:"0 2px 0 12px",gap:2,children:[(null===o||void 0===o||null===(t=o.parent)||void 0===t?void 0:t.label)&&"".concat(null===o||void 0===o||null===(i=o.parent)||void 0===i?void 0:i.label,"/"),"".concat(null===o||void 0===o?void 0:o.label)]}),d]})},ve=t(7762),fe=t(3433),pe=t(1771),he=t(4809),me=t(2825),xe=["onClose","title","defaultState","onSubmit","updateId","offer","template","onSelect","onChange"],ge=(0,c.ZP)(C.ZP)(l||(l=(0,u.Z)(["\n  padding-bottom: 8px;\n"]))),be=function(e){var n=e.onClose,t=(e.title,e.defaultState,e.onSubmit),i=e.updateId,o=e.offer,r=(e.template,e.onSelect,e.onChange,(0,Q.Z)(e,xe)),l=(0,k.G2)(o),a=(0,R.i7)(),d=(0,y.xc)()[y.EJ.offers],u=(0,p.useMemo)((function(){if(null===l||void 0===l||!l.template){var e,n,t,i,o=null===l||void 0===l||null===(e=l.properties)||void 0===e||null===(n=e[0])||void 0===n||null===(t=n.path)||void 0===t||null===(i=t.split("."))||void 0===i?void 0:i[0];return o?{_id:o}:void 0}return null===l||void 0===l?void 0:l.template}),[null===l||void 0===l?void 0:l.properties,null===l||void 0===l?void 0:l.template]),c=(0,p.useState)(),v=(0,s.Z)(c,2),f=v[0],h=v[1],m=(0,p.useState)(!1),g=(0,s.Z)(m,2),b=g[0],C=g[1],Z=(0,p.useState)([]),w=(0,s.Z)(Z,2),P=w[0],S=w[1],I=(0,p.useMemo)((function(){var e;return(0,x.sK)(null===l||void 0===l||null===(e=l.properties)||void 0===e?void 0:e.map((function(e){return e._id})))}),[null===l||void 0===l?void 0:l.properties]);(0,p.useEffect)((function(){null!==I&&void 0!==I&&I.length&&S(I)}),[]);var D=(0,p.useMemo)((function(){var e,n;if(null!==f&&void 0!==f&&null!==(e=f.childrenList)&&void 0!==e&&e.length)return null===f||void 0===f?void 0:f.childrenList.filter((function(e){return!e.isSelectable}));var t=null===f||void 0===f?void 0:f._id;if(t){var i=[],o=null===(n=a.propertiesKeysMap)||void 0===n?void 0:n[t];if(o){var r,l=(0,ve.Z)(o);try{for(l.s();!(r=l.n()).done;){var d,u=r.value,s=null===(d=a.propertiesDataMap)||void 0===d?void 0:d[u];if(s&&(null===s||void 0===s||!s.isSelectable)){var c=a.propertiesKeysMap[null===s||void 0===s?void 0:s._id];null!==c&&void 0!==c&&c.length&&i.push(s)}}}catch(v){l.e(v)}finally{l.f()}return i}}}),[null===f||void 0===f?void 0:f._id,null===f||void 0===f?void 0:f.childrenList,a.propertiesDataMap,a.propertiesKeysMap]),O=(0,p.useMemo)((function(){var e;return(null===(e=(0,x.sK)(I))||void 0===e?void 0:e.join(","))!==(0,x.sK)(P).join(",")}),[I,P]),A=(0,p.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var o=null!==i&&void 0!==i?i:null===l||void 0===l?void 0:l._id;o?d.updateById({data:{data:{_id:o,data:{propertiesIds:P,templateId:null===f||void 0===f?void 0:f._id}}},onLoading:C,onSuccess:function(e,t){pe.kl.success("Offer updated"),n&&n()}}):console.debug("selectedIds",P),t&&t(P)}),[null===l||void 0===l?void 0:l._id,null===f||void 0===f?void 0:f._id,n,t,P,d,i]),B=(0,p.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";S((function(e){return e.includes(n)?e.filter((function(e){return e!==n})):[].concat((0,fe.Z)(e),[n])}))}),[]),_=(0,p.useMemo)((function(){return null===D||void 0===D?void 0:D.map((function(e){return(0,M.jsx)(he.Z,{item:e,selectedIds:P,onSelect:B},"prop_".concat(e._id))}))}),[D,P,B]);return(0,p.useEffect)((function(){null!==l&&void 0!==l&&l.properties&&S(null===l||void 0===l?void 0:l.properties.map((function(e){return e._id})))}),[null===l||void 0===l?void 0:l.properties]),(0,M.jsxs)(W.dF,(0,j.Z)((0,j.Z)({onSubmit:A},r),{},{children:[(0,M.jsx)(W.OX,{onBackPress:n,canSubmit:O,title:(0,U.t)("Properties"),okButton:!0}),(0,M.jsx)(me.c,{onSelect:h,filterValue:{isSelectable:!1},selected:f,defaultValue:u}),(0,M.jsx)(ge,{flex:1,padding:"0 8px",overflow:"auto",children:_}),(0,M.jsx)(W.AT,{canSubmit:O,loading:b,submitButtonText:b?"Loading...":"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]}))},Ce=function(e){var n=e.item,t=e.selectedIds,i=e.items,o=(0,p.useMemo)((function(){var e,o=null!==i&&void 0!==i&&i.length?i:null===(e=n.childrenList)||void 0===e?void 0:e.filter((function(e){return null===t||void 0===t?void 0:t.includes(e._id)}));return null===o||void 0===o?void 0:o.map((function(e,n){return(0,M.jsx)(le.b.CategoryItem,{className:"PROP_VALUE",maxWidth:"130px",children:e.label},"prop-v-".concat(e._id))}))}),[n.childrenList,t,i]);return(0,M.jsxs)(C.ZP,{className:"PROPERTY",gap:8,alignItems:"flex-end",children:[(0,M.jsx)(C.ZP,{alignItems:"center",fxDirection:"row",fillWidth:!0,gap:8,children:(0,M.jsx)(le.b.CellText,{$size:13,$weight:600,children:null===n||void 0===n?void 0:n.label})}),(0,M.jsx)(C.ZP,{fxDirection:"row",flexWrap:"wrap",fillWidth:!0,gap:6,children:o&&(null===o||void 0===o?void 0:o.length)>0?o:(0,M.jsx)(g.x,{$size:12,children:"---"})})]})},Ze=["propertiesList","valuesListMap"],je=t(1251),we=t(9069),Pe=function(e){var n=e.onSelect,t=e.withActions,i=(e.selected,e.types),o=(0,p.useState)(!1),r=(0,s.Z)(o,1)[0],l=(0,R.q$)(re.cA.CONTRACTORS).directory,a=(0,p.useMemo)((function(){return l.filter((function(e){return i&&i.includes(e.type)}))}),[l,i]),d=(0,p.useMemo)((function(){return{tableData:a,tableTitles:we.PU,onRowClick:function(e){if(n){if(null!==e&&void 0!==e&&e.rowData)return void n((0,V.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e.rowId&&n({_id:null===e||void 0===e?void 0:e.rowId})}},actionsCreator:t?function(e){return[]}:void 0}}),[a,n,t]);return(0,M.jsx)(S.ZP,(0,j.Z)({hasSearch:!1,isLoading:r},d))},ye=function(e){return e.CUSTOMER="CUSTOMER",e.SUPPLIER="SUPPLIER",e.EMPLOYEE="EMPLOYEE",e.CONTRACTOR="CONTRACTOR",e.SUB_CONTRACTOR="SUB_CONTRACTOR",e.COMMISSION_AGENT="COMMISSION_AGENT",e.CONSIGNOR="CONSIGNOR",e.TRANSPORTER="TRANSPORTER",e.DELIVER="DELIVER",e}({}),Se=function(e){var n,t=e.onSelect,i=e.selected,o=(e.withActions,(0,y.xc)().warehouses),r=(0,D.un)(),l=(0,R.eO)().list,a=(0,p.useCallback)((function(){o.getAll({onLoading:r.onLoading("warehouses"),data:{refresh:!0}})}),[r,o]);(0,p.useEffect)((function(){a()}),[]);var d=(0,p.useMemo)((function(){return{tableData:l,tableTitles:T.A7,onRowClick:function(e){if(t){if(null!==e&&void 0!==e&&e.rowData)return void t((0,x.rE)(null===e||void 0===e?void 0:e.rowData));null!==e&&void 0!==e&&e.rowId&&t({_id:null===e||void 0===e?void 0:e.rowId})}},actionsCreator:function(e){return[{icon:"refresh",onClick:a}]}}}),[a,t,l]);return(0,M.jsx)(S.ZP,(0,j.Z)((0,j.Z)({hasSearch:!1},d),{},{isLoading:null===(n=r.isLoading)||void 0===n?void 0:n.warehouses,selectedRow:i}))},Ie=function(e){return e.price="price",e.variation="variation",e.warehouse="warehouse",e.inventory="inventory",e.supplier="supplier",e}({}),ke=(0,x.H1)(Ie);function De(e){var n=new Map;return ke.forEach((function(t){var i=t.value;if(i){var o=i?null===e||void 0===e?void 0:e[i]:void 0;o&&n.set(i,(0,x.rE)(o))}})),(0,x.$i)(n.entries())}var Oe=c.ZP.form(a||(a=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  flex: 1;\n\n  padding: 0 8px;\n\n  width: 480px;\n  max-width: 100%;\n\n  height: 100%;\n\n  background-color: ",";\n"])),(function(e){return e.theme.modalBackgroundColor})),Ae=(0,c.ZP)(C.ZP)(d||(d=(0,u.Z)(["\n  border-top: 1px solid ",";\n\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor}),(function(e){return e.theme.modalBorderColor})),Be=function(e){var n,t=e.onClose,i=(e.onSubmit,(0,F.J)()),o=null===(n=(0,k.Zx)())||void 0===n?void 0:n.offerId,r=(0,k.G2)({_id:o}),l=(0,y.xc)()[y.EJ.offers],a=(0,p.useState)(0),d=(0,s.Z)(a,2),u=d[0],c=d[1],v=(0,k.hN)({defaultValues:r?De(r):void 0}),f=v.setValue,h=v.getValues,g=v.formValues,C=v.handleSubmit,w=(0,p.useCallback)((function(e){var n=ke[u].value;n&&f(n,e)}),[u,f]),P=(0,p.useMemo)((function(){var e;return e={},(0,m.Z)(e,Ie.warehouse,(function(){return(0,M.jsx)(Se,{withActions:!0,onSelect:w,selected:h("warehouse")})})),(0,m.Z)(e,Ie.price,(function(){return console.log("getValues('price')",h("price")),(0,M.jsx)(L,{withActions:!0,onSelect:w,selected:h("price")})})),(0,m.Z)(e,Ie.variation,(function(){return(0,M.jsx)(Z.Z,{withActions:!0,onSelect:w,selected:h("variation")})})),(0,m.Z)(e,Ie.inventory,(function(){return(0,M.jsx)(N,{withActions:!0,onSelect:w,selected:h("inventory")})})),(0,m.Z)(e,Ie.supplier,(function(){return(0,M.jsx)(Pe,{withActions:!0,types:[ye.SUPPLIER],onSelect:w,selected:h("supplier")})})),e}),[h,w]),S=(0,p.useMemo)((function(){var e,n,t=null===ke||void 0===ke||null===(e=ke[u])||void 0===e?void 0:e.value,i=t&&null!==(n=P[t])&&void 0!==n?n:null;return i?(0,M.jsx)(i,{}):null}),[u,P]),I=(0,p.useMemo)((function(){var e,n=null===ke||void 0===ke||null===(e=ke[u])||void 0===e?void 0:e.value;return!!n&&function(e){var n="".concat(e,"._id"),t=oe().get(g,n);return!!t&&t!==oe().get(r,n)}(n)}),[u,g,r]);return(0,M.jsx)(D.f4,{value:i,children:(0,M.jsxs)(Oe,{onSubmit:C((function(e){(null===r||void 0===r?void 0:r._id)&&l.updateById({data:{data:(0,j.Z)({_id:null===r||void 0===r?void 0:r._id},(0,x.vg)(e))},onSuccess:function(e,n){console.log(e,n)},onLoading:i.onLoading("submiting")})})),children:[(0,M.jsx)(W.OX,{onBackPress:t,title:(0,U.t)("Default values"),canSubmit:I}),(0,M.jsx)(b.Z,{optionProps:{fitContentH:!0},options:ke,currentIndex:u,onChangeIndex:c}),(0,M.jsx)(Ae,{flex:1,fillWidth:!0,overflow:"hidden",children:S}),(0,M.jsx)(je.ze,{loading:i.hasLoading,canSubmit:I})]})})},_e=t(3299);var Me,Le,Te,Ee,Re,Ve,Ne,He=t(4717),Fe=t(8926),We=(0,c.ZP)(C._0)(Me||(Me=(0,u.Z)(["\n  flex: 1;\n\n  width: 100%;\n  max-width: 480px;\n\n  padding: 0 8px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.sideBarBackgroundColor})),$e=function(e){var n=e.onClose,t=e.offer,i=(0,k.G2)(t),o=(0,y.xc)()[y.EJ.offers],r=(0,p.useState)((null===i||void 0===i?void 0:i.images)||[]),l=(0,s.Z)(r,2),a=l[0],d=l[1],u=(0,p.useState)(!1),v=(0,s.Z)(u,2),f=v[0],h=v[1],m=(0,c.Fg)();return(0,M.jsx)(We,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),i&&o.updateById({data:{data:(0,j.Z)((0,j.Z)({},(0,x.rE)(i)),{},{data:{images:a}})},onSuccess:function(){n&&n()},onLoading:h})},children:(0,M.jsx)(Fe.Z,{initialData:a,onClose:n,onlyPreviews:!1,onChangeState:d,contentContainerStyle:{flex:1,borderTop:"1px solid ".concat(m.sideBarBorderColor),borderBottom:"1px solid ".concat(m.sideBarBorderColor)},renderHeader:(0,M.jsx)(W.OX,{title:"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",onBackPress:n,okButton:!0,canSubmit:a.length>0}),FooterComponent:function(e){return(0,M.jsx)(W.AT,{onCreatePress:e.onAddNewImageSetPress,loading:f,canSubmit:a.length>0})}})})},Ue=t(4897),ze=t(7802),Ge=t(459),Ke=t(2603),Je=["onClose","title","defaultState","onSubmit","updateId","offer","template","onSelect","onChange"],qe=(0,c.ZP)(C.ZP)(Le||(Le=(0,u.Z)(["\n  padding: 16px 8px;\n"]))),Xe=function(e){var n,t=e.onClose,i=(e.title,e.defaultState,e.onSubmit),o=e.updateId,r=e.offer,l=(e.template,e.onSelect,e.onChange,(0,Q.Z)(e,Je)),a=(0,k.G2)(r),d=(0,R.n6)(),u=(0,B.TL)(),c=(0,y.xc)()[y.EJ.offers],v=(0,p.useMemo)((function(){var e;return(0,x.sK)(null===a||void 0===a||null===(e=a.tags)||void 0===e?void 0:e.map((function(e){return e._id})))}),[null===a||void 0===a?void 0:a.tags]),f=(0,p.useState)(!1),h=(0,s.Z)(f,2),m=h[0],g=h[1],b=(0,p.useState)(v),C=(0,s.Z)(b,2),Z=C[0],w=C[1],P=(0,p.useMemo)((function(){return(null===v||void 0===v?void 0:v.join(","))!==(0,x.sK)(Z).join(",")}),[v,Z]),S=(0,p.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var n=null!==o&&void 0!==o?o:null===a||void 0===a?void 0:a._id;n?c.updateById({data:{data:{_id:n,data:{tagsIds:Z}}},onLoading:g,onSuccess:function(e,n){pe.kl.success("Offer updated"),t&&t()}}):console.debug("selectedIds",Z),i&&i(Z)}),[null===a||void 0===a?void 0:a._id,t,i,Z,c,o]);return(0,p.useEffect)((function(){var e;null!==(e=d.listsMap.OFFER)&&void 0!==e&&e.length||u((0,Ge.Sn)({params:{type:Ke.h.OFFER}}))}),[u,d.list.length,null===(n=d.listsMap.OFFER)||void 0===n?void 0:n.length]),(0,M.jsxs)(W.dF,(0,j.Z)((0,j.Z)({onSubmit:S},l),{},{children:[(0,M.jsx)(W.OX,{onBackPress:t,canSubmit:P,title:(0,U.t)("Tags"),okButton:!0}),(0,M.jsx)(qe,{flex:1,padding:"0 8px",overflow:"auto",children:(0,M.jsx)(ze.Z,{options:d.listsMap.OFFER,value:Z,multiple:!0,onChangeIds:function(e){(0,ie.isArray)(e.value)&&w(e.value)}})}),(0,M.jsx)(W.AT,{canSubmit:P,loading:m,submitButtonText:(0,U.t)("Confirm")})]}))},Ye=["className"],Qe=["CellComponent"],en=function(e){return e.General="General",e.Properties="Properties",e.Defaults="Defaults",e.Images="Images",e.Futures="Futures",e.Cms="Cms",e}({}),nn=(0,x.H1)(en),tn=(0,c.ZP)(C.ZP)(Te||(Te=(0,u.Z)(["\n  position: relative;\n  overflow: hidden;\n\n  background-color: ",";\n"])),(function(e){return e.theme.sideBarBackgroundColor})),on=(0,c.ZP)(C.ZP)(Ee||(Ee=(0,u.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),rn=(0,c.ZP)(C.ZP)(Re||(Re=(0,u.Z)([""]))),ln=(0,c.ZP)(ee.ZP)(Ve||(Ve=(0,u.Z)(["\n  fill: ",";\n"])),(function(e){return e.theme.globals.colors.error})),an=(0,c.ZP)(ee.ZP)(Ne||(Ne=(0,u.Z)(["\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n"]))),dn=[{title:(0,U.t)("Label"),getValue:function(e){return null===e||void 0===e?void 0:e.label},gridArea:"label",tab:en.General},{title:(0,U.t)("status"),getValue:function(e){return null===e||void 0===e?void 0:e.approved},gridArea:"approved",tab:en.General},{title:(0,U.t)("Type"),getValue:function(e){return null===e||void 0===e?void 0:e.type},gridArea:"type",tab:en.General},{title:(0,U.t)("SKU"),getValue:function(e){return null===e||void 0===e?void 0:e.sku},gridArea:"sku",tab:en.General},{title:(0,U.t)("Bar-code"),getValue:function(e){return null===e||void 0===e?void 0:e.barCode},gridArea:"barCode",tab:en.General},{title:(0,U.t)("Categories"),CellComponent:function(e){var n=e.cell,t=e.data,i=(0,ne.on)(),o=(0,I.kw)(),r=(0,R.q$)(re.cA.CATEGORIES_PROD).directory,l=(0,p.useMemo)((function(){var e,n;return null!==(e=null===t||void 0===t||null===(n=t.categories)||void 0===n?void 0:n.map((function(e){return e._id})))&&void 0!==e?e:[]}),[null===t||void 0===t?void 0:t.categories]),a=(0,p.useMemo)((function(){return r.map((function(e){return(0,M.jsx)(ce,{selectedIds:l,item:e},"cat_".concat(e._id))}))}),[r,l]);return(0,M.jsxs)(le.b.Cell,{style:{minHeight:"max-content"},children:[(0,M.jsx)(ae.z,{title:null===n||void 0===n?void 0:n.title,openOverlayButtonTitle:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438",onOpenOverlayPress:function(){i.create?i.create(se):o.create(se)}}),(0,M.jsx)(C.ZP,{fillWidth:!0,fxDirection:"row",justifyContent:"flex-end",flexWrap:"wrap",gap:8,style:{height:"max-content",minHeight:26},children:a})]})},gridArea:"categories",tab:en.Properties},{title:(0,U.t)("Properties"),CellComponent:function(e){var n,t=e.cell,i=e.overlayHandler,o=e.data,r=(0,R.i7)(),l=(0,k.G2)(o),a=(0,p.useMemo)((function(){var e,n,t={},i=new Set([]),o={},a=new Set([]),d=(0,ve.Z)(null!==(e=null===l||void 0===l?void 0:l.properties)&&void 0!==e?e:[]);try{for(d.s();!(n=d.n()).done;){var u,s=n.value,c=null===(u=s.parent)||void 0===u?void 0:u._id;if(c){var v,f,p=c?null===(v=r.propertiesDataMap)||void 0===v?void 0:v[c]:void 0;i.add(c),p&&(t[c]=p);var h=s._id;a.add(h);var m=h&&(null===(f=r.propertiesDataMap)||void 0===f?void 0:f[h])||s;o[c]||(o[c]=[]),o[c].push(m)}}}catch(x){d.e(x)}finally{d.f()}return{properties:i,values:a,propertiesList:Object.values(t),valuesListMap:o}}),[null===l||void 0===l?void 0:l.properties,r.propertiesDataMap]),d=a.propertiesList,u=a.valuesListMap,s=(0,Q.Z)(a,Ze),c=(0,p.useMemo)((function(){return null===d||void 0===d?void 0:d.map((function(e,n){var t=u[e._id];return(0,M.jsx)(Ce,{index:n,overlayHandler:i,item:e,items:t,data:o},"prop-".concat(null===e||void 0===e?void 0:e._id))}))}),[d,i,u,o]);return(0,M.jsxs)(le.b.Cell,{padding:"4px 4px 8px",gap:8,className:"PROPERTIES_LIST_CELL",style:{minHeight:c&&(null===c||void 0===c?void 0:c.length)>0?"max-content":50},children:[(0,M.jsx)(ae.z,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){i({RenderComponent:be,props:{offer:o}})}}),(0,M.jsx)(C.ZP,{fillWidth:!0,gap:8,alignItems:c&&(null===c||void 0===c?void 0:c.length)>0?"stretch":"flex-end",children:null!==(n=s.properties)&&void 0!==n&&n.size?c:(0,M.jsx)(le.b.CellText,{$weight:500,children:(0,U.t)("undefined")})})]})},gridArea:"properties",tab:en.Properties},{title:(0,U.t)("Tags"),CellComponent:function(e){var n,t=e.cell,i=e.overlayHandler,o=e.data,r=(0,k.G2)(o),l=(0,p.useMemo)((function(){var e;return null===r||void 0===r||null===(e=r.tags)||void 0===e?void 0:e.map((function(e,n){return(0,M.jsx)(le.b.CategoryItem,{className:"TagItem",width:"fit-content",maxWidth:"130px",children:e.label},"prop-v-".concat(e._id))}))}),[null===r||void 0===r?void 0:r.tags]);return(0,M.jsxs)(le.b.Cell,{padding:"4px 4px 8px",gap:8,className:"TAGS_LIST_CELL",style:{minHeight:"max-content"},children:[(0,M.jsx)(ae.z,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){i({RenderComponent:Xe,props:{offer:o}})}}),(0,M.jsx)(C.ZP,{fillWidth:!0,gap:8,fxDirection:"row",alignItems:"stretch",children:null!==r&&void 0!==r&&null!==(n=r.tags)&&void 0!==n&&n.length?l:(0,M.jsx)(le.b.CellText,{$weight:500,children:(0,U.t)("undefined")})})]})},gridArea:"tags",tab:en.Properties},{title:(0,U.t)("Brand"),getValue:function(e){var n;return null===e||void 0===e||null===(n=e.brand)||void 0===n?void 0:n.label},gridArea:"brand",tab:en.General},{title:(0,U.t)("Measurement"),gridArea:"measurement",getValue:function(e){try{var n=(0,ie.isString)(null===e||void 0===e?void 0:e.measurement)?JSON.parse(null===e||void 0===e?void 0:e.measurement):null===e||void 0===e?void 0:e.measurement;return["".concat((0,U.t)("unit"),": ").concat((null===n||void 0===n?void 0:n.unit)||0),"".concat((0,U.t)("min"),": ").concat((null===n||void 0===n?void 0:n.min)||0),"".concat((0,U.t)("max"),": ").concat((null===n||void 0===n?void 0:n.max)||0),"".concat((0,U.t)("step"),": ").concat((null===n||void 0===n?void 0:n.step)||0)].join(" | ")}catch(t){return""}},tab:en.General},{title:(0,U.t)("Description"),getValue:function(e){return null===e||void 0===e?void 0:e.description},gridArea:"description",tab:en.General},{title:(0,U.t)("Has variations"),getValue:function(e){var n;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&n.hasVariations?"Yes":"No"},gridArea:"hasVariations",tab:en.Futures},{title:(0,U.t)("Has inventories"),getValue:function(e){var n;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&n.hasInventories?"Yes":"No"},gridArea:"hasInventories",tab:en.Futures},{title:(0,U.t)("Negative sales"),getValue:function(e){var n;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&n.negativeSale?"Yes":"No"},gridArea:"reservation",tab:en.Futures},{title:(0,U.t)("Has items"),getValue:function(e){var n;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&n.hasItems?"Yes":"No"},gridArea:"hasItems",tab:en.Futures},{title:(0,U.t)("Reservation"),getValue:function(e){var n,t;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(t=n.reservation)&&void 0!==t&&t.isAvailable?"Yes":"No"},gridArea:"reservation",tab:en.Futures},{title:(0,U.t)("Custom production"),getValue:function(e){var n,t;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(t=n.customProduction)&&void 0!==t&&t.isAvailable?"Yes":"No"},gridArea:"customProduction",tab:en.Futures},{title:(0,U.t)("Custom order"),getValue:function(e){var n,t;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(t=n.customOrder)&&void 0!==t&&t.isAvailable?"Yes":"No"},gridArea:"customOrder",tab:en.Futures},{title:(0,U.t)("Pre-order"),getValue:function(e){var n,t;return null!==e&&void 0!==e&&null!==(n=e.futures)&&void 0!==n&&null!==(t=n.preOrder)&&void 0!==t&&t.isAvailable?"Yes":"No"},gridArea:"preOrder",tab:en.Futures},{title:(0,U.t)("Default values"),CellComponent:function(e){var n=e.data,t=e.cell,i=(e.overlayHandler,(0,c.Fg)()),o=null===n||void 0===n?void 0:n.warehouse,r=null===n||void 0===n?void 0:n.supplier,l=null===n||void 0===n?void 0:n.price,a=(0,ne.on)(),d=(0,I.kw)(),u=(0,p.useMemo)((function(){var e,t=null===n||void 0===n?void 0:n.variation;return[{title:(0,U.t)("Label"),value:null===t||void 0===t?void 0:t.label},{title:(0,U.t)("Bar-code"),value:null===t||void 0===t?void 0:t.barCode},{title:(0,U.t)("SKU"),value:null===t||void 0===t?void 0:t.sku},{title:(0,U.t)("Props q-ty"),value:null===t||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.length}].map((function(e,n){var t;return(0,M.jsxs)(C.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(g.x,{$size:14,children:"".concat(null===e||void 0===e?void 0:e.title,": ")}),(0,M.jsx)(g.x,{$size:14,$weight:600,$align:"right",children:null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:"---"})]},null===e||void 0===e?void 0:e.title)}))}),[null===n||void 0===n?void 0:n.variation]),s=(0,p.useMemo)((function(){return function(e){var n,t,i,o,r,l;return[{title:(0,U.t)("Input"),amount:(0,_e.pU)(null===e||void 0===e?void 0:e.in)},{title:(0,U.t)("Output"),amount:(0,_e.pU)(null===e||void 0===e?void 0:e.out)},{title:(0,U.t)("Commission"),amount:(0,_e.pU)(null===e||void 0===e||null===(n=e.commission)||void 0===n?void 0:n.amount),percentage:null!==e&&void 0!==e&&null!==(t=e.commission)&&void 0!==t&&t.percentage?(0,_e.pU)(null===e||void 0===e||null===(i=e.commission)||void 0===i?void 0:i.percentage):void 0},{title:(0,U.t)("Markup"),amount:(0,_e.pU)(null===e||void 0===e||null===(o=e.markup)||void 0===o?void 0:o.amount),percentage:null!==e&&void 0!==e&&null!==(r=e.markup)&&void 0!==r&&r.percentage?(0,_e.pU)(null===e||void 0===e||null===(l=e.markup)||void 0===l?void 0:l.percentage):void 0}]}(l).map((function(e,n){return(0,M.jsxs)(C.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(g.x,{children:"".concat(null===e||void 0===e?void 0:e.title,": ")}),(0,M.jsxs)(g.x,{$weight:600,children:[null===e||void 0===e?void 0:e.amount,(null===e||void 0===e?void 0:e.percentage)&&" | ".concat(null===e||void 0===e?void 0:e.percentage,"%")]})]},null===e||void 0===e?void 0:e.title)}))}),[l]);return(0,M.jsxs)(le.b.Cell,{style:{minHeight:"max-content"},children:[(0,M.jsx)(ae.z,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){a.create?a.create(Be):d.create(Be)}}),(0,M.jsxs)(C.ZP,{fillWidth:!0,children:[(0,M.jsx)(le.b.CellText,{$weight:600,style:{color:null===i||void 0===i?void 0:i.fontColorHeader},children:(0,U.t)("warehouse")}),(0,M.jsx)(C.ZP,{fillWidth:!0,flexWrap:"wrap",fxDirection:"row",children:[{label:(0,U.t)("Label"),value:null===o||void 0===o?void 0:o.label},{label:(0,U.t)("Code"),value:null===o||void 0===o?void 0:o.code}].map((function(e){return(0,M.jsxs)(C.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(g.x,{children:"".concat(e.label)}),(0,M.jsx)(g.x,{$weight:600,children:(null===e||void 0===e?void 0:e.value)||"---"})]},e.label)}))})]}),(0,M.jsxs)(C.ZP,{fillWidth:!0,children:[(0,M.jsx)(le.b.CellText,{$weight:600,style:{color:null===i||void 0===i?void 0:i.fontColorHeader},children:(0,U.t)("supplier")}),[{label:(0,U.t)("Label"),value:null===r||void 0===r?void 0:r.label},{label:(0,U.t)("Code"),value:null===r||void 0===r?void 0:r.code}].map((function(e){return(0,M.jsxs)(C.ZP,{fxDirection:"row",justifyContent:"space-between",padding:"4px 6px",gap:6,fillWidth:!0,children:[(0,M.jsx)(g.x,{children:"".concat(e.label)}),(0,M.jsx)(g.x,{$weight:600,children:(null===e||void 0===e?void 0:e.value)||"---"})]},e.label)}))]}),(0,M.jsxs)(C.ZP,{fillWidth:!0,gap:6,children:[(0,M.jsx)(le.b.CellText,{$weight:600,style:{color:null===i||void 0===i?void 0:i.fontColorHeader},children:(0,U.t)("variation")}),(0,M.jsx)(C.ZP,{fillWidth:!0,children:u})]}),(0,M.jsxs)(C.ZP,{fillWidth:!0,gap:6,children:[(0,M.jsx)(le.b.CellText,{$weight:600,style:{color:null===i||void 0===i?void 0:i.fontColorHeader},children:(0,U.t)("price")}),(0,M.jsx)(C.ZP,{fillWidth:!0,children:s})]})]})},gridArea:"defaults",tab:en.Defaults},{title:(0,U.t)("Created by / Date / Time"),getValue:function(e){var n,t;return[{title:"Created by",value:null===e||void 0===e||null===(n=e.author)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.email},{title:"Created at",value:null!==e&&void 0!==e&&e.createdAt&&(0,ie.isString)(null===e||void 0===e?void 0:e.createdAt)?(0,x.M7)(Date.parse(null===e||void 0===e?void 0:e.createdAt)):""}].map((function(e){var n,t;return(0,M.jsxs)(C.ZP,{gap:4,fillWidth:!0,justifyContent:"space-between",fxDirection:"row",children:[(0,M.jsx)(g.x,{children:null!==(n=e.title)&&void 0!==n?n:(0,U.t)("undefined")}),(0,M.jsx)(g.x,{children:null!==(t=e.value)&&void 0!==t?t:(0,U.t)("undefined")})]},e.title)}))},gridArea:"created",tab:en.General},{title:(0,U.t)("Updated by / Date / Time"),getValue:function(e){var n,t;return[{title:"Updated by",value:null===e||void 0===e||null===(n=e.editor)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.email},{title:"Updated at",value:null!==e&&void 0!==e&&e.updatedAt&&(0,ie.isString)(null===e||void 0===e?void 0:e.updatedAt)?(0,x.M7)(Date.parse(null===e||void 0===e?void 0:e.updatedAt)):""}].map((function(e){var n,t;return(0,M.jsxs)(C.ZP,{gap:4,fillWidth:!0,justifyContent:"space-between",fxDirection:"row",children:[(0,M.jsx)(g.x,{children:null!==(n=e.title)&&void 0!==n?n:(0,U.t)("undefined")}),(0,M.jsx)(g.x,{children:null!==(t=e.value)&&void 0!==t?t:(0,U.t)("undefined")})]},e.title)}))},gridArea:"updated",tab:en.General},{title:(0,U.t)("Images"),CellComponent:function(e){var n=e.data,t=e.cell,i=e.overlayHandler,o=(0,p.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.images)||void 0===e?void 0:e.map((function(e,n){return(0,M.jsx)(le.b.ImagesSetBox,{minHeight:"max-content",fxDirection:"row",gap:8,overflow:"auto",children:Ue.E_.map((function(n){return n.value&&(0,M.jsx)(He.Z,{title:n.label,src:e[n.value]||"",disabled:!0},"img_".concat(n.value))}))},"set_".concat((null===e||void 0===e?void 0:e._id)||n))}))}),[null===n||void 0===n?void 0:n.images]);return(0,M.jsxs)(le.b.Cell,{style:{minHeight:"max-content",padding:"4px 0"},children:[(0,M.jsx)(ae.z,{title:null===t||void 0===t?void 0:t.title,onOpenOverlayPress:function(){i({RenderComponent:$e,props:{offer:n}})}}),(0,M.jsx)(C.ZP,{gap:8,height:"max-content",padding:"8px 0",style:{minHeight:26},children:o})]})},gridArea:"images",tab:en.Images}];var un,sn,cn=function(e){var n,t=e.className,i=(0,Q.Z)(e,Ye),o=(0,k.xj)(),r=(0,h.rh)().currentOffer,l=(0,ne.on)(),a=function(){var e={};return dn.forEach((function(n){var t,i=n.tab;i&&(e[i]?null===(t=e[i])||void 0===t||t.push(n):e[i]=[n])})),e}(),d=(0,p.useState)(en.General),u=(0,s.Z)(d,2),c=u[0],v=u[1],f=(0,p.useMemo)((function(){var e;return a[c]?null===(e=a[c])||void 0===e?void 0:e.map((function(e){var n=e.CellComponent,t=(0,Q.Z)(e,Qe);return n?(0,M.jsx)(n,{overlayHandler:l.open,cell:t,data:r},t.title):(0,M.jsx)(te.U,{overlayHandler:l.open,cell:t,data:r},t.title)})):null}),[a,c,l.open,r]);return(0,M.jsxs)(tn,{fillWidth:!0,flex:1,className:t,padding:"0 8px",children:[(0,M.jsx)(W.OX,{title:(0,U.t)("Offer overview"),onBackPress:o.goBack}),(0,M.jsx)(b.Z,{optionProps:{fitContentH:!0},options:nn,onOptSelect:function(e){o.replace({hash:null===e||void 0===e?void 0:e.value}),(null===e||void 0===e?void 0:e.value)&&v(null===e||void 0===e?void 0:e.value)}}),(0,M.jsx)(on,{fillWidth:!0,flex:1,overflow:"auto",children:f}),(0,M.jsxs)(rn,{fillWidth:!0,fxDirection:"row",gap:6,padding:"6px 0",children:[(0,M.jsx)(ee.ZP,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"edit",disabled:!(null!==i&&void 0!==i&&i.onEdit),onClick:null===i||void 0===i?void 0:i.onEdit}),(0,M.jsx)(ee.ZP,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:null!==i&&void 0!==i&&null!==(n=i.product)&&void 0!==n&&n.visible?"visibilityOn":"visibilityOff",disabled:!(null!==i&&void 0!==i&&i.onHide),onClick:null===i||void 0===i?void 0:i.onHide}),(0,M.jsx)(ln,{variant:"onlyIcon",size:"36px",iconSize:"85%",icon:"delete",disabled:!(null!==i&&void 0!==i&&i.onDelete),onClick:null===i||void 0===i?void 0:i.onDelete}),(0,M.jsxs)(C.ZP,{fxDirection:"row",gap:6,margin:"0 0 0 auto",children:[(0,M.jsx)(ee.ZP,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"refresh",disabled:!(null!==i&&void 0!==i&&i.onRefresh),onClick:null===i||void 0===i?void 0:i.onRefresh}),(0,M.jsx)(an,{size:"36px",variant:"onlyIcon",iconSize:"85%",icon:"SmallArrowLeft",disabled:!(null!==i&&void 0!==i&&i.onOpenRightSide),onClick:null===i||void 0===i?void 0:i.onOpenRightSide})]})]})]})},vn=t(3185),fn=(0,c.ZP)(C.ZP)(un||(un=(0,u.Z)(["\n  position: relative;\n\n  overflow: hidden;\n\n  border-right: 1px solid ",";\n"])),(function(e){return e.theme.modalBorderColor})),pn=function(e){var n=e.toggleRightSideVisibility,t=(0,h.rh)(),i=hn(),o=(0,I.f9)(),r=(0,y.xc)().offers;return(0,M.jsxs)(fn,{children:[(0,M.jsx)(cn,{product:null===t||void 0===t?void 0:t.currentOffer,onEdit:function(){t.currentOffer&&o.openModal({Modal:vn.n.EditOffer,props:{offer:null===t||void 0===t?void 0:t.currentOffer,title:(0,U.t)("Edit offer")}})},onRefresh:function(){var e,n;null!==(e=t.currentOffer)&&void 0!==e&&e._id&&r.getOne({data:{params:{_id:null===(n=t.currentOffer)||void 0===n?void 0:n._id,getPrices:!1,getVariations:!1}},onLoading:i.onLoading("offer")})},onOpenRightSide:n}),(0,M.jsx)(Y.j,{})]})},hn=function(){return(0,D.un)()},mn=c.ZP.div(sn||(sn=(0,u.Z)(["\n  display: grid;\n  grid-template-columns: minmax(220px, 1fr) 0;\n\n  ",";\n\n  //@media screen and (max-width: 768px) {\n  //}\n  @media screen and (min-width: 768px) {\n    grid-template-columns: minmax(360px, 1fr) 2fr;\n  }\n  @media screen and (min-width: 1000px) {\n    grid-template-columns: minmax(360px, 400px) 2fr;\n  }\n"])),v.VU),xn=function(e){var n=e.path,t=(0,F.J)({offer:{content:(0,U.t)("Loading product info")},prices:{content:"Loading prices"},variations:{content:"Loading variations"}}),i=(0,p.useState)(!1),o=(0,s.Z)(i,2),r=o[0],l=o[1],a=(0,p.useCallback)((function(){l((function(e){return!e}))}),[]);return(0,M.jsx)(D.f4,{value:t,children:(0,M.jsx)(h.ZP,{children:(0,M.jsx)(ne.ZP,{children:(0,M.jsx)(f.default,{path:n,children:(0,M.jsxs)(mn,{children:[(0,M.jsx)(pn,{toggleRightSideVisibility:a}),(0,M.jsx)(X,{isVisible:r,toggleVisibility:a})]})})})})})}},3226:function(e,n,t){t.d(n,{rh:function(){return u}});var i=t(2791),o=t(1819),r=t(2989),l=t(3038),a=t(3329),d=(0,i.createContext)({}),u=function(){return(0,i.useContext)(d)};n.ZP=function(e){var n=e.children,t=(0,o.xc)()[o.EJ.offers],u=(0,l.useOfferOverviewLoaders)(),s=(0,r.Zx)(),c=null===s||void 0===s?void 0:s.offerId,v=(0,r.G2)({_id:c});(0,i.useEffect)((function(){var e;null!==u&&void 0!==u&&null!==(e=u.isLoading)&&void 0!==e&&e.offer||c&&t.getOne({data:{params:{_id:c,getVariations:!1,getPrices:!1}},onLoading:u.onLoading("offer")}).catch()}),[c]);return(0,i.useEffect)((function(){return function(){t.clearCurrent(void 0)}}),[]),(0,a.jsx)(d.Provider,{value:{clearCurrent:function(){t.clearCurrent(void 0)},currentOffer:v},children:n})}},8189:function(e,n,t){t.d(n,{Z:function(){return J}});var i,o,r,l=t(1413),a=t(7762),d=t(3226),u=t(3665),s=t(1819),c=t(8839),v=t(2791),f=t(401),p=t(168),h=t(4942),m=t(9439),x=t(4925),g=t(3350),b=t(8095),C=t(7348),Z=t(1500),j=t(1771),w=t(3719),P=t(7121),y=t(8007),S=t(4695),I=t(2989),k=t(4990),D=t(6681),O=t(107),A=t(4809),B=t(9541),_=t(1577),M=t(2825),L=t(9006),T=t(7578),E=t(763),R=t.n(E),V=t(6382),N=t(6492),H=t(3329),F=["onClose","title","onSubmit","updateId","create","offerId","offer"],W=y.object().shape({label:y.string().required().min(5).max(128),sku:y.string().required().min(8).max(32),barCode:y.string().max(32),cms:y.object().shape({labels:y.object().shape({ua:y.string().min(5).max(64),en:y.string().min(5).max(64)})}),propertiesMap:y.object().shape({}).nonNullable().required(),offer:y.object().shape({_id:y.string().required(),label:y.string(),labels:y.object().shape({ua:y.string().min(5).max(64),en:y.string().min(5).max(64)})}),timeFrom:y.date(),timeTo:y.date(),price:y.object().shape({out:y.string()})}),$=[{title:(0,O.t)("Offer label"),name:"label",required:!0,flex:"2 0 100%"},{title:(0,O.t)("SKU"),name:"sku",required:!0,flex:"1 1 40%"},{title:(0,O.t)("Bar-code"),name:"barCode",required:!1,flex:"1 1 40%"}],U=(0,g.ZP)(b._0)(i||(i=(0,p.Z)(["\n  flex: 1;\n  max-height: 100%;\n  height: 100vh;\n\n  width: 100%;\n  //padding: 0 12px;\n\n  overflow: hidden;\n\n  //max-width: 380px;\n  color: ",";\n  background-color: ",";\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.tableBackgroundColor})),z=(0,g.ZP)(b.ZP)(o||(o=(0,p.Z)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor}),(function(e){return e.theme.sideBarBorderColor})),G=(0,g.ZP)(b.ZP)(r||(r=(0,p.Z)(["\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.sideBarBorderColor})),K=function(e){var n,t,i=e.onClose,o=e.title,r=(e.onSubmit,e.updateId),d=(e.create,e.offerId),u=e.offer,c=(0,x.Z)(e,F),f=(0,C.i7)(),p=(0,s.xc)()[s.EJ.offers],g=(0,B.J)(),y=(0,I.EV)({_id:r}),E=(0,I.G2)({_id:(null===y||void 0===y||null===(n=y.offer)||void 0===n?void 0:n._id)||d||(null===u||void 0===u?void 0:u._id)}),K=(0,w.d)(),J=(0,v.useState)(y.template),q=(0,m.Z)(J,2),X=q[0],Y=q[1],Q=(0,I.hN)({defaultValues:(0,Z.Ls)(y?(0,l.Z)((0,l.Z)({},y),{},{offer:E,template:X}):{offer:E,template:X},E),resolver:(0,S.X)(W),reValidateMode:"onSubmit"}),ee=Q.setValue,ne=Q.handleSubmit,te=Q.register,ie=Q.formState.errors,oe=Q.formValues,re=Q.reset,le=(0,v.useMemo)((function(){var e,n,t;if(null!==X&&void 0!==X&&null!==(e=X.childrenList)&&void 0!==e&&e.length)return null===X||void 0===X?void 0:X.childrenList.filter((function(e){var n;return e.isSelectable&&(null===e||void 0===e||null===(n=e.childrenList)||void 0===n?void 0:n.length)}));var i,o=null===X||void 0===X?void 0:X._id,r=[],l=null!==(n=null===(t=f.propertiesKeysMap)||void 0===t?void 0:t[null!==o&&void 0!==o?o:"def"])&&void 0!==n?n:[],d=(0,a.Z)(l);try{for(d.s();!(i=d.n()).done;){var u,s=i.value,c=null===(u=f.propertiesDataMap)||void 0===u?void 0:u[s];if(null!==c&&void 0!==c&&c.isSelectable){var v=f.propertiesKeysMap[null===c||void 0===c?void 0:c._id];null!==v&&void 0!==v&&v.length&&r.push(c)}}}catch(p){d.e(p)}finally{d.f()}return r}),[null===X||void 0===X?void 0:X._id,null===X||void 0===X?void 0:X.childrenList,f.propertiesDataMap,f.propertiesKeysMap]),ae=(0,v.useCallback)((function(e){if(!e)return"".concat(null===E||void 0===E?void 0:E.label,". {{VARIATION_LABEL}}");var n,t=e?(0,Z.sK)(Object.keys(e)):[],i=null!==E&&void 0!==E&&E.label?[null===E||void 0===E?void 0:E.label]:[],o=(0,a.Z)(t);try{for(o.s();!(n=o.n()).done;){var r=e[n.value];(null===r||void 0===r?void 0:r.label)&&i.push(null===r||void 0===r?void 0:r.label)}}catch(d){o.e(d)}finally{o.f()}var l=null!==i&&void 0!==i&&i.length?i.join(". "):(null===y||void 0===y?void 0:y.label)||"".concat(null===E||void 0===E?void 0:E.label,". {{VARIATION_LABEL}}");return ee("label",l),l}),[null===E||void 0===E?void 0:E.label,null===y||void 0===y?void 0:y.label,ee]),de=(0,v.useCallback)((function(e){r?p.updateVariationById({onSuccess:g.onSuccess("update",i),onLoading:g.onLoading("update"),onError:j.kl.toastAxiosError,data:{data:(0,Z.Ts)(e)}}):p.createVariation({onError:j.kl.toastAxiosError,onLoading:g.onLoading("create"),onSuccess:function(e){var n;K.state.close?i&&i():(K.state.clear&&re(),ee("sku",(null!==(n=null===E||void 0===E?void 0:E.sku)&&void 0!==n?n:"")+(0,V.x0)(12)))},data:{data:(0,Z.Ts)(e)}})}),[null===E||void 0===E?void 0:E.sku,g,i,re,p,ee,K.state.clear,K.state.close,r]),ue=(0,v.useCallback)((function(e,n){var t,i=null===(t=oe.propertiesMap)||void 0===t?void 0:t[e];if(i&&i._id===n){var o=R().omit(oe.propertiesMap,e);ee("propertiesMap",o),ae(o)}else{var r,a=null===(r=f.propertiesDataMap)||void 0===r?void 0:r[n];if(a){var d=(0,l.Z)((0,l.Z)({},oe.propertiesMap),{},(0,h.Z)({},e,a));ee("propertiesMap",d),ae(d)}}}),[ae,oe.propertiesMap,ee,f.propertiesDataMap]),se=(0,v.useMemo)((function(){return null!==oe&&void 0!==oe&&oe.propertiesMap?Object.values(null===oe||void 0===oe?void 0:oe.propertiesMap).map((function(e){return e._id})):[]}),[oe]),ce=(0,v.useMemo)((function(){var e,n,t=y.propValuesIdsSet?null===(e=(0,Z.sK)(y.propValuesIdsSet))||void 0===e?void 0:e.join("."):void 0,i=se?null===(n=(0,Z.sK)(se))||void 0===n?void 0:n.join("."):void 0;return!!i&&i!==t}),[y.propValuesIdsSet,se]),ve=(0,v.useMemo)((function(){return null!==oe&&void 0!==oe&&oe.propertiesMap?Object.fromEntries(Object.entries(null===oe||void 0===oe?void 0:oe.propertiesMap).map((function(e){var n=(0,m.Z)(e,2),t=n[0],i=n[1];return[t,null===i||void 0===i?void 0:i._id]}))):{}}),[null===oe||void 0===oe?void 0:oe.propertiesMap]),fe=(0,v.useMemo)((function(){return null===le||void 0===le?void 0:le.map((function(e){var n=ve[e._id];return(0,H.jsx)(A.Z,{item:e,selectedIds:n?[n]:[],onSelect:ue},"prop_".concat(e._id))}))}),[le,ve,ue]);return(0,H.jsx)(_.Z,{fillHeight:!0,onBackPress:i,okButton:!1,title:o||"Create variation",children:(0,H.jsx)(T.f4,{value:g,children:(0,H.jsxs)(U,(0,l.Z)((0,l.Z)({onSubmit:ne(de,(function(e){console.error("[SUBMIT ERROR]",e)}))},c),{},{children:[(0,H.jsxs)(z,{flex:1,fillWidth:!0,overflow:"auto",children:[(0,H.jsx)(L.y,{label:"Offer",hideFooter:!0,isOpen:!1,children:(0,H.jsx)(b.ZP,{className:"Variation_Main_Offer_Info",flexWrap:"wrap",fxDirection:"row",alignItems:"flex-end",style:{columnGap:12},children:$.map((function(e){var n,t=e.name,i=e.title,o=e.flex;return(0,H.jsx)(k.Z,{className:t,flex:o,label:i,disabled:!0,children:(0,H.jsx)(b.ZP,{padding:"4px 8px",minHeight:"32px",children:(0,H.jsx)(N.x,{$weight:600,$size:14,children:null!==(n=null===E||void 0===E?void 0:E[t])&&void 0!==n?n:void 0})})},t)}))})}),(0,H.jsx)(L.y,{label:"Main info",expandable:!1,hideFooter:!0,children:(0,H.jsx)(b.ZP,{className:"Variation_Main_info",flexWrap:"wrap",fxDirection:"row",alignItems:"flex-end",style:{columnGap:12},children:$.map((function(e){var n=e.name,t=e.title,i=e.flex,o=e.required;return(0,H.jsx)(k.Z,{className:n,label:t,error:null===ie||void 0===ie?void 0:ie[n],required:o,flex:i,children:(0,H.jsx)(D.ZP,(0,l.Z)((0,l.Z)({},te(n,{required:o})),{},{placeholder:(0,O.t)("label")}))},n)}))})}),(0,H.jsxs)(L.y,{label:(0,O.t)("Properties"),expandable:!1,hideFooter:!0,children:[(0,H.jsx)(M.c,{onSelect:function(e){ee("template",e),Y(e)},selected:X}),(0,H.jsx)(b.ZP,{padding:"0 8px",children:fe})]})]}),(0,H.jsx)(P.AT,{loading:null===(t=g.isLoading)||void 0===t?void 0:t.create,onGoBackPress:i,submitButtonText:(0,O.t)("Accept"),canSubmit:ce,extraFooter:(0,H.jsx)(G,{children:(0,H.jsx)(w.Z,(0,l.Z)({},K))})})]}))})})},J=function(e){var n,t=e.onSelect,i=e.selected,o=e.withActions,r=void 0===o||o,p=e.offer,h=(0,B.J)(),m=(0,d.rh)(),x=(0,I.G2)(p||(null===m||void 0===m?void 0:m.currentOffer)),g=(0,u.f9)(),b=(0,s.xc)()[s.EJ.offers],C=(0,v.useCallback)((function(e){var n=e.refresh,t=e.update;x&&b.getAllVariations({data:{},params:{offerId:x._id},update:t,refresh:n,onLoading:h.onLoading("variations")})}),[x,h,b]),Z=(0,v.useMemo)((function(){var e,n,t={},i=(0,a.Z)(null!==(e=null===x||void 0===x?void 0:x.variations)&&void 0!==e?e:[]);try{for(i.s();!(n=i.n()).done;){var o,r=n.value.properties,l=(0,a.Z)(null!==r&&void 0!==r?r:[]);try{for(l.s();!(o=l.n()).done;){var d,u=o.value,s=null===u||void 0===u||null===(d=u.parent)||void 0===d?void 0:d._id;s&&u.parent&&(t[s]=u.parent)}}catch(c){l.e(c)}finally{l.f()}}}catch(c){i.e(c)}finally{i.f()}return(0,f.F9)(Object.values(t))}),[null===x||void 0===x?void 0:x.variations]),j=(0,v.useMemo)((function(){return{onRowClick:function(e){t&&null!==e&&void 0!==e&&e.rowData&&t(null===e||void 0===e?void 0:e.rowData)},actionsCreator:r?function(e){var n,t=null===(n=e.selectedRow)||void 0===n?void 0:n._id;return[{icon:"refresh",type:"onlyIcon",onClick:function(){return C({refresh:!0})}},{separator:!0},{icon:"delete",type:"onlyIcon",disabled:!t,onClick:function(){window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0430\u0440\u0456\u0430\u0446\u0456\u044e:\n ".concat(t))}},{icon:"copy",type:"onlyIcon",disabled:!t},{icon:"edit",type:"onlyIcon",disabled:!t,onClick:function(){t&&e.selectedRow&&g.create(K,{updateId:t})}},{separator:!0},{icon:"plus",type:"onlyIconFilled",onClick:function(){g.create(K,{offer:x})}}]}:void 0}}),[x,C,g,t,r]);return(0,v.useEffect)((function(){x&&C({refresh:!0})}),[]),(0,H.jsx)(c.ZP,(0,l.Z)((0,l.Z)({},j),{},{hasSearch:!1,hasFilter:!1,isLoading:null===h||void 0===h||null===(n=h.isLoading)||void 0===n?void 0:n.variations,selectedRow:i,tableData:null===x||void 0===x?void 0:x.variations,tableTitles:Z,transformData:f.m$}))}},8495:function(e,n,t){t.d(n,{SI:function(){return u},VU:function(){return d}});var i,o,r,l=t(168),a=t(3350),d=(0,a.iv)(i||(i=(0,l.Z)(["\n  grid-column: 1/13;\n  grid-row: 1/13;\n"]))),u=(0,a.iv)(o||(o=(0,l.Z)(["\n  width: 100%;\n  height: 100%;\n"])));(0,a.iv)(r||(r=(0,l.Z)(["\n  outline: 1px solid tomato;\n"])))},6753:function(e,n,t){t.d(n,{b:function(){return C}});var i,o,r,l,a,d,u,s=t(168),c=t(3350),v=t(8095),f=t(6492),p=c.ZP.button(i||(i=(0,s.Z)(["\n  display: flex;\n  align-items: center;\n\n  border: 0;\n  background-color: transparent;\n\n  font-family: inherit;\n  font-weight: 600;\n  font-size: 13px;\n  padding: 6px 10px;\n  color: ",";\n\n  cursor: pointer;\n\n  &[disabled] {\n    pointer-events: none;\n    color: ",";\n  }\n"])),(function(e){return e.theme.accentColor.base}),(function(e){return e.theme.modalBorderColor})),h=(0,c.ZP)(v.ZP)(o||(o=(0,s.Z)(["\n  //min-height: 70px;\n  height: max-content;\n  min-height: max-content;\n\n  padding: 0 8px 8px;\n  gap: 4px;\n\n  //overflow: hidden;\n\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"])),(function(e){return e.theme.sideBarBorderColor})),m=(0,c.ZP)(v.ZP)(r||(r=(0,s.Z)(["\n  justify-content: center;\n  align-items: center;\n\n  padding: 4px 8px;\n  min-height: 28px;\n  color: #fcfcfc;\n\n  background-color: ",";\n\n  //background-color: #f1f1f1;\n\n  border-radius: 4px;\n  border: 1px solid ",";\n"])),(function(e){return e.theme.fieldBackgroundColor}),(function(e){return e.theme.modalBorderColor})),x=(0,c.ZP)(f.x)(l||(l=(0,s.Z)(["\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  max-width: 100%;\n\n  color: ",";\n"])),(function(e){return e.$isTitle||e.$disabled?e.theme.globals.inputPlaceholderColor:void 0})),g=(0,c.ZP)(v.ZP)(a||(a=(0,s.Z)(["\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n"]))),b=(0,c.ZP)(v.ZP)(d||(d=(0,s.Z)(["\n  justify-content: center;\n\n  border-radius: 2px;\n  padding: 4px 12px;\n  height: 28px;\n\n  background-color: ",";\n"])),(function(e){return e.theme.fieldBackgroundColor})),C={CategoryItem:(0,c.ZP)(v.ZP)(u||(u=(0,s.Z)(["\n  align-items: center;\n  justify-content: center;\n\n  flex-direction: row;\n\n  padding: 4px 8px;\n\n  font-weight: 500;\n  font-size: 13px;\n  color: ",";\n\n  min-height: 28px;\n\n  border-radius: 2px;\n  //background-color: ",";\n  border: 1px solid ",";\n"])),(function(e){return e.theme.fontColorSidebar}),(function(e){return e.theme.field.backgroundColor}),(function(e){return e.theme.accentColor.base})),ImagesSetBox:g,CellText:x,Tag:m,HeaderButton:p,Cell:h,DefaultTag:b}},4240:function(e,n,t){t.d(n,{z:function(){return a}});var i=t(107),o=t(8095),r=(t(2791),t(6753)),l=t(3329),a=function(e){var n=e.title,t=void 0===n?"Title":n,a=e.openOverlayButtonTitle,d=void 0===a?(0,i.t)("Change"):a,u=e.onOpenOverlayPress,s=e.editButtonText,c=void 0===s?(0,i.t)("Change"):s,v=e.onEditPress,f=e.acceptButtonText,p=void 0===f?(0,i.t)("Ok"):f,h=e.onAcceptPress,m=e.editMode,x=void 0!==m&&m,g=e.canAccept,b=void 0!==g&&g,C=e.cancelButtonText,Z=void 0===C?(0,i.t)("Cancel"):C,j=e.onCancelPress;return(0,l.jsxs)(o.ZP,{fxDirection:"row",justifyContent:"space-between",height:"max-content",alignItems:"center",minHeight:"36px",padding:"4px 0",children:[(0,l.jsx)(r.b.CellText,{$isTitle:!0,$size:13,style:{marginRight:"auto"},children:t}),u&&(0,l.jsx)(r.b.HeaderButton,{type:"button",onClick:u,children:d}),!x&&v&&(0,l.jsx)(r.b.HeaderButton,{type:"button",onClick:v,children:c}),x&&j&&(0,l.jsx)(r.b.HeaderButton,{type:"button",onClick:j,children:Z}),x&&h&&(0,l.jsx)(r.b.HeaderButton,{type:"button",disabled:!b,onClick:h,children:p})]})}},6744:function(e,n,t){t.d(n,{U:function(){return d}});var i=t(8095),o=t(107),r=t(2791),l=t(6753),a=t(3329),d=function(e){var n=e.cell,t=e.data,d=(0,r.useMemo)((function(){return n.getValue?n.getValue(t):null}),[n,t]);return(0,a.jsxs)(l.b.Cell,{children:[(0,a.jsx)(l.b.CellText,{$isTitle:!0,$size:13,$padding:"6px 8px",children:null===n||void 0===n?void 0:n.title}),(0,a.jsx)(i.ZP,{fillWidth:!0,flex:1,fxDirection:"column",gap:8,justifyContent:"flex-end",alignItems:"flex-end",overflow:"hidden",style:{minHeight:32},children:!d||["string","number"].includes(typeof d)?(0,a.jsx)(l.b.CellText,{$isTitle:!d,$weight:500,children:d||(0,o.t)("undefined")}):d})]})}},758:function(e,n,t){t.d(n,{A7:function(){return r},QX:function(){return l},fK:function(){return d}});var i=t(107),o=t(1500),r=[{top:{name:(0,i.t)("label"),getData:function(e){return e.label}},bottom:{name:(0,i.t)("code"),getData:function(e){return e.code}},width:"220px",action:"valueByPath"},{top:{name:(0,i.t)("type"),getData:function(e){return null===e||void 0===e?void 0:e.type}},width:"125px",action:"valueByPath"},{top:{name:(0,i.t)("email"),path:"email"},bottom:{name:(0,i.t)("phone"),path:"phone"},width:"180px",action:"contacts"},{top:{name:(0,i.t)("Address"),getData:function(e){return e.address||"\u043d\u0435 \u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e"}},bottom:{name:"".concat((0,i.t)("longitude"),"/").concat((0,i.t)("latitude")),getData:function(e){var n,t;return"".concat(((null===(n=e.location)||void 0===n?void 0:n.longitude)||"---")+", "+((null===(t=e.location)||void 0===t?void 0:t.latitude)||"---"))}},width:"175px",action:"valueByPath"},{top:{name:(0,i.t)("Manager"),getData:function(e){var n,t;return"".concat((null===(n=e.manager)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.name)||"---")}},bottom:{name:(0,i.t)("email"),getData:function(e){var n,t;return"".concat((null===(n=e.manager)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.email)||"---")}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,i.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}],l=[{top:{name:(0,i.t)("variationLabel"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.label}},getImgPreview:function(e){var n,t,i;return null!==(n=e.offer)&&void 0!==n&&n.images?null===(t=e.offer)||void 0===t||null===(i=t.images[0])||void 0===i?void 0:i.img_preview:""},width:"270px",action:"doubleDataWithAvatar"},{top:{name:(0,i.t)("sku"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.sku}},bottom:{name:(0,i.t)("barCode"),getData:function(e){var n;return null===(n=e.variation)||void 0===n?void 0:n.barCode}},width:"200px",action:"valueByPath"},{top:{name:(0,i.t)("type"),path:"type"},bottom:{name:(0,i.t)("status"),path:"status"},width:"120px",action:"status"},{top:{name:"\u041d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c",align:"end",getData:function(e){return e.stock||0}},bottom:{name:"\u0420\u0435\u0437\u0435\u0440\u0432",align:"end",getData:function(e){return e.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f",align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.awaiting)||0}},bottom:{name:"\u0412\u0442\u0440\u0430\u0447\u0435\u043d\u043e",align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("warehouse"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,i.t)("code"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:"\u041e\u043f\u0438\u0441",path:"description"},width:"190px",action:"valueByPath"},{top:{name:"\u0410\u0432\u0442\u043e\u0440",path:"author.name"},bottom:{name:"\u0415\u043c\u0435\u0439\u043b",path:"author.email"},width:"190px",action:"valueByPath"},{top:{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",align:"center",path:"createdAt"},bottom:{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",align:"center",path:"updatedAt"},width:"150px",action:"dateSimple"}],a=[{top:{name:(0,i.t)("Price OUT"),align:"end",getData:function(e){var n;return(0,o.__)(Number((null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.in)||0))}},bottom:{name:(0,i.t)("Price IN"),align:"end",getData:function(e){var n;return(0,o.__)(Number((null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.out)||0))}},width:"170px",action:"valueByPath"},{top:{name:(0,i.t)("comment"),align:"start",path:"description"},width:"150px",action:"valueByPath"}],d=[{top:{name:(0,i.t)("batch")},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("warehouse"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.label}},bottom:{name:(0,i.t)("code"),getData:function(e){var n;return null===(n=e.warehouse)||void 0===n?void 0:n.code}},width:"170px",action:"valueByPath"},{top:{name:(0,i.t)("Stock"),align:"end",getData:function(e){return e.stock||0}},bottom:{name:(0,i.t)("Reserved"),align:"end",getData:function(e){return e.reserved||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("Awaiting"),align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.awaiting)||0}},bottom:{name:(0,i.t)("Lost"),align:"end",getData:function(e){return(null===e||void 0===e?void 0:e.lost)||0}},width:"150px",action:"valueByPath"},{top:{name:(0,i.t)("updated"),align:"center",path:"updatedAt"},bottom:{name:(0,i.t)("created"),align:"center",path:"createdAt"},width:"150px",action:"dateSimple"}].concat(a)}}]);
//# sourceMappingURL=226.92cbb4d6.chunk.js.map