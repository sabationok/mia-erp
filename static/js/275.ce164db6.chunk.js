"use strict";(self.webpackChunkmia_erp=self.webpackChunkmia_erp||[]).push([[275],{6275:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var o,u=n(168),i=n(1413),r=n(9439),l=n(4925),d=n(2791),a=n(9656),c=n(3350),s=function(e){return e.UAH="UAH",e.EUR="EUR",e.USD="USD",e}({}),Z=n(4990),p=n(6681),v=n(8007),b=n(4343),m=n(3423),h=n(1500),y=n(51),g=n(8095),f=n(3544),C=n(870),P=n(2989),x=n(4695),O=n(3719),j=n(3329),S=["edit","onSubmit","copy","defaultState","addInputs"],E=v.object().shape({_id:v.string(),label:v.string()}).nullable().optional(),I=v.object().shape({_id:v.string(),label:v.string()}).required(),N=c.ZP.div(o||(o=(0,u.Z)(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: 8px;\n"])),(function(e){return e.gridTemplateColumns||"1fr 120px"})),A=function(e){e.edit;var t,n,o,u,c=e.onSubmit,A=(e.copy,e.defaultState),_=(e.addInputs,(0,l.Z)(e,S)),R=(0,y.CG)().directories.directories,T=(0,d.useState)(null===A||void 0===A?void 0:A.type),U=(0,r.Z)(T,2),F=U[0],q=U[1],M=(0,P.hN)({defaultValues:(0,i.Z)((0,i.Z)({currency:s.UAH},A),{},{eventDate:(0,h.w4)(null===A||void 0===A?void 0:A.eventDate)}),resolver:(0,x.X)((u=F,v.object().shape({amount:v.number().required(),type:v.string().required(),eventDate:v.string().required(),comment:v.string().optional(),countIn:u&&["INCOME","TRANSFER"].includes(u)?I:E,subCountIn:E,countOut:u&&["EXPENSE","TRANSFER"].includes(u)?I:E,subCountOut:E,category:I,subCategory:E}))),reValidateMode:"onSubmit"}),D=M.formState,V=D.errors,L=D.isValid,k=M.formValues,w=M.register,H=M.setValue,X=M.registerSelect,G=M.handleSubmit,W=(0,O.d)();var z=(0,d.useMemo)((function(){var e,t=R[C.cA.COUNTS],n=t.find((function(e){var t;return e._id===(null===(t=k.countIn)||void 0===t?void 0:t._id)}));return k.type&&["INCOME","TRANSFER"].includes(k.type)?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(m.Z,(0,i.Z)({},X("countIn",{label:(0,f.ZP)("countIn"),placeholder:(0,f.ZP)("countIn"),required:!0,options:t},{childName:"subCountIn"}))),(null===n||void 0===n?void 0:n.childrenList)&&(null===n||void 0===n||null===(e=n.childrenList)||void 0===e?void 0:e.length)>0&&(0,j.jsx)(m.Z,(0,i.Z)({label:(0,f.ZP)("subCountIn"),placeholder:(0,f.ZP)("subCountIn")},X("subCountIn",{options:null===n||void 0===n?void 0:n.childrenList})))]}):null}),[R,null===(t=k.countIn)||void 0===t?void 0:t._id,k.type,X]),B=(0,d.useMemo)((function(){var e,t=R[C.cA.COUNTS],n=null===(e=t.find((function(e){var t;return e._id===(null===(t=k.countOut)||void 0===t?void 0:t._id)})))||void 0===e?void 0:e.childrenList;return k.type&&["EXPENSE","TRANSFER"].includes(k.type)?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(m.Z,(0,i.Z)({},X("countOut",{label:(0,f.ZP)("countOut"),placeholder:(0,f.ZP)("countOut"),required:!0,options:t,error:V.countOut},{childName:"subCountOut"}))),n&&n.length>0&&(0,j.jsx)(m.Z,(0,i.Z)({label:(0,f.ZP)("subCountOut"),placeholder:(0,f.ZP)("subCountOut")},X("subCountOut",{options:n,error:V.subCountOut})))]}):null}),[R,V.countOut,V.subCountOut,null===(n=k.countOut)||void 0===n?void 0:n._id,k.type,X]),J=(0,d.useMemo)((function(){var e,t=R[C.cA.CATEGORIES_TR].filter((function(e){return e.type===k.type})),n=null===(e=t.find((function(e){var t;return e._id===(null===(t=k.category)||void 0===t?void 0:t._id)})))||void 0===e?void 0:e.childrenList;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(m.Z,(0,i.Z)({},X("category",{label:(0,f.ZP)("category"),placeholder:(0,f.ZP)("category"),required:!0,options:t},{childName:"subCategory"}))),n&&n.length>0&&(0,j.jsx)(m.Z,(0,i.Z)({label:(0,f.ZP)("subCategory"),placeholder:(0,f.ZP)("subCategory")},X("subCategory",{options:n})))]})}),[R,null===(o=k.category)||void 0===o?void 0:o._id,k.type,X]);return(0,j.jsx)(a.Z,(0,i.Z)((0,i.Z)({isValid:L,onSubmit:G((function(e){var t="INCOME"===k.type&&["countOut","subCountOut"]||"EXPENSE"===k.type&&["countIn","subCountIn"]||[],n=(0,h.G9)(e,t,"","amount");c&&c({_id:"",data:n},(0,i.Z)({},W.state))}),(function(e){return console.log(e)})),onOptSelect:function(e){var t=e.value;t&&(q(t),H("type",t))}},_),{},{extraFooter:(0,j.jsx)(O.Z,(0,i.Z)({},W)),children:(0,j.jsxs)(g.ZP,{className:"inputs",flex:"1",fillWidth:!0,maxHeight:"100%",padding:"0 8px 8px",overflow:"auto",children:[(0,j.jsx)(Z.Z,{label:(0,f.ZP)("dateAndTime"),direction:"vertical",children:(0,j.jsx)(p.ZP,(0,i.Z)({placeholder:(0,f.ZP)("dateAndTime"),type:"datetime-local"},w("eventDate")))}),(0,j.jsxs)(N,{children:[(0,j.jsx)(Z.Z,{label:(0,f.ZP)("amount"),direction:"vertical",children:(0,j.jsx)(p.ZP,(0,i.Z)({placeholder:(0,f.ZP)("amount"),type:"number"},w("amount",{valueAsNumber:!0})))}),(0,j.jsx)(Z.Z,{label:(0,f.ZP)("currency"),direction:"vertical",children:(0,j.jsx)(p.ZP,(0,i.Z)((0,i.Z)({placeholder:(0,f.ZP)("currency")},w("currency")),{},{disabled:!0}))})]}),B,z,J,(0,j.jsx)(m.Z,(0,i.Z)({label:(0,f.ZP)("contractor"),placeholder:(0,f.ZP)("contractor")},X("contractor",{options:R[C.cA.CONTRACTORS]}))),(0,j.jsx)(Z.Z,{label:(0,f.ZP)("comment"),direction:"vertical",children:(0,j.jsx)(b.Z,(0,i.Z)({placeholder:(0,f.ZP)("comment")},w("comment")))})]})}))}}}]);
//# sourceMappingURL=275.ce164db6.chunk.js.map